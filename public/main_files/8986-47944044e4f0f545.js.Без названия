(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8986],{83992:function(t,n,e){"use strict";e.d(n,{hi:function(){return h},LC:function(){return m}});var a=e(87066),r=e(62101),o=e(15832);const s="production"==={Develop:"development",Production:"production",Testing:"testing"}.Develop;var i=class{constructor(t,n=!1){var e=this;this.getDisplayData=()=>{const{resolvedUrl:t,res:{statusCode:n},req:{headers:e,method:a}}=this.data,r=e["x-request-id"];return{path:t,status_code:n,request_id:null==r?void 0:r.split(",")[0],ip:e["x-real-ip"],method:a,user_agent:e["user-agent"],name:"frontend-next",asctime:Date.now()}},this.getDisplayDataApi=()=>{const{config:{headers:t},request:{path:n,method:e,res:{statusCode:a}}}=this.data,r=t["x-request-id"];return{path:n,status_code:a,request_id:null==r?void 0:r.split(",")[0],ip:t["x-real-ip"],user_agent:t["user-agent"],method:e,name:"frontend-next",asctime:Date.now()}},this.sendLog=(t,n)=>{this.logger[n](t,this.isApi?this.getDisplayDataApi():this.getDisplayData())},this.info=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.sendLog(t,"info")},this.warn=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.sendLog(t,"warn")},this.error=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.sendLog(t,"error")},this.debug=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.sendLog(t,"debug")},this.data=t,this.isApi=n,this.logger=(0,o.createLogger)({level:"info",format:o.format.combine(o.format.timestamp({format:"YYYY-MM-DD hh:mm:ss,SSS"}),s?o.format.printf((t=>"".concat(t.timestamp," | ").concat(t.level," | ").concat(t.method," ").concat(t.path," (").concat(t.ip,") | name: ").concat(t.name," | status_code: ").concat(t.status_code," | request_id: ").concat(t.request_id," | user_agent: ").concat(t.user_agent," | asctime: ").concat(t.asctime))):o.format.json()),transports:new o.transports.Console})}},c=e(41097),u=e(98455),l=e(59466),d=e(34155);const f=t=>t,p=async t=>{var n;if((0,c.Z)()&&(0,u.$W)(null==t||null===(n=t.response)||void 0===n?void 0:n.status)){sessionStorage.getItem(r.OT)?sessionStorage.removeItem(r.OT):(await(0,l.k)(!1),window.location.href="/auth/login?redirect_to=".concat(encodeURIComponent(window.location.pathname)))}throw t},m=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=(null==t?void 0:t.onSuccess)||f,e=(null==t?void 0:t.onFail)||p,o=(0,c.Z)()?"/":"http://".concat(d.env.TETRIKA_HOST||"localhost",":8888"),s=a.default.create({baseURL:o,timeout:6e4,withCredentials:!0});return s.interceptors.request.use((t=>(0,c.Z)()?(sessionStorage.getItem(r.OT)&&(t.headers["Shared-Authorization"]=sessionStorage.getItem(r.OT)),t):t),(t=>Promise.reject(t))),s.interceptors.response.use((t=>{if(!(0,c.Z)()){new i(t,!0).info()}return n(t)}),(t=>{if(!(0,c.Z)()){new i(t,!0).error()}return e(t)})),s},h=m()},87547:function(t,n,e){"use strict";e.d(n,{Ds:function(){return g},KG:function(){return _},KJ:function(){return v},O$:function(){return d},TW:function(){return l},V1:function(){return c},YI:function(){return w},aM:function(){return y},jB:function(){return m},pt:function(){return h},qI:function(){return i},ut:function(){return u},v:function(){return f},zt:function(){return p}});var a=e(83992);const r="api/v2/order",o="/api/v2/activate_promocode",s="api/v2/package_choice",i=(t,n,e)=>a.hi.post("".concat(r,"/packages").concat(e?"?pupil_id=".concat(e):""),{package_ids:t,orderId:n}),c=(t,n)=>a.hi.delete("".concat(r,"/packages"),{params:{order_package_price_id:t,pupil_id:n||void 0}}),u=async t=>(await a.hi.get(r,{params:t})).data.payload,l=async t=>(await a.hi.get("".concat(r).concat(t?"?pupil_id=".concat(t):""))).data.payload,d=async(t,n)=>(await a.hi.get("payments/api/v1/payment_services",{params:{is_special:!!t||void 0,pupil_id:n||void 0}})).data.payload,f=async function(t,n){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(await a.hi.post("".concat(o).concat(n?"?pupil_id=".concat(n):""),{promocode:t,is_applied:e})).data.payload},p=async t=>(await a.hi.delete("".concat(o).concat(t?"?pupil_id=".concat(t):""))).data,m=async t=>(await a.hi.get("".concat(s).concat(t?"?pupil_id=".concat(t):""))).data.payload,h=async(t,n)=>(await a.hi.post("".concat(s).concat(n?"?pupil_id=".concat(n):""),{order_package_price_id:t})).data,g=async t=>(await a.hi.post("".concat(r,"/payments"),t,{params:t})).data.payload,y=async function(t,n){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(await a.hi.post("".concat(r,"/").concat(t),{currentOrderId:n,fromHistory:e})).data.payload},_=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await a.hi.get("".concat(r,"/state").concat(t?"?is_special=true":""))).data.payload},v=async t=>(await a.hi.get("".concat(r,"/state").concat(t?"?pupil_id=".concat(t):""))).data.payload,w=async t=>(await a.hi.post("".concat("/payments/api/v1/order/payment_info"),t)).data.payload},71669:function(t,n,e){"use strict";e.d(n,{a0:function(){return i}});var a=e(83992),r=e(34155);const o="/auth/login",s="unauthorized=1",i=(t,n)=>{n.res.statusCode=302;const e="".concat(r.env.ASSET_PREFIX||"/study").concat(n.resolvedUrl||n.asPath),a=t.config.headers.cookie.includes("login")?"".concat(o,"?").concat(s):"".concat(o,"?redirect_to=").concat(encodeURIComponent(e),"&").concat(s);n.res.setHeader("Location",a),n.res.end()};n.ZP=a.hi},60528:function(t,n,e){"use strict";e.d(n,{ks:function(){return D},sE:function(){return v},Mo:function(){return S},U8:function(){return w},ZQ:function(){return E},tj:function(){return _},_2:function(){return I}});var a=e(83992),r=e(62704),o=e(86802);var s=t=>(0,r.Z)(t*o.default.MS_IN_SECOND).subtract((0,r.Z)().utcOffset(),"minute").format("YYYY-MM-DD HH:mm");var i=t=>{let n=[];return t.map((t=>{const e={scheduledTime:s(t.scheduledTime)};n.push({...t,...e})})),n},c=e(12828),u=e.n(c);var l=t=>{let n=[];return t.map((t=>{n.push(u()(t))})),n},d=e(54243);var f=t=>t.map((t=>({...{state:"new",scheduledTime:s(t.startTime),id:(0,d.H)()},...t})))||[],p=e(72567);const m="/api/v2/lesson_journal",h="/calendar/events/scheduled_lessons",g="/api/lessons_archive",y=t=>t===p.Z.SCHEDULED;async function _(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(y(t)){const t=await a.hi.get("".concat(h,"?event_types=lesson,overbooking&offset=").concat(n,"&limit=").concat(e));return f(t.data.payload)}const r=await a.hi.get("".concat(g,"?offset=").concat(n,"&limit=").concat(e));return l(r.data.payload)}const v=async t=>{const n=await a.hi.get("".concat("/api/v2/empty_journals","?user_id=").concat(t));return i(n.data.payload)},w=async(t,n)=>(await a.hi.get(m,{params:{lesson_id:t,is_intro:n}})).data.payload,S=async t=>(await a.hi.get("".concat("api/v2/lessons","/events"),{params:{event_id:t}})).data.payload,I=async(t,n,e,r,o,s,i,c)=>(await a.hi.post(m,{lessonId:t,journal:n,ready:r,isIntro:e,page:o,startTime:s,duration:i,subject:c})).data.payload,E=async t=>(await a.hi.get("/api/cancel_lesson/".concat(t))).data.payload,D=async(t,n)=>(await a.hi.post("/api/cancel_lesson/".concat(t),n)).data.payload},59466:function(t,n,e){"use strict";e.d(n,{k:function(){return o}});var a=e(62101),r=e(83992);const o=async function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=localStorage.getItem("refreshtoken");try{s(),await r.hi.post("/api/v1/auth/logout",{refresh_token:n||"!"}),t&&(window.location.href="/")}catch(t){console.error(t)}},s=()=>{localStorage.removeItem("accesstoken"),localStorage.removeItem("refreshtoken");sessionStorage.getItem(a.OT)&&sessionStorage.removeItem(a.OT)}},1999:function(t,n,e){"use strict";e.d(n,{HJ:function(){return l},IT:function(){return g},Ky:function(){return y},L_:function(){return h},Sv:function(){return D},Uj:function(){return d},cT:function(){return I},fR:function(){return E},lz:function(){return _},qb:function(){return S},vz:function(){return v},xU:function(){return p},yd:function(){return w}});var a=e(83992),r=e(93162),o=e(91412),s=e(97642),i=e(41097),c=e(98455);const u="/api/mattermost",l=async()=>(await a.hi.get(u)).data.payload,d=async t=>(await a.hi.post("/api/mm_users_data",t)).data.payload,f="isRepeatRequest",p=(0,a.LC)({onFail:async t=>{var n,e;if((0,c.$W)(null==t||null===(n=t.response)||void 0===n?void 0:n.status)&&(0,i.Z)()){if(Boolean(sessionStorage.getItem(f)))throw t;const{mm_user:n}=await l();if(!n)return;throw await(async t=>(await a.hi.post("api/v2/update_mm_token",{mm_user:t})).data.payload)(n),e="true",sessionStorage.setItem(f,e),window.location.reload(),t.hasNotWarning=!0,t}throw t}}),m=async()=>{const t=await l(),{mm_token:n,mmurl:e}=t;let a;if(e){const t=e.indexOf("//");a="https:".concat(e.slice(t))}return p.defaults.baseURL=a,p.defaults.headers.Authorization="Bearer ".concat(n),p.defaults.headers["Content-Type"]="application/json",p.defaults.headers["X-Requested-With"]="XMLHttpRequest",t},h=async t=>(await p.get("/users/me/teams/".concat(t,"/channels/members"))).data,g=async()=>(await m(),(await p.get("/users/me/preferences/direct_channel_show")).data),y=async t=>(await p.get("/users/me/teams/".concat(t,"/channels"))).data,_=async t=>(await p.post("/users/status/ids",t)).data,v=async(t,n)=>(await p.get("/channels/".concat(t,"/posts?page=").concat(n,"&per_page=").concat(o.LZ))).data,w=async t=>(await p.post("/channels/members/me/view",{channel_id:t})).data,S=async function(t,n,e){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(await p.post("/posts",{channel_id:t,message:n.message.trim(),file_ids:e,props:a})).data},I=async t=>{const{file:n,fileId:e,channel:a,onStartUpload:r,onProgress:o,onSuccess:i,onError:c,contactIndex:u}=t;try{const t=await m(),{mmurl:c}=t,l="".concat(c,"/files"),d=(0,s.XA)(n,a);(0,s.ht)(n,(()=>r({file:n,fileId:e,contactIndex:u})));const f=(await p.post(l,d,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t=>(0,s.X4)(t,e,u)(o)})).data.file_infos[0].id;i({fileId:e,mmId:f,contactIndex:u})}catch(t){console.log("Не удалось загрузить файл"),c(t,{contactIndex:u,fileId:e})}},E=(t,n)=>p.delete("/posts/".concat(t,"?tetrika_user=").concat(n)),D=async(t,n)=>{try{const e=await p.get("/files/".concat(t),{responseType:"blob"});await(0,r.saveAs)(e.data,n)}catch(t){throw new Error(t)}}},21165:function(t,n,e){"use strict";e.d(n,{uq:function(){return l},M6:function(){return f},jo:function(){return c},p5:function(){return u},I2:function(){return d}});var a=e(83992);const r=t=>t.replace(/(_[a-z])/g,(t=>t.replace("_","").toUpperCase()));let o=null,s=null;const i=t=>t.then((t=>{const{payload:n}=t.data;return s=n,n})),c=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t&&s)return Promise.resolve(s);if(t&&o)return i(o);const n=a.hi.get("/api/me");return t&&(o=n),i(n)},u=async()=>(await a.hi.get("/api/me")).data.payload,l=()=>a.hi.post("/api/me/pupil/edit/class_confirmation"),d=t=>a.hi.post("/api/me/pupil/edit/pupil_class",{pupil_class:t}),f=async()=>(await a.hi.get("/api/v2/goals")).data.payload.reduce(((t,n)=>({...t,[r(n.id)]:n.description})),{})},45725:function(t,n,e){"use strict";e.d(n,{Dw:function(){return c},EM:function(){return u},I_:function(){return l},Lb:function(){return i},le:function(){return o},s5:function(){return s}});var a=e(83992);const r="/api/v2/tutors/payoffs",o=async t=>(await a.hi.post("".concat(r,"/info"),t)).data.payload,s=async t=>(await a.hi.post("".concat(r,"/detalization"),t)).data.payload,i=async t=>(await a.hi.post("".concat(r,"/month_stat"),t)).data.payload,c=async t=>(await a.hi.get("api/v2/payoffs/checks/".concat(t,"?with_payoff=true"))).data.payload,u=async()=>(await a.hi.get("".concat(r,"/waiting"))).data.payload,l=async t=>(await a.hi.post("/api/v2/payoffs/checks",t)).data.payload},71709:function(t,n,e){"use strict";e.d(n,{CU:function(){return i},Eq:function(){return o},nJ:function(){return s}});var a=e(83992);const r="api/v2/order",o=async(t,n)=>(await a.hi.post("".concat(r,"/share?order_id=").concat(t).concat(n?"&pupil_id=".concat(n):""))).data.payload,s=async t=>(await a.hi.get(r,{params:t})).data,i=async t=>(await a.hi.get("".concat(r,"/state"),{params:t})).data.payload},87908:function(t,n,e){"use strict";e.d(n,{T:function(){return o}});var a=e(83992);const r="/api/subjects_list",o=async function(){let{pupilId:t="",withoutLegacySubjects:n=0,withoutMinigroup:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await a.hi.get(r,{params:{pupilId:t,withoutLegacySubjects:n,withoutMinigroup:e}})).data.payload}},58919:function(t,n,e){"use strict";var a=e(85893),r=e(3850),o=e(67294);function s(t){let{size:n="default",isShowUchiDomaLogo:e=!1,className:o}=t;const{t:s}=(0,r.$G)("common");let i="".concat("https://tetrika-school.ru","/s3/static/img/logo");if("small"===n)i="".concat(i,e?"/uchi_logo_cutted.svg":"/logo_small.svg");else i="".concat(i,e?"/uchi_logo_full.svg":"/logo.svg");return(0,a.jsx)("img",{alt:s("logo"),src:i,className:o})}n.Z=(0,o.memo)(s)},79775:function(t,n,e){"use strict";var a;e.d(n,{$T:function(){return a},M3:function(){return f},NI:function(){return l},To:function(){return o},eG:function(){return s},fd:function(){return i},lT:function(){return u},qe:function(){return d},r9:function(){return c},tc:function(){return r}}),function(t){t.SendSucces="Success",t.DeliveryNotRead="DeliveryNotRead",t.DeliveryAndRead="DeliveryAndRead"}(a||(a={}));const r=["image/jpg","image/png","image/svg","image/jpeg","image/svg+xml"],o=["jpg","png","svg","jpeg","svg+xml"];var s;!function(t){t.Contacts="Contacts",t.ChatRoom="ChatRoom"}(s||(s={}));const i=5,c=5e7,u=25;var l,d;!function(t){t.LargeFile="LargeFile",t.MaxCounterFile="MaxCounterFile",t.FailedSendFile="FailedSendFile"}(l||(l={})),function(t){t.Start="start",t.End="end"}(d||(d={}));const f=["#D983E0","#55C88D","#75C4DA","#E266AC"]},77285:function(t,n,e){"use strict";e.d(n,{b2:function(){return l},e$:function(){return u},lv:function(){return i},nv:function(){return o}});var a=e(62704),r=e(79775);const o=t=>t.split(".").pop().toUpperCase(),s=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const e=["байт","Килобайт","Мегабайт","Гигабайт","Терабайт"];if(t<1e3)return"".concat(t.toFixed(1)," ").concat(e[n]);return s(t/1e3,n+1)},i=(t,n)=>Math.floor(Math.random()*(n-t+1)+t),c={[r.NI.FailedSendFile]:"Не получилось отправить данные",[r.NI.LargeFile]:t=>"".concat(t," слишком большой файл.Максимальный размер файла ").concat(s(r.r9)),[r.NI.MaxCounterFile]:"Максимальное число файлов для отправки: ".concat(r.fd)},u=(t,n)=>"function"==typeof c[t]?c[t](n):c[t],l=t=>(0,a.Z)().isSame(t,"day")?"Сегодня":(0,a.Z)().subtract(1,"day").isSame(t,"day")?"Вчера":(0,a.Z)(t).format("D MMMM")},31296:function(t,n,e){"use strict";e.d(n,{K4:function(){return u},K8:function(){return d},WZ:function(){return p},a1:function(){return l},eJ:function(){return i},mT:function(){return f},nb:function(){return c},wg:function(){return h},wq:function(){return g},xU:function(){return m}});var a=e(29829);const r={cards:[],currentOffset:e(29610).Yb,isLoading:!1,errorModal:!1,errorText:""},o=(0,a.oM)({name:"buyHistory",initialState:r,reducers:{setCards:(t,n)=>{let{payload:e}=n;t.cards=e},setOffset:(t,n)=>{let{payload:e}=n;t.currentOffset=e},setLoading:(t,n)=>{let{payload:e}=n;t.isLoading=e},setErrorModal:(t,n)=>{let{payload:e}=n;t.errorModal=e},setErrorText:(t,n)=>{let{payload:e}=n;t.errorText=e}}});n.ZP=o;const{actions:s}=o,{setCards:i,setOffset:c,setLoading:u,setErrorModal:l,setErrorText:d}=o.actions,f=t=>t.buyHistory.cards,p=t=>t.buyHistory.currentOffset,m=t=>t.buyHistory.isLoading,h=t=>t.buyHistory.errorModal,g=t=>t.buyHistory.errorText},29610:function(t,n,e){"use strict";e.d(n,{De:function(){return s},VZ:function(){return r},Yb:function(){return a},tl:function(){return o}});const a=0,r=5;var o;!function(t){t.BACK="back",t.NEXT="next"}(o||(o={}));const s="#EFF7EE"},96887:function(t,n,e){"use strict";e.d(n,{BB:function(){return f},BT:function(){return g},Bk:function(){return H},Bv:function(){return E},Eq:function(){return K},Fr:function(){return v},Fy:function(){return _},Gb:function(){return Z},M:function(){return M},Mt:function(){return N},N8:function(){return q},Ng:function(){return l},QK:function(){return X},V:function(){return m},Wl:function(){return I},ZL:function(){return b},_3:function(){return U},_Y:function(){return T},_h:function(){return x},a1:function(){return y},af:function(){return O},cb:function(){return D},dv:function(){return j},eD:function(){return d},ek:function(){return C},fU:function(){return S},gK:function(){return h},gP:function(){return P},gw:function(){return B},ho:function(){return k},k:function(){return L},mR:function(){return p},q$:function(){return Y},tT:function(){return W},te:function(){return F},w_:function(){return w},wg:function(){return R},xu:function(){return z},xz:function(){return A}});var a=e(29829),r=e(87547),o=e(71709),s=e(31296),i=e(38458);const c={cartData:null,paymentsData:[],paymentService:"",promoCodeStatus:"",packagesIdsForBonus:[],countOfInstallmentMonths:{},pageStatus:i.tQ.EMPTY,errorModal:!1,lastOrder:null,promoCodeErrorText:"",isShareDialogOpen:!1,sharedLink:null,sharingErrorTitle:"",isError:!1,failDialogModal:!1,changedCartWarning:null,isUchi:!1,userData:null},u=(0,a.oM)({name:"cart",initialState:c,reducers:{setCartData:(t,n)=>{let{payload:e}=n;t.cartData=e},setPaymentsData:(t,n)=>{let{payload:e}=n;t.paymentsData=e;const a={};e.forEach((t=>{let{paymentService:n,loanTerms:e}=t;e&&(a[n]=e.months[0])})),t.countOfInstallmentMonths=a},setPaymentService:(t,n)=>{let{payload:e}=n;t.paymentService=e},setPromoCodeStatus:(t,n)=>{let{payload:e}=n;t.promoCodeStatus=e},setPackagesIdsForBonus:(t,n)=>{let{payload:e}=n;t.packagesIdsForBonus=e},setCountOfInstallmentMonths:(t,n)=>{let{payload:e}=n;t.countOfInstallmentMonths={...t.countOfInstallmentMonths,...e}},setPageStatus:(t,n)=>{let{payload:e}=n;t.pageStatus=e},setErrorModal:(t,n)=>{let{payload:e}=n;t.errorModal=e},setLastOrder:(t,n)=>{let{payload:e}=n;t.lastOrder=e},setPromoCodeErrorText:(t,n)=>{let{payload:e}=n;t.promoCodeErrorText=e},setIsShareDialogOpen:(t,n)=>{let{payload:e}=n;t.isShareDialogOpen=e},setSharingLink:(t,n)=>{let{payload:e}=n;t.sharedLink=e},setSharingErrorTitle:(t,n)=>{let{payload:e}=n;t.sharingErrorTitle=e},setIsError:(t,n)=>{let{payload:e}=n;t.isError=e},setFailDialogModal:(t,n)=>{let{payload:e}=n;t.failDialogModal=e},setChangedCartWarning:(t,n)=>{let{payload:e}=n;t.changedCartWarning=e},setIsUchiExperiment:(t,n)=>{let{payload:e}=n;t.isUchi=e},setUserData:(t,n)=>{let{payload:e}=n;t.userData=e}}});n.ZP=u;const{setCartData:l,setPaymentsData:d,setPaymentService:f,setPromoCodeStatus:p,setPackagesIdsForBonus:m,setCountOfInstallmentMonths:h,setPageStatus:g,setErrorModal:y,setLastOrder:_,setPromoCodeErrorText:v,setIsShareDialogOpen:w,setSharingLink:S,setSharingErrorTitle:I,setIsError:E,setFailDialogModal:D,setChangedCartWarning:x,setIsUchiExperiment:C,setUserData:M}=u.actions,b=t=>t.cart.cartData,T=t=>t.cart.paymentsData,O=t=>t.cart.paymentService,U=t=>{var n;return null===(n=t.cart.cartData)||void 0===n?void 0:n.promocode},P=t=>t.cart.promoCodeStatus,L=t=>t.cart.packagesIdsForBonus,k=t=>t.cart.countOfInstallmentMonths,N=t=>t.cart.pageStatus,R=t=>t.cart.errorModal,A=t=>t.cart.lastOrder,Z=t=>t.cart.promoCodeErrorText,F=t=>t.cart.isShareDialogOpen,j=t=>t.cart.sharedLink,Y=t=>t.cart.sharingErrorTitle,q=t=>t.cart.isError,H=t=>t.cart.failDialogModal,B=t=>t.cart.changedCartWarning,K=t=>t.cart.isUchi,W=t=>t.cart.userData,z=t=>async n=>{try{const a=await(0,r.TW)(t);if(n(l(a)),a.packagesPrices.length?a.packagesPrices.length>0&&n(g(i.tQ.CONTAINED)):n(g(i.tQ.EMPTY)),a.promocode){var e;const t=null===(e=a.warnings)||void 0===e?void 0:e.promocodeWarning;t?(n(p(i.Ke.ERROR)),n(v(t))):n(p(i.Ke.SUCCESS))}}catch(t){n(y(!0)),console.error(t)}},X=(t,n,e)=>async a=>{try{const e=await(0,o.Eq)(t.orderId,n);a(w(!0)),a(S(e.link))}catch(t){a(y(!0)),t.response?a((0,s.K8)(t.response.data.error)):(console.error(t),a((0,s.K8)(e)))}}},38458:function(t,n,e){"use strict";var a,r,o,s,i,c,u,l;e.d(n,{IH:function(){return l},Ke:function(){return a},aA:function(){return s},bi:function(){return o},pg:function(){return r},r8:function(){return u},tQ:function(){return i},vH:function(){return c}}),function(t){t.SUCCESS="success",t.ERROR="error"}(a||(a={})),function(t){t.SUCCESS="success",t.FAILED="failed"}(r||(r={})),function(t){t.LESSONS="lesson",t.PERCENT="percent",t.RUBLES="ruble",t.PROMOCODE="promocode",t.MANAGERS="managers"}(o||(o={})),function(t){t.CARD_LIST="cardList",t.PAYMENT_BLOCK="paymentBlock"}(s||(s={})),function(t){t.EMPTY="empty",t.CONTAINED="contained",t.SUCCESS="done",t.FAILED="failed",t.PROGRESS="progress",t.IN_PROGRESS="in_progress",t.DEACTIVATED="deactivated"}(i||(i={})),function(t){t.in_progress="PROGRESS",t.done="SUCCESS",t.failed="FAILED"}(c||(c={})),function(t){t.SUCCESS="success",t.UNSUCCESSFUL="unsuccessful"}(u||(u={})),function(t){t.Disabled="Disabled",t.Default="Default",t.AB="AB"}(l||(l={}))},62101:function(t,n,e){"use strict";e.d(n,{OT:function(){return r},PJ:function(){return a},no:function(){return o}});const a=15,r="sharedAuthJWT",o=5},72567:function(t,n,e){"use strict";var a;!function(t){t.SCHEDULED="scheduled",t.PAST="past"}(a||(a={})),n.Z=a},18705:function(t,n,e){"use strict";var a;e.d(n,{G:function(){return a}}),function(t){t.PUPIL="pupil",t.TUTOR="tutor",t.ADMIN="admin",t.SUPPORT="support"}(a||(a={})),n.Z=a},51171:function(t,n,e){"use strict";e.d(n,{$:function(){return a},B:function(){return d},Eo:function(){return i},Sh:function(){return u},U8:function(){return s},Zl:function(){return o},_8:function(){return l},a8:function(){return f},c6:function(){return p},cm:function(){return r},eh:function(){return c}});const a="8-800-775-50-53",r="tel:".concat(a),o="https://t.me/TetrikaPupilsOfficialBot",s="https://t.me/tetrika_teachers_bot",i="viber://pa?chatURI=tetrika-school",c="mailto:hi@tetrika-school.ru",u="mailto:tutor@tetrika-school.ru",l="tel:+78005003072",d="mailto:info@uchi.ru",f=3821,p=3037},86802:function(t,n,e){"use strict";e.d(n,{s_:function(){return a},tF:function(){return r}});const a=1e3,r=30,o=86400*a,s={SECONDS_IN_MINUTE:60,MS_IN_SECOND:a,MS_IN_MINUTE:60*a,SECONDS_IN_HOUR:3600,MS_IN_HOUR:3600*a,MS_IN_DAY:o,MINUTES_IN_HOUR:60,MS_IN_WEEK:7*o,DAY_IN_WEEK:7,DAYS_IN_MONTH:r};n.default=s},26358:function(t,n,e){"use strict";e.d(n,{Ti:function(){return r},sb:function(){return o}});var a=e(71669);const r=async()=>(await a.ZP.get("/api/navigation")).data.payload,o=async()=>(await a.ZP.get("/api/v2/me/balance")).data.payload},54587:function(t,n,e){"use strict";e.d(n,{D_:function(){return C},Fh:function(){return k},GB:function(){return m},HJ:function(){return M},Lu:function(){return g},Nw:function(){return p},Qh:function(){return I},Qq:function(){return S},Rh:function(){return N},SK:function(){return D},UO:function(){return w},YU:function(){return P},Zf:function(){return x},aN:function(){return T},ew:function(){return b},g1:function(){return E},gS:function(){return y},kl:function(){return L},pr:function(){return U}});var a=e(29829),r=e(68697),o=e(60528),s=e(45725),i=e(87908),c=e(72567),u=e(98255),l=e(82672),d=e(26358);const f=(0,a.oM)({name:"sidebar",initialState:{isOpen:!1,isExpanded:!1,navList:[],balance:[],reserved:[],subjectNames:{},rewardAlert:{},scheduled:[],scheduledValues:[]},reducers:{close:t=>{t.isOpen=!1},open:t=>{t.isOpen=!0},collapse:t=>{t.isExpanded=!1},expand:t=>{t.isExpanded=!0},toggleSidebar:t=>{t.isOpen=!t.isOpen},setNavList:(t,n)=>{let{payload:e}=n;t.navList=e},setBalance:(t,n)=>{let{payload:e}=n;t.balance=e},setReserved:(t,n)=>{let{payload:e}=n;t.reserved=e},setSubjectNames:(t,n)=>{let{payload:e}=n;t.subjectNames=e},setRewardAlert:(t,n)=>{let{payload:e}=n;t.rewardAlert=e},setScheduledLessons:(t,n)=>{let{payload:e}=n;t.scheduled=e},setScheduledSubjectValues:(t,n)=>{let{payload:e}=n;t.scheduledValues=e}}});n.ZP=f;const{actions:p}=f,{toggleSidebar:m,setNavList:h,setBalance:g,setReserved:y,setSubjectNames:_,setRewardAlert:v,setScheduledLessons:w,setScheduledSubjectValues:S}=f.actions,I=()=>async t=>{t(h(await(0,d.Ti)()))},E=()=>async t=>{t(_(await(0,i.T)()))},D=()=>async t=>{const{balance:n,lessonsReserved:e}=await(0,d.sb)();t(g(n)),t(y(e))},x=()=>async t=>{if((0,u.Z)("isScheduleAvailable"))return;const n=await(0,o.tj)(c.Z.SCHEDULED,0,0);t(w(n)),t(S((0,l.Z)(n)))},C=()=>async t=>{const n=new Date,e=await(0,s.le)({year:n.getFullYear(),month:n.getMonth()+1});t(v(e))},M=t=>t.sidebarSlice.isOpen,b=t=>t.sidebarSlice.isExpanded,T=t=>t.sidebarSlice.navList,O=t=>t.sidebarSlice.balance,U=((0,r.P1)(O,(t=>t.find((t=>"intro"===t.tutorQualification)))),t=>t.sidebarSlice.rewardAlert),P=(0,r.P1)(O,(t=>[...t].sort(((t,n)=>t.lessonsNum-n.lessonsNum)))),L=(0,r.P1)((t=>t.sidebarSlice.reserved),(t=>[...t].sort(((t,n)=>t.lessonsNum-n.lessonsNum)))),k=t=>t.sidebarSlice.subjectNames,N=t=>t.sidebarSlice.scheduledValues},74476:function(t,n,e){"use strict";e.d(n,{ZP:function(){return f},Ip:function(){return x},Hp:function(){return E},Ec:function(){return y},w:function(){return g},uo:function(){return b},is:function(){return R},V6:function(){return O},QL:function(){return P},wT:function(){return L},P1:function(){return N},n$:function(){return A},ND:function(){return T},oM:function(){return U},c6:function(){return Z},dy:function(){return C},xm:function(){return M},T8:function(){return k},Xw:function(){return w},mL:function(){return v},eC:function(){return I},oB:function(){return D}});var a=e(29829),r=e(68697),o=e(87547),s=e(1999),i=e(21165),c=e(96887);const u="userAppBar";var l=e(63903);const d=(0,a.oM)({name:u,initialState:{user:{},equipmentTest:!1,dialogs:[],countPackagesInCart:0,orderId:null,loadingUnreadDialogs:{isError:!1,isErrorShown:!1}},reducers:{setUser:(t,n)=>{let{payload:e}=n;t.user=e},setEquipmentTest:(t,n)=>{let{payload:e}=n;t.equipmentTest=e},handleUnreadMessage:(t,n)=>{let{payload:e}=n;const a=t.dialogs.find((t=>t.channel_id===e.channel_id));a&&(a.mention_count+=1)},readDialog:(t,n)=>{let{payload:e}=n;const a=t.dialogs.find((t=>t.channel_id===e));a&&(a.mention_count=0)},setUnreadDialogs:(t,n)=>{let{payload:e}=n;t.dialogs=e},setIsErrorLoadingDialogs:(t,n)=>{let{payload:e}=n;t.loadingUnreadDialogs.isError=e},setIsErrorShownLoadingDialogs:(t,n)=>{let{payload:e}=n;t.loadingUnreadDialogs.isErrorShown=e},setCountPackagesInCart:(t,n)=>{let{payload:e}=n;t.countPackagesInCart=e},setOrderId:(t,n)=>{let{payload:e}=n;t.orderId=e}}});var f=d;const{setUser:p,setEquipmentTest:m,setUnreadDialogs:h,readDialog:g,handleUnreadMessage:y,setIsErrorLoadingDialogs:_,setIsErrorShownLoadingDialogs:v,setCountPackagesInCart:w,setOrderId:S}=d.actions,I=()=>async(t,n)=>{const{chat:{mattermost:{team_id:e}}}=n();try{const n=await(0,s.L_)(e);t(h(n)),t(_(!1))}catch(n){if(null==n?void 0:n.hasNotWarning)return;t(_(!0)),t(v(!0))}},E=()=>async t=>{t(p(await(0,i.p5)()))},D=()=>t=>{const n=!!document.cookie.match("isDevicePassedTest=1");t(m(n))},x=()=>async t=>{const n=await(0,o.KJ)();if(n.currentOrder){const{packagesCount:e,id:a}=n.currentOrder;t(w(e)),t(S(a))}n.lastOrder&&t((0,c.Fy)(n.lastOrder))},C=t=>t[u].user,M=(0,r.P1)((t=>t[u].user),(t=>{let{id:n,phone:e,email:a}=t;return{id:n,phone:e,email:a}})),b=t=>t[u].user.class_confirmation_required,T=t=>t[u].user.class,O=t=>t[u].equipmentTest,U=t=>t[u].user.role,P=t=>(0,l.Rz)(t[u].user.role),L=t=>(0,l.cX)(t[u].user.role),k=t=>t[u].user.experiment,N=t=>t[u].loadingUnreadDialogs,R=t=>t[u].countPackagesInCart,A=t=>t[u].orderId,Z=t=>t[u].dialogs.reduce(((t,n)=>t+n.mention_count),0)},91412:function(t,n,e){"use strict";e.d(n,{Hf:function(){return a},LZ:function(){return o},_p:function(){return r},o7:function(){return s}});const a="chat_mention_count",r=3e4,o=25,s=60},97642:function(t,n,e){"use strict";e.d(n,{Gr:function(){return l},J0:function(){return y},Kz:function(){return p},Np:function(){return f},Oh:function(){return S},Ox:function(){return u},TC:function(){return h},Uw:function(){return w},X4:function(){return D},XA:function(){return I},ht:function(){return E},tS:function(){return i},v5:function(){return g},z8:function(){return c}});e(20698);var a=e(62704),r=(e(94280),e(77285)),o=e(79775),s=e(91412);const i=t=>{const n={image:["bmp","gif","jpg","jpeg","png","svg"],video:["3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv"],audio:["aif","cda","mid","midi","mp3","mpa","ogg","wav","wma","wpl"],text:["doc","docx","odt","pdf","rtf","tex","txt","wks","wps","wpd"]},e=null==t?void 0:t.split(".").pop().toLowerCase();return Object.keys(n).filter((t=>n[t].includes(e)))[0]||"other"},c=t=>{let n;switch(i(t)){case"image":n="image-icon-white";break;case"video":n="video-icon-white";break;case"audio":n="audio-icon-white";break;default:n="file-icon-white"}return n},u=()=>"_".concat(Math.random().toString(36).substr(2,9)),l=t=>{let{mmUrl:n,secure:e}=t;const a=n.indexOf("//");let r,o;return r="wss:".concat(n.slice(a),"/websocket"),o="https:".concat(n.slice(a)),{SOCKET_URL:r,API_URL:o}};const d=(t,n)=>t.name.split("__")[0]!==n?t.name.split("__")[0]:t.name.split("__")[1],f=function(t,n,e){const a=[];return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?((t,n)=>{const e=[];return t.sort(((t,n)=>n.lastPostAt-t.lastPostAt)).slice(0,s.o7).forEach((t=>{const a="off-topic"===t.name||"town-square"===t.name,r=d(t,n);r&&!a&&e.push(r)})),e})(n,e):(t.forEach((t=>{const n="true"===t.value&&t.name,r="off-topic"===t.name||"town-square"===t.name,o=d(t,e);o&&n&&!r&&a.push(o)})),a)},p=(t,n,e,a)=>{const r=[];n&&n.forEach((n=>{if(n.mm_user&&t[n.mm_user]&&t[n.mm_user].id){const o=m({channels:t,contact:n,contactsStatuses:e,members:a});r.push(o)}else console.error("Data for contact not found","\n Contact =>",n,"\n Channels by mm_user =>",t)}));return r.sort(((t,n)=>n.lastPostAt-t.lastPostAt))};const m=t=>{let{channels:n,contact:e,contactsStatuses:a,members:s}=t;const i=n[e.mm_user].id,{name:c,additional_id:u,email:l,avatar_link:d,mm_user:f,role:p,id:m}=e,{total_msg_count:h,last_post_at:g}=n[f];return{name:c,additional_id:u,email:l,avatar_link:d,mmUser:f,channelId:i,totalMsgCount:h,unreadMsgCount:s[i],lastPostAt:g,status:a[f].status,role:p,id:m,avatarName:c.split(" ").map((t=>t.slice(0,1).toUpperCase())).slice(0,2).join(""),avatarColor:o.M3[(0,r.lv)(0,o.M3.length-1)],isHidden:!1}};function h(t,n){const e={};return t.forEach((t=>{if(!("off-topic"===t.name||"town-square"===t.name)){const a=d(t,n);e[a]=t}})),e}function g(t){const n={};return t.forEach((t=>n[t.user_id]=t)),n}function y(t){const n={},e={};return t.forEach((t=>{n[t.channel_id]=t.mention_count,t.mention_count>0&&(e[t.channel_id]=t.mention_count)})),localStorage.setItem(s.Hf,JSON.stringify(e)),n}function _(t){let{postDate:n,prevDate:e}=t;const r=(0,a.Z)(n).format("YYYY-MM-DD");return(0,a.Z)(r).isAfter(e)}function v(t){let{me:n,post:e,prevUserId:a,mmUser:r}=t;const o=e.user_id===r?"my":"sender";const s="admin"===n.role,i=e&&e.props&&e.props.userName&&e.props.userId&&e.props.userId!==a;return!(!s||!i||"my"!==o)}function w(t,n,e,a,r){var o;const s=t.user_id===r?"my":"sender",i=0===n.length;return{whoseMessageIs:s,message:t,withName:v({me:a,mmUser:r,post:t,prevUserId:null===(o=n[n.length-1])||void 0===o?void 0:o.message.user_id}),withDate:i||_({prevDate:n[n.length-1].message.create_at,postDate:t.create_at}),me:a,sender:e}}function S(t,n,e,r,o){return t.reverse().map(((s,i)=>{const c=n[s],u=c.user_id===o?"my":"sender",l=t[i-1],d=function(t){let{prevPostId:n,posts:e,currPostDate:r}=t;const o=(0,a.Z)(r).format("YYYY-MM-DD");let s,i=!0;return n&&(s=(0,a.Z)(e[n].create_at).format("YYYY-MM-DD")),s&&(i=(0,a.Z)(a.Z.utc(o)).isAfter(a.Z.utc(s))),i}({prevPostId:l,posts:n,currPostDate:c.create_at}),f=function(t){let{me:n,prevPostId:e,posts:a,post:r,whoseMessageIs:o}=t;function s(t){return t&&t.props&&t.props.userName&&t.props.userId}const i="admin"===n.role,c=i&&"my"===o,u=s(r);if(i)return!!c&&(!!u&&(!e||(!s(a[e])||r.props.userId!==a[e].props.userId)));return!1}({me:r,prevPostId:l,posts:n,post:c,whoseMessageIs:u});return{whoseMessageIs:u,message:c,withName:f,withDate:d,me:r,sender:e}}))}const I=(t,n)=>{const e=new FormData;return e.append("files",t),e.append("channel_id",n),e},E=(t,n)=>{const e=i(t.name);if(t.renderType=e,"image"===e){const e=new Image;e.src=window.URL.createObjectURL(t),e.onload=()=>{t.width=e.naturalWidth,t.height=e.naturalHeight,n()}}else n()},D=(t,n,e)=>a=>{if(t.lengthComputable){let r=t.loaded/t.total*100;r=parseInt(r,10),a({fileId:n,progress:r,contactIndex:e})}}},54243:function(t,n,e){"use strict";e.d(n,{H:function(){return a},k:function(){return r}});const a=()=>"_".concat(Math.random().toString(36).substr(2,9)),r=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)}))},46375:function(t,n,e){"use strict";e.d(n,{m:function(){return r},u:function(){return a}});const a={math:"математика",rus:"русский язык",en:"английский язык",reading:"чтение",phys:"физика",speech_therapist:"логопед",soc:"обществознание",logic:"логика",bio:"биология",preparation_for_school:"подготовка к школе",it:"информатика",programming:"программирование",chem:"химия",hist:"история",world_around:"окружающий мир",lit:"литература",memory:"развитие памяти",deut:"немецкий язык",rus_as_foreign:"Русский как иностранный",geo:"география",fre:"французский язык",spanish:"испанский язык",italian:"итальянский язык",chin:"китайский язык",jap:"японский язык",psy:"психология",computer_literacy:"компьютерная грамотность",tetrika:"Тетрика",prim_class:"начальные классы",mini_group_math:"Мини-группы Математика",mini_group_russian:"Мини-группы Русский язык",mini_group_english:"Мини-группы Английский",mini_group_scratch:"Мини-группы Scratch",mini_group_roblox:"Мини-группы Roblox",mini_group_minecraft:"Мини-группы Minecraft",mini_group_python:"Мини-группы Python"};var r;!function(t){t.Profi="profi",t.Expert="expert",t.Intro="intro",t.Bonus="bonus"}(r||(r={}))},81608:function(t,n,e){"use strict";e.d(n,{Z:function(){return s}});var a=e(85893),r=(e(67294),e(94246)),o=e(58377);var s=function(t){const n=(0,o.Z)((()=>({})))(r.Z);return(0,a.jsx)(n,{...t})}},62704:function(t,n,e){"use strict";var a=e(27484),r=e.n(a),o=e(94712),s=e.n(o),i=e(10285),c=e.n(i),u=e(1646),l=e.n(u),d=e(66607),f=e.n(d),p=e(79212),m=e.n(p),h=e(15069),g=e.n(h),y=e(5459),_=e.n(y),v=e(29387),w=e.n(v),S=e(25757),I=e.n(S),E=e(70178),D=e.n(E),x=e(55183),C=e.n(x);e(70600);r().locale("ru"),r().extend(I()),r().extend(_()),r().extend(g()),r().extend(D()),r().extend(w()),r().extend(f()),r().extend(m()),r().extend(s()),r().extend(l()),r().extend(C()),r().extend(c()),n.Z=r()},98255:function(t,n){"use strict";n.Z=t=>{const n=document.cookie.match("\\b".concat(t,"=([^;]*)\\b"));return!!n&&n[1]}},82672:function(t,n,e){"use strict";var a=e(46375);n.Z=t=>t.reduce(((t,n)=>{const{tutorQualification:e,duration:r}=n;if(e!==a.m.Intro&&e!==a.m.Expert||e!==a.m.Expert){const a=n.subject+e+r.toString();t.includes(a)||t.push(a)}return t}),[])},41097:function(t,n){"use strict";n.Z=()=>!0},98455:function(t,n,e){"use strict";e.d(n,{$W:function(){return o},Aq:function(){return i},HE:function(){return r},KV:function(){return c},MS:function(){return s},XX:function(){return a}});const a=600,r=t=>400===t,o=t=>401===t,s=t=>403===t,i=t=>404===t,c=t=>t===a},63903:function(t,n,e){"use strict";e.d(n,{Rz:function(){return r},cX:function(){return o},tY:function(){return s}});var a=e(18705);const r=t=>t===a.Z.PUPIL,o=t=>t===a.Z.TUTOR,s=t=>t===a.Z.ADMIN},52361:function(){},94616:function(){},85811:function(){},62828:function(){}}]);
//# sourceMappingURL=8986-47944044e4f0f545.js.map