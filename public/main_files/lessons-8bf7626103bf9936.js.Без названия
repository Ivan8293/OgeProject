(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1027,3590],{3894:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lessons",function(){return a(55542)}])},12598:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(85893),o=a(11163),s=a(3850),i=a(67294),r=a(34067),l=a(63885),c=a(53626),d=a(56760),p=a(59466),m=a(21165),u=a(83992);var h=a(58919),x=a(43899);const b=(0,c.Z)((e=>({wrapper:{display:"flex",justifyContent:"space-between",width:"100%",paddingTop:12,[e.breakpoints.down("md")]:{paddingTop:8}},logo:{width:205,height:60,[e.breakpoints.down("md")]:{width:84,height:30}},uchiLogo:{width:205,height:60,[e.breakpoints.down("md")]:{width:"125px"}},logoutBtn:{[e.breakpoints.down("md")]:{fontSize:"12px","& > span":{marginLeft:"10px",padding:"5px 20px","& > svg":{fontSize:"20px !important"}}}}})));var g=e=>{let{showLogout:t=!1,isUchiRuPage:a=!1}=e;const c=b(),{t:g}=(0,s.$G)("common"),{asPath:f}=(0,o.useRouter)(),v=(0,d.Z)(),j=f.includes("self_appointment_to_attestation"),w=(0,l.Z)(v.breakpoints.down("md")),[k,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{window.document.location.href.includes("study/link_accounts/uchi_ru")&&(async()=>{const{experiment:e}=await(0,m.p5)();e.findIndex((e=>"uchi_doma"===e))>=0&&y(!0)})().catch(console.error)}),[]);return(0,n.jsxs)("div",{className:c.wrapper,children:[(0,n.jsx)("a",{href:"/",target:a&&"_blank",children:(0,n.jsx)(h.Z,{className:a?c.uchiLogo:c.logo,isShowUchiDomaLogo:k,size:w&&!a?"small":"default"})}),t&&(0,n.jsx)(r.Z,{variant:"outlined",color:"primary",endIcon:(0,n.jsx)(x.mrv,{}),onClick:async e=>{if(e.preventDefault(),j)try{await(async()=>(await u.hi.post("/api/v2/tutor_onboarding/skip_self_appointment_to_attestation")).data.payload)();(0,p.k)()}catch(e){console.log(e)}else(0,p.k)()},type:"submit",className:c.logoutBtn,children:g("logout")})]})}},42908:function(e,t,a){"use strict";a.d(t,{J:function(){return i},q:function(){return s}});var n=a(83992),o=a(59735);const s=async e=>{const{backendServer:t}=(0,o.zp)(e),a="".concat(t,"/links/").concat(e);try{const e=await n.hi.get(a,{withCredentials:!1});return 204===e.status?null:e.data}catch(e){return console.error(e),null}},i=async e=>{const{backendServer:t}=(0,o.zp)(e),a="".concat(t,"/links/").concat(e);try{return(await n.hi.post(a,void 0,{withCredentials:!1})).data}catch(e){return console.error(e),null}}},59735:function(e,t,a){"use strict";a.d(t,{zp:function(){return o}});const n=Number("3"),o=e=>{const t=window.location.href.includes("review"),a=t?"-":".";let o=[...e].reduce(((e,t)=>e+=t.charCodeAt(0)),0)%n||0;return t&&(o=0),{pdfServer:"".concat(window.location.protocol,"//pdf-excalidraw").concat(a).concat(window.location.host),roomServer:"".concat(window.location.protocol,"//room").concat(o,"-excalidraw").concat(a).concat(window.location.host),backendServer:"".concat(window.location.protocol,"//backend-excalidraw").concat(a).concat(window.location.host,"/api/v2")}}},86374:function(e,t,a){"use strict";var n;a.d(t,{V:function(){return n}}),function(e){e.EXCALIDRAW="excalidraw",e.ZITEBOARD="ziteboard"}(n||(n={}))},35578:function(e,t,a){"use strict";a.d(t,{Ts:function(){return n},jJ:function(){return s},t8:function(){return o}});const n="payment_success",o="current_order";var s;!function(e){e.SELF_SELECTION="SelfSelection",e.SELF_SELECTION_DONE="SelfSelectionDone",e.LESSON_LIST="LessonList"}(s||(s={}))},32631:function(e,t,a){"use strict";a.d(t,{Z:function(){return k}});var n=a(85893),o=a(11163),s=(a(26747),a(67294)),i=a(2664),r=a(53626),l=(a(62219),a(87547),a(60528),a(45725),a(36716));const c="link_accounts",d="sign";var p=a(21152),m=a(53135),u=(a(54587),a(90557)),h=(a(74476),a(44879)),x=(a(96887),a(87829)),b=(a(28791),a(57957)),g=a(51153),f=a(56520),v=(a(72567),a(82672),a(12598));const j=(0,r.Z)((e=>({wrapper:{height:"100%",display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"1fr auto",gridTemplateAreas:'"sidebar main" "sidebar footer"',direction:e.direction},sidebar:{gridArea:"sidebar",boxSizing:"border-box",justifySelf:"start",[e.breakpoints.down("md")]:{width:h.vg.sm},[e.breakpoints.between("md","lg")]:{width:h.vg.md},[e.breakpoints.between("lg","xl")]:{width:h.vg.lg},[e.breakpoints.up("xl")]:{width:h.vg.xl}},content:{gridArea:"main",boxSizing:"border-box",justifySelf:"center"},contentLimitedWidth:{[e.breakpoints.down("md")]:{width:h.MP.sm},[e.breakpoints.between("md","lg")]:{width:h.MP.md,padding:"0 32px"},[e.breakpoints.between("lg","xl")]:{width:h.MP.lg,padding:"0 36px"},[e.breakpoints.up("xl")]:{width:h.MP.xl,padding:"0 36px"}},contentFullWidth:{width:"100%"},shield:{gridArea:"banner",width:"100%"},wrapperForUchiRuPage:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"stretch",maxWidth:1440,margin:"0 auto",padding:"0 80px",[e.breakpoints.between("lg","md")]:{padding:"0 48px"},[e.breakpoints.down("md")]:{padding:"0 17px"}},mainForUchiRuPage:{flexGrow:1}}))),w={isFooterVisible:!0,isMainFullWidth:!1};function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return a=>{const r=j(),h=(0,o.useRouter)(),{pathname:w}=h,[k,y]=(0,s.useState)(!0),{isFooterVisible:N,isMainFullWidth:C}=t,S=C?r.contentFullWidth:r.contentLimitedWidth;return(0,s.useEffect)((()=>{var e,t,a;null===(a=window)||void 0===a||null===(t=a.flocktory)||void 0===t||null===(e=t.reInit)||void 0===e||e.call(t);sessionStorage.getItem(d)&&w.includes(c)&&y(!1)}),[]),(0,n.jsx)(n.Fragment,{children:k?(0,n.jsxs)(i.zt,{store:(0,l.ZP)(a.initialStore),children:[(0,n.jsx)(g.Z,{}),(0,n.jsxs)("div",{className:r.wrapper,children:[(0,n.jsx)("div",{className:r.sidebar,children:(0,n.jsx)(m.Z,{})}),(0,n.jsxs)("main",{className:"".concat(r.content," ").concat(S),children:[(0,n.jsx)(u.Z,{isParentFullWidth:C}),(0,n.jsx)(x.Z,{position:b.Ly.TOP}),(0,n.jsx)(e,{...a}),(0,n.jsx)(x.Z,{position:b.Ly.BOTTOM})]}),N&&(0,n.jsx)(p.Z,{})]}),(0,n.jsx)(f.Z,{})]}):(0,n.jsx)(i.zt,{store:(0,l.ZP)(a.initialStore),children:(0,n.jsxs)("div",{className:r.wrapperForUchiRuPage,children:[(0,n.jsx)(v.Z,{showLogout:!0,isUchiRuPage:!0}),(0,n.jsx)("div",{className:r.mainForUchiRuPage,children:(0,n.jsx)(e,{...a})})]})})})}}},21082:function(e,t,a){"use strict";var n=a(62704);t.Z=e=>{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,a=n.Z.tz&&n.Z.tz.guess();let o,s="";return!(new Date).getTimezoneOffset()||t!==a?(o=n.Z.utc(e,"YYYY-MM-DD HH:mm").tz("Europe/Moscow"),s="(GMT+3:00, МСК)"):o=n.Z.utc(e,"YYYY-MM-DD HH:mm").local(),{dateTime:o,offset:s}}},93389:function(e,t,a){"use strict";a.d(t,{Z:function(){return n.ZP}});var n=a(87017)},7463:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(85893),o=a(67294),s=a(29742);let i,r=!1,l=!1;function c(e,t){return(0,o.forwardRef)(((a,c)=>{const[d,p]=(0,o.useState)(""),[m,u]=(0,o.useState)(!1);let h;const x=e=>{27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),b()),h&&h(e)},b=()=>{a.onClose&&a.onClose(),i&&i(),u(!1),document.body.onkeydown=h};return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(s.Z,{isOpen:m,onClose:b,className:t||"",closeOutside:r,shouldCloseOnOverlayClick:l,children:d}),(0,n.jsx)(e,{...a,ref:c,openModal:(e,t,a,n)=>{p(e),u(!0),h=document.body.onkeydown,document.body.onkeydown=x,i=t,r=a,l=n},closeModal:b})]})}))}},77445:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(85893),o=a(67294),s=a(73935),i=a(76743),r=a(46738),l=a.n(r);a(32595);const c=new(l())("modal-popup");class d extends o.PureComponent{render(){const{isOpen:e,children:t,className:a,closeOutside:o=!1,overlayRef:r,onScroll:l,onClose:d,sharpEdged:p=!1}=this.props,m="".concat(c.name()," ").concat(a||""),u=l&&r?()=>l(r):()=>{},h=(0,n.jsx)(i.Z,{in:e,timeout:750,classNames:c.name(),unmountOnExit:!0,nodeRef:this.nodeRef,children:(0,n.jsx)("div",{ref:this.nodeRef,children:(0,n.jsxs)("div",{className:m,ref:r||null,onScroll:u,onClick:this.handleClickOutside,children:[o&&(0,n.jsx)("div",{className:c.elem("close"),onClick:this.close,children:"Закрыть"}),(0,n.jsxs)("div",{className:c.elem("content","".concat(p?"sharp-edged":"")),ref:this.getContentRef(),children:[!o&&d&&(0,n.jsx)("div",{className:c.elem("close"),onClick:this.close,children:"Закрыть"}),t]})]})})});return s.createPortal(h,document.body)}constructor(...e){super(...e),this.contentRef=o.createRef(),this.nodeRef=o.createRef(),this.handleClickOutside=e=>{const{shouldCloseOnOverlayClick:t,isOpen:a}=this.props,n=this.getContentRef();t&&a&&n&&!n.current.contains(e.target)&&this.close()},this.close=()=>{const{onClose:e}=this.props;e&&e()},this.getContentRef=()=>{const{contentRef:e}=this.props;return e||this.contentRef}}}},29742:function(e,t,a){"use strict";a.d(t,{Z:function(){return n.Z}});var n=a(77445)},55542:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return ka},default:function(){return ya}});var n=a(32631),o=a(85893),s=a(67294),i=a(2664),r=a(87184),l=a(11163),c=a(3850),d=a(94246),p=a(64864),m=a(34067),u=a(34934),h=a(63885),x=a(53626),b=a(56760),g=a(27484),f=a.n(g),v=a(14890),j=a(12743),w=a(7463),k=a(62704);var y=e=>{let{type:t,title:a,text:n="",onClose:s}=e;const i=(e=>(0,x.Z)((t=>({title:{margin:"20px auto 0",color:"success"===e?t.palette.primary.main:t.palette.error.main},text:{marginTop:10},wrap:{textAlign:"center"},closeButton:{marginTop:15}}))))(t)(),{t:r}=(0,c.$G)("components.pupil-schedule-actions");return(0,o.jsxs)("div",{className:i.wrap,children:[(0,o.jsx)(d.Z,{className:i.title,variant:"h4",children:a}),n&&(0,o.jsx)(d.Z,{className:i.text,variant:"body1",children:n}),(0,o.jsx)(m.Z,{className:i.closeButton,onClick:s,children:r("close")})]})},N=a(86802);var C=(e,t)=>t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]];const S=(e,t)=>e.filter((e=>t.some((t=>{let{id:a,subject:n}=t;const o=(0,k.Z)(e.startTime*N.default.MS_IN_SECOND).isBefore((0,k.Z)());return e.tutorId===a&&e.subject===n&&!o})))).sort(((e,t)=>e.startTime-t.startTime))[0],Z=(e,t,a,n)=>{const o=(0,k.Z)(e.startTime*N.default.MS_IN_SECOND),s=o.diff((0,k.Z)(),"m"),i=Math.floor(s/N.default.MINUTES_IN_HOUR),r=Math.floor(s%N.default.MINUTES_IN_HOUR);return{showAlert:i<8&&o.isSameOrAfter(t,"day"),text:i<1?"".concat(r," ").concat(C(r,a)):"".concat(i," ").concat(C(i,n),"\n          ").concat(r," ").concat(C(r,a))}};var T=a(80766),_=a(72984),I=a(80646),L=a(50280),B=a(37598),D=a(43899),R=a(60504),M=a(3859),A=a(6799),W=a(72418),P=a(42179),z=a(5307),O=a(51806),F=a(33367);var E=e=>{let{open:t,onDrawerClose:a,position:n="bottom",closeIcon:s=!0,children:i}=e;const r=(0,b.Z)(),l=(e=>(0,x.Z)((t=>({drawer:{"&>.MuiPaper-root":{width:"100%",maxHeight:"90%",top:"auto",bottom:0,backgroundColor:t.palette.background.default,borderRadius:"20px 20px 0 0",padding:e?10:"20px 28px"}},header:{width:"100%",textAlign:"right","& svg":{color:t.palette.action.disabled}}}))))((0,h.Z)(r.breakpoints.down("md")))();return(0,o.jsxs)(O.Z,{className:l.drawer,anchor:n,open:t,onClose:a,onOpen:()=>{},children:[s&&(0,o.jsx)("div",{className:l.header,children:(0,o.jsx)(F.Z,{onClick:a,children:(0,o.jsx)(D.Two,{})})}),i]})};const H=(0,x.Z)((()=>({main:{display:"flex",flexDirection:"column",height:"100%"},mainContent:{flexGrow:1,alignItems:"end",display:"flex",width:"100%"},topControlsForSelect:{display:"flex",justifyContent:"space-between",paddingBottom:10,marginTop:25},topControl:{fontSize:"13px",padding:"5px 15px",textTransform:"inherit",letterSpacing:"1px"}})));var G=e=>{let{open:t,position:a,onDrawerClose:n,onSelectBtnClick:s,children:i,disabled:r=!1}=e;const l=H(),{t:d}=(0,c.$G)("components.pupil-schedule-actions");return(0,o.jsx)(E,{open:t,position:a,closeIcon:!1,onDrawerClose:n,children:(0,o.jsxs)("div",{className:l.main,children:[(0,o.jsx)("div",{className:l.mainContent,children:i}),(0,o.jsxs)("div",{className:l.topControlsForSelect,children:[(0,o.jsx)(m.Z,{className:l.topControl,variant:"text",size:"small",startIcon:(0,o.jsx)(D.Y4O,{}),onClick:n,children:d("cancel")}),(0,o.jsx)(m.Z,{className:l.topControl,size:"small",disabled:r,onClick:s,children:d("chose")})]})]})})};const Y=(0,x.Z)((e=>({selectControl:{marginTop:20,"& .MuiFilledInput-root":{borderRadius:16,border:"1px solid #b8b8b8",backgroundColor:e.palette.background.paper},"& .MuiSelect-select":{paddingLeft:20},"& .MuiInputLabel-formControl":{zIndex:5,left:16,top:4,...e.typography.caption,color:e.palette.action.active},"& .MuiInputLabel-shrink":{transform:"scale(1)"},"& .MuiSelect-icon":{right:14,transform:"scale(1.25)"}},selectElementMobile:{position:"relative",width:"100%",marginBottom:15,padding:"15px 50px 15px 20px",borderRadius:16,border:"1px solid #ececec",boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)",backgroundColor:e.palette.background.paper,cursor:"pointer","&::before":{content:'""',position:"absolute",right:20,top:"calc(50% - 5px)",display:"block",width:10,height:10,borderRight:"2px solid ".concat(e.palette.primary.main),borderTop:"2px solid ".concat(e.palette.primary.main),transform:"rotate(45deg)"}},radioGroupWrap:{width:"100%","& .MuiFormControlLabel-root":{marginRight:0},display:"flex"},radioGroup:{width:"100%",marginLeft:0,backgroundColor:e.palette.background.paper,borderRadius:16,boxShadow:"0 0 3px rgba(18, 17, 32, 0.05)",border:"1px solid #ececec","& label:last-child":{borderBottom:"none"}},titleMobile:{maxWidth:"80%",margin:"26px auto",textAlign:"center",color:e.palette.warning.contrastText},radioBtn:{padding:6},label:{padding:"14px 23px",marginLeft:0,borderBottom:"1px solid #dcdcdc",transition:"background-color 0.3s ease-in-out"},labelActive:{backgroundColor:"#F6F4FD"},mobileMain:{width:"100%"}})));let $="";var V=e=>{let{value:t,options:a,onChange:n,name:i,title:r}=e;const l=Y(),p=(0,b.Z)(),{t:m}=(0,c.$G)("components.pupil-schedule-actions"),u=(0,h.Z)(p.breakpoints.down("md")),[x,g]=(0,s.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G,{open:x&&u,position:"right",onSelectBtnClick:()=>g(!1),onDrawerClose:()=>{g(!1),$!==t&&n({target:{name:i,value:$}})},children:(0,o.jsxs)("div",{className:l.mobileMain,children:[(0,o.jsx)(d.Z,{className:l.titleMobile,variant:"h5",children:r}),(0,o.jsx)("div",{className:l.radioGroupWrap,children:(0,o.jsx)(R.Z,{className:l.radioGroup,value:t,name:i,children:a.map((e=>{let{value:a,label:s}=e;return(0,o.jsx)(_.Z,{value:a,className:"".concat(l.label," ").concat(t===a?l.labelActive:""),control:(0,o.jsx)(M.Z,{className:l.radioBtn,color:"primary"}),label:(0,o.jsx)(d.Z,{variant:"subtitle2",children:s}),onChange:n},a)}))})})]})}),u?(0,o.jsx)("div",{className:l.selectElementMobile,onClick:()=>{u&&($=t),g(!0)},role:"presentation",children:(0,o.jsx)(d.Z,{variant:"subtitle2",children:t})}):(0,o.jsxs)(A.Z,{className:l.selectControl,fullWidth:!0,children:[(0,o.jsx)(W.Z,{id:"lesson-in-week",children:"".concat(m("select_count_lessons_in_week"),":")}),(0,o.jsx)(P.Z,{labelId:"lesson-in-week",variant:"filled",value:t,name:"lessonsInWeek",onChange:n,children:a.map((e=>{let{label:t,value:a}=e;return(0,o.jsx)(z.Z,{value:a,children:t},a)}))})]})]})},K=a(88309),U=a(5344),J=a(97078),q=a(23926),X=a(53875),Q=a(39629);let ee;const te=e=>{let{value:t,onChange:a,externalClass:n,newTutor:i=!1,minDate:r=new Date}=e;const[l,p]=(0,s.useState)(!1),m=(e=>(0,x.Z)((t=>({main:{width:"100%"},selectDate:{position:"relative"},dateFieldView:{backgroundColor:t.palette.background.paper,border:e?"1px solid ".concat(t.palette.primary.main):"1px solid #b8b8b8",borderRadius:"16px",padding:"8px 20px",cursor:"pointer",transition:"border 0.1s ease-in-out",boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)",position:"relative","&::before":{content:'""',position:"absolute",right:18,top:"calc(50% - 6px)",display:"block",width:10,height:10,borderRight:"2px solid #6a708b",borderTop:"2px solid #6a708b",transform:e?"rotate(-45deg)":"rotate(135deg)"},[t.breakpoints.down("md")]:{padding:"14px 20px",boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)",position:"relative",border:"1px solid #ececec","&::before":{content:'""',position:"absolute",right:20,top:"calc(50% - 6px)",display:"block",width:10,height:10,borderRight:"2px solid ".concat(t.palette.primary.main),borderTop:"2px solid ".concat(t.palette.primary.main),transform:"rotate(45deg)"}}},dateLabel:{color:t.palette.action.active},datePicker:{position:"absolute",top:75,left:0,width:"100%",zIndex:10,border:"1px solid ".concat(t.palette.primary.main),borderRadius:"16px",transition:"border 0.1s ease-in-out",boxShadow:"0 0 3px rgba(18, 17, 32, 0.05)","& .MuiPickersDay-root.Mui-selected":{backgroundColor:t.palette.primary.main,"&:hover":{backgroundColor:t.palette.primary.main},"&:focus":{backgroundColor:t.palette.primary.main}},"& > div":{borderRadius:"16px",[t.breakpoints.down("md")]:{minWidth:300,"& .css-epd502, & .css-169iwlq-MuiCalendarPicker-root":{width:300}}},"& .PrivatePickersYear-root .Mui-selected":{backgroundColor:t.palette.primary.main},[t.breakpoints.down("md")]:{position:"relative",border:"none",top:"auto",left:"auto"}},dateDefaultValue:{color:"#b8b8b8"},titleMobile:{margin:"26px 0",textAlign:"center"}}))))(l)(),u=(0,b.Z)(),g=(0,h.Z)(u.breakpoints.down("md")),{t:f}=(0,c.$G)("components.pupil-schedule-actions"),v=()=>(0,o.jsx)("div",{className:m.datePicker,children:(0,o.jsx)(U.Z,{dateAdapter:K.Z,locale:Q.Z,children:(0,o.jsx)(J.Z,{value:t,onChange:a,showToolbar:!1,renderInput:e=>(0,o.jsx)(X.Z,{...e}),minDate:r})})});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G,{open:l&&g,position:"right",onSelectBtnClick:()=>p(!1),onDrawerClose:()=>{p(!1),ee!==t&&a(ee)},children:(0,o.jsxs)("div",{className:m.main,children:[(0,o.jsx)(d.Z,{className:m.titleMobile,variant:"h5",children:f("select_start_educating_date")}),v()]})}),(0,o.jsx)(q.Z,{onClickAway:()=>{g||p(!1)},children:(0,o.jsxs)("div",{className:"".concat(m.selectDate," ").concat(n),children:[(0,o.jsxs)("div",{className:m.dateFieldView,role:"presentation",onClick:()=>{g&&(ee=t),p((e=>!e))},children:[!g&&(0,o.jsx)(d.Z,{className:m.dateLabel,variant:"caption",children:f(i?"start_educating_date_new_tutor":"start_educating_date")}),t?(0,o.jsx)(d.Z,{variant:"subtitle2",children:(0,k.Z)(t).format("D MMMM YYYY")}):(0,o.jsx)(d.Z,{className:m.dateDefaultValue,variant:"subtitle2",children:f("select_date")})]}),l&&!g&&v()]})})]})};var ae=(0,s.memo)(te),ne=a(29523);let oe;const se=e=>{let{listTutorsAndSubjects:t,setTutorsAndSubjects:a,isSubjectMain:n=!1,externalClass:i="",subjectNames:r}=e;const l=t.filter((e=>e.isChecked)),p=l.length,m=(e=>(0,x.Z)((t=>({main:{width:"100%"},selectTutorWrap:{position:"relative",width:342,[t.breakpoints.down("md")]:{width:"100%"}},selectTutor:{position:"relative",padding:"9px 40px 7px 18px",border:"1px solid #b8b8b8",borderRadius:"16px",backgroundColor:t.palette.background.paper,userSelect:"none",cursor:"pointer","&:focus-visible":{outlineColor:t.palette.primary.main,outlineWidth:"1px"},"&:focus":{outline:"none"},"&::before":{content:'""',position:"absolute",right:20,top:"calc(50% - 6px)",display:"block",width:10,height:10,borderRight:"2px solid ".concat(t.palette.text.primary),borderTop:"2px solid ".concat(t.palette.text.primary),transform:"rotate(135deg)",transition:"transform 0.2s ease-in-out",[t.breakpoints.down("md")]:{top:"calc(50% - 5px)",borderRight:"2px solid ".concat(t.palette.primary.main),borderTop:"2px solid ".concat(t.palette.primary.main),transform:"rotate(45deg)"}},[t.breakpoints.down("md")]:{border:"1px solid #ececec",boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)"}},selectInnerWrap:{display:"flex",alignItems:"center"},selectTutorOpen:{border:"1px solid ".concat(t.palette.primary.main),transition:"border 0.1s ease-in-out","&::before":{top:"50%",transform:"rotate(315deg)"}},avatar:{width:48,height:48,marginRight:14,border:"1px solid ".concat(t.palette.background.paper)},shiftAvatar:{marginLeft:"-".concat(5*e,"px"),"&:first-of-type":{marginLeft:0}},fixedAvatarShift:{marginLeft:"-".concat(30,"px"),"&:first-of-type":{marginLeft:0}},tutorName:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},greyText:{color:t.palette.action.active},tutorNameWrap:{width:"90%",overflow:"hidden"},defaultTextForSelect:{color:"#b8b8b8"},listTutors:{position:"absolute",top:75,left:0,listStyle:"none",paddingLeft:0,margin:0,backgroundColor:t.palette.background.paper,borderRadius:"16px",width:"100%",maxHeight:222,overflowX:"hidden",overflowY:"auto",boxShadow:"0 0 3px rgba(18, 17, 32, 0.05)",zIndex:10,"& li:last-child":{borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px"},"& li:first-of-type":{borderTopLeftRadius:"16px",borderTopRightRadius:"16px"},[t.breakpoints.down("md")]:{position:"relative",top:"auto",left:"auto",maxHeight:"100%",border:"none"}},tutorItem:{display:"flex",padding:"11px 21px 13px",cursor:"pointer",userSelect:"none",border:"1px solid ".concat(t.palette.action.selected),transition:"background-color 0.3s ease-in-out"},tutorActiveItem:{backgroundColor:"#F6F4FD"},tutorCheckbox:{padding:0,marginRight:20},counter:{width:50,textAlign:"center",color:t.palette.action.active,padding:"5px 2px",borderRadius:"8px",backgroundColor:"#f1f1f1"},titleMobile:{margin:"26px 0",textAlign:"center"},subject:{"&:first-letter":{textTransform:"uppercase"}}}))))(p)(),u=(0,b.Z)(),g=(0,h.Z)(u.breakpoints.down("md")),{t:f}=(0,c.$G)("components.pupil-schedule-actions"),[v,j]=(0,s.useState)(!1),w=e=>{let{name:t="",middleName:a="",subject:s}=e;return n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{className:"".concat(m.tutorName," ").concat(m.greyText),variant:"caption",children:"".concat(t," ").concat(a)}),(0,o.jsx)(d.Z,{className:m.subject,variant:"subtitle2",children:r[s]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{className:"".concat(m.subject," ").concat(m.greyText),variant:"caption",children:r[s]}),(0,o.jsx)(d.Z,{className:m.tutorName,variant:"subtitle2",children:"".concat(t," ").concat(a)})]})},k=()=>(0,o.jsx)("ul",{className:m.listTutors,children:t.map((e=>{let{id:n,name:s,middleName:i,subject:r,avatarLink:l,isChecked:c}=e;return(0,o.jsxs)("li",{className:"".concat(m.tutorItem," ").concat(c?m.tutorActiveItem:""),role:"presentation",onClick:()=>((e,n)=>{const o=t.map((t=>{const a={...t};return a.id===e&&a.subject===n&&(a.isChecked=!a.isChecked),a}));a(o)})(n,r),children:[(0,o.jsx)(I.Z,{className:m.tutorCheckbox,color:"primary",checked:c}),(0,o.jsx)(ne.Z,{className:m.avatar,src:l}),(0,o.jsx)("div",{className:m.tutorNameWrap,children:w({name:s,middleName:i,subject:r})})]},n+r)}))});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G,{open:v&&g,position:"right",onSelectBtnClick:()=>j(!1),onDrawerClose:()=>{j(!1);oe&&JSON.stringify(oe)!==JSON.stringify(t)&&a(oe)},children:(0,o.jsxs)("div",{className:m.main,children:[(0,o.jsx)(d.Z,{className:m.titleMobile,variant:"h5",children:f("chose_subject_and_tutor")}),k()]})}),(0,o.jsx)(q.Z,{onClickAway:()=>{g||j(!1)},children:(0,o.jsxs)("div",{className:"".concat(m.selectTutorWrap," ").concat(i),children:[(0,o.jsx)("div",{className:"".concat(m.selectTutor," ").concat(v?m.selectTutorOpen:""),role:"presentation",onClick:()=>{g&&(oe=[...t]),j((e=>!e))},onKeyPress:()=>{j(!v)},tabIndex:0,children:(()=>{switch(!0){case 1===p:return(0,o.jsxs)("div",{className:m.selectInnerWrap,children:[(0,o.jsx)(ne.Z,{className:m.avatar,src:l[0].avatarLink,userId:l[0].id}),(0,o.jsx)("div",{className:m.tutorNameWrap,children:w(l[0])})]});case p>1&&p<5:return(0,o.jsx)("div",{className:m.selectInnerWrap,children:l.map((e=>{let{avatarLink:t,id:a,subject:n}=e;return(0,o.jsx)(ne.Z,{className:m.avatar,src:t,userId:a},"".concat(a).concat(n))}))});case p>=5&&p<7:return(0,o.jsx)("div",{className:m.selectInnerWrap,children:l.map((e=>{let{avatarLink:t,id:a,subject:n}=e;return(0,o.jsx)(ne.Z,{className:"".concat(m.avatar," ").concat(m.shiftAvatar),src:t,userId:a},"".concat(a).concat(n))}))});case p>6:return(0,o.jsxs)("div",{className:m.selectInnerWrap,children:[l.slice(0,6).map((e=>{let{avatarLink:t,id:a,subject:n}=e;return(0,o.jsx)(ne.Z,{className:"".concat(m.avatar," ").concat(m.fixedAvatarShift),src:t,userId:a},"".concat(a).concat(n))})),(0,o.jsx)(d.Z,{className:m.counter,variant:"caption",children:"+".concat(p-6)})]});default:return(0,o.jsxs)("div",{className:m.selectInnerWrap,children:[(0,o.jsx)(ne.Z,{className:m.avatar,isGray:!0}),(0,o.jsx)(d.Z,{className:m.defaultTextForSelect,variant:"subtitle2",children:f("chose")})]})}})()}),v&&!g&&k()]})})]})};var ie=(0,s.memo)(se),re=a(83525),le=a(60891),ce=a(78729);const de=e=>e.map((e=>{let{id:t,intervals:a}=e;return[t,(a.length>1?[...a].sort(((e,t)=>e-t)).reduce(((e,t,a,n)=>t-1===n[a-1]?t+1===n[a+1]?"".concat(e):"".concat(e,"-").concat(t+1):e?"".concat(e,", ").concat(t):"".concat(t)),""):String(a[0])).split(",").map((e=>{const t=e.trim();if(t.indexOf("-")>0){const e=t.split("-"),a=Number(e[0])>9?"".concat(e[0],":00"):"0".concat(e[0],":00"),n=Number(e[1])>9?"".concat(e[1],":00"):"0".concat(e[1],":00");return"".concat(a,"-").concat(n)}const a=Number(e);return a>9?"".concat(a,":00-").concat(a+1,":00"):"0".concat(a,":00-").concat(a+1>9?a+1:"0".concat(a+1),":00")}))]})),pe=Array(24).fill("").map(((e,t)=>t)),me=Array(15).fill("").map(((e,t)=>t+7)),ue=[...pe,pe.length],he=[...me,me.length+7],xe=[11,12,13,14],be=(0,x.Z)((e=>({main:{width:540,height:"fit-content",padding:"20px 24px 24px",border:"1px solid ".concat(e.palette.action.selected),[e.breakpoints.down("md")]:{width:"100%"}},subtitle:{display:"block",marginTop:8,marginBottom:24,color:e.palette.action.active},daysList:{listStyle:"none",display:"flex",paddingLeft:0,margin:0,"& li:last-child":{marginRight:0},[e.breakpoints.down("md")]:{flexWrap:"wrap"}},label:{margin:0,"& .MuiCheckbox-root":{padding:"0 9px 0 0"},"& .MuiFormControlLabel-label":{...e.typography.caption}},daysItem:{marginRight:27,[e.breakpoints.down("lg")]:{marginBottom:16}},buttonsBlock:{display:"flex",justifyContent:"space-between",marginTop:20},daySubtitle:{display:"block",marginTop:8,marginBottom:30,color:e.palette.action.active,userSelect:"none"},dayTitle:{userSelect:"none"},intervalsBlock:{display:"flex",width:"fit-content",border:"1px solid #b8b8b8",borderRadius:"8px","& div:first-of-type":{borderRadius:"8px 0 0 8px"},"& div:last-child":{borderRight:"none",borderRadius:"0 8px 8px 0"}},slot:{position:"relative",width:31,height:31,borderRight:"1px solid #b8b8b8",cursor:"pointer",[e.breakpoints.down("md")]:{width:36,height:36}},popularSlot:{backgroundColor:"rgba(76, 175, 80, 0.08)"},selectedSlot:{backgroundColor:e.palette.primary.main,"&::before":{content:'""',top:5,left:11,position:"absolute",display:"block",width:10,height:16,borderRight:"3px solid ".concat(e.palette.background.paper),borderBottom:"3px solid ".concat(e.palette.background.paper),transform:"rotate(45deg)",[e.breakpoints.down("md")]:{top:8,left:13}}},listIntervals:{display:"flex"},hourNumber:{width:30,height:30,...e.typography.body2,[e.breakpoints.down("md")]:{width:36,height:36}},resultItem:{display:"flex",alignItems:"center"},resultIntervals:{display:"flex",alignItems:"center",flexWrap:"wrap"},resultInterval:{padding:8,marginRight:8,marginBottom:8,borderRadius:"24px",backgroundColor:"#faf6fe",...e.typography.h6,fontWeight:700},resultDay:{paddingBottom:8,marginRight:16,color:e.palette.action.active},tooltip:{"& .MuiTooltip-tooltip":{maxWidth:330,padding:"12px 18px",border:"1px solid ".concat(e.palette.action.selected),borderRadius:"8px",backgroundColor:e.palette.background.paper},"& .MuiTooltip-tooltipPlacementTop":{backgroundColor:e.palette.background.paper},"& .MuiTooltip-arrow":{color:e.palette.background.paper,"&::before":{border:"1px solid ".concat(e.palette.action.selected)}}},tooltipTitle:{color:e.palette.action.active},selectElementMobile:{position:"relative",width:"100%",marginBottom:15,padding:"15px 50px 15px 20px",borderRadius:16,border:"1px solid #ececec",boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)",backgroundColor:e.palette.background.paper,cursor:"pointer","&::before":{content:'""',position:"absolute",right:20,top:"calc(50% - 5px)",display:"block",width:10,height:10,borderRight:"2px solid ".concat(e.palette.primary.main),borderTop:"2px solid ".concat(e.palette.primary.main),transform:"rotate(45deg)"}},availableTimeLabel:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:"#b8b8b8"},selectLabelMobile:{color:e.palette.text.primary,userSelect:"none"},titleMobile:{margin:"26px 0",textAlign:"center"},mobileMain:{margin:"0 auto"}})));var ge=e=>{let{data:t,stage:a,dayIndex:n,listChosenDays:i,isMobileScheduleOpen:r,setIsMobileScheduleOpen:l,onChooseDayChange:p,onSlotMouseDown:u,onDrawerClose:x,onSelectScheduleClick:g,onSubmitClick:f}=e;const[v,j]=(0,s.useState)(!1),w=be(),{t:k}=(0,c.$G)("components.pupil-schedule-actions"),y=(0,b.Z)(),N=(0,h.Z)(y.breakpoints.down("md")),C=i[n];let S;if(i.length>0&&i.every((e=>e.intervals.length>0))){const e=de(i);S=((e,t)=>t.reduce(((t,a)=>{const n=Object.keys(e).find((t=>e[t].id===a[0]));return"".concat(t).concat(n,": ").concat(a[1].join(", ")," ")}),""))(t,e)}let Z=!1;if(1===a)Z=!Object.keys(t).some((e=>t[e].isChecked));else if(2===a){var T;Z=(null===(T=i[n])||void 0===T?void 0:T.intervals.length)<1}const L=(e,t,a)=>()=>a(e,t),B=(e,t,a)=>{const{id:n,intervals:s}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:w.intervalsBlock,children:t.map((e=>{const t=s.includes(e),a=xe.includes(e),i=t?w.selectedSlot:"";return a?(0,o.jsx)(le.Z,{title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{className:w.tooltipTitle,variant:"caption",children:k("hint")}),(0,o.jsx)(d.Z,{variant:"body1",children:k("take_most_popular_time")})]}),placement:"top",arrow:!0,classes:{popper:w.tooltip},enterDelay:300,children:(0,o.jsx)("div",{className:"".concat(w.slot," ").concat(w.popularSlot," ").concat(i),role:"presentation",onMouseDown:L(n,e,u),onDragStart:e=>e.preventDefault()})},e):(0,o.jsx)("div",{className:"".concat(w.slot," ").concat(i),role:"presentation",onMouseDown:L(n,e,u),onDragStart:e=>e.preventDefault()},e)}))}),(0,o.jsx)("div",{className:w.listIntervals,children:a.map((e=>(0,o.jsx)("div",{className:w.hourNumber,children:e},e)))})]})},R=()=>{return(0,o.jsxs)(ce.Z,{className:w.main,children:[1===a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{variant:"h5",children:k("select_week_day")}),(0,o.jsx)(d.Z,{className:w.subtitle,variant:"caption",children:k("select_few_convenient_day")}),(0,o.jsx)("ul",{className:w.daysList,children:Object.keys(t).map((e=>{const{id:a,isChecked:n}=t[e];return(0,o.jsx)("li",{className:w.daysItem,children:(0,o.jsx)(_.Z,{className:w.label,control:(0,o.jsx)(I.Z,{name:e,icon:(0,o.jsx)(D.PDu,{}),checkedIcon:(0,o.jsx)(D.u2v,{}),color:"primary",checked:n,onChange:p}),label:e})},a)}))})]}),2===a&&(0,o.jsxs)("div",{children:[(0,o.jsx)(d.Z,{className:w.dayTitle,variant:"h5",children:null==C?void 0:C.title}),(0,o.jsx)(d.Z,{className:w.daySubtitle,variant:"caption",children:k("select_few_convenient_interval")}),(e=C,v&&N?(0,o.jsxs)(o.Fragment,{children:[B(e,pe.slice(0,8),ue.slice(0,9)),B(e,pe.slice(8,16),ue.slice(8,17)),B(e,pe.slice(16),ue.slice(16))]}):N?(0,o.jsxs)(o.Fragment,{children:[B(e,pe.slice(7,15),ue.slice(7,16)),B(e,pe.slice(15,23),ue.slice(15,24))]}):v?(0,o.jsxs)(o.Fragment,{children:[B(e,pe.slice(0,12),ue.slice(0,13)),B(e,pe.slice(12),ue.slice(12))]}):B(e,me,he))]}),3===a&&(0,o.jsxs)("div",{children:[(0,o.jsx)(d.Z,{variant:"h5",children:k("your_convenient_time")}),(0,o.jsx)(d.Z,{className:w.daySubtitle,variant:"caption",children:k("check_correct_data")}),(0,o.jsx)("div",{children:de(i).map((e=>{const a=Object.keys(t).find((a=>t[a].id===e[0])),n=e[1];return(0,o.jsxs)("div",{className:w.resultItem,children:[(0,o.jsx)(d.Z,{className:w.resultDay,variant:"h6",children:a}),(0,o.jsx)("div",{className:w.resultIntervals,children:n.map((e=>(0,o.jsx)("div",{className:w.resultInterval,children:e},e)))})]})}))})]}),(0,o.jsxs)("div",{className:w.buttonsBlock,children:[(0,o.jsx)(m.Z,{variant:3===a?"outlined":"contained",size:"small",disabled:Z,onClick:f,children:k(3===a?"change":"next")}),2===a&&(0,o.jsx)(m.Z,{variant:"text",size:"small",onClick:()=>j(!v),children:k(v?"shorted_time":"show_full_day")})]})]});var e};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G,{open:r&&N,position:"right",onSelectBtnClick:()=>l(!1),onDrawerClose:x,disabled:3!==a,children:(0,o.jsxs)("div",{className:w.mobileMain,children:[(0,o.jsx)(d.Z,{className:w.titleMobile,variant:"h5",children:k("class_time")}),R()]})}),N?(0,o.jsx)("div",{className:w.selectElementMobile,onClick:g,role:"presentation",children:(0,o.jsx)(d.Z,{className:"".concat(w.availableTimeLabel," ").concat(S?w.selectLabelMobile:""),variant:"subtitle2",children:S||k("select_available_time")})}):R()]})};let fe;var ve=e=>{let{data:t,stage:a,onChooseDayChange:n,onDayIntervalChange:i,setScheduleStage:r,setFullSchedule:l}=e;const[c,d]=(0,s.useState)(0),[p,m]=(0,s.useState)(!1),u=(0,b.Z)(),x=(0,h.Z)(u.breakpoints.down("md")),g=Object.keys(t).reduce(((e,a)=>t[a].isChecked?[...e,t[a]]:e),[]);return(0,o.jsx)(ge,{data:t,stage:a,dayIndex:c,listChosenDays:g,isMobileScheduleOpen:p,setIsMobileScheduleOpen:m,onChooseDayChange:n,onSlotMouseDown:(e,t)=>{i(e,t)},onDrawerClose:()=>{m(!1),JSON.stringify(fe)!==JSON.stringify(t)&&(r(1),l(fe))},onSelectScheduleClick:()=>{x&&(fe=t),m(!0)},onSubmitClick:()=>{switch(a){case 1:r(a+1);break;case 2:c<g.length-1?d((e=>e+1)):r(a+1);break;case 3:r(1),d(0)}}})};var je=e=>{let{listTutorsAndSubjects:t,setListTutorsAndSubjectsData:a,availableTime:n,isFloatSchedule:s,lessonsInWeek:i,comment:r,commentForSupport:l,educationStartDate:p,scheduleStage:u,setEducationStartDate:g,setScheduleStage:f,onFieldChange:v,onCancelBtnClick:j,isSubmitBtnDisabled:w,isChosenTutor:k,setAvailableTime:y,isLoadError:N,subjectNames:C,onSubmitClick:S,onChooseDayChange:T,onDayIntervalChange:R,nextLesson:M,isCountOfLessonsMatchSlots:A}=e;const W=(e=>(0,x.Z)((t=>({changePage:{boxSizing:"border-box",paddingBottom:30,overflowY:"auto","&::-webkit-scrollbar":{display:"none"},"&::-moz-scrollbar":{display:"none",width:0,height:0}},title:{marginRight:43,[t.breakpoints.down("lg")]:{marginRight:0,marginBottom:26,fontSize:32},[t.breakpoints.down("md")]:{fontSize:18,marginBottom:35,width:"80%",textAlign:"center"}},titleWrap:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:32,[t.breakpoints.down("lg")]:{flexDirection:"column",marginBottom:28},[t.breakpoints.down("md")]:{marginBottom:18}},mainContentWrap:{display:"flex",justifyContent:"space-between",maxWidth:983,margin:"0 auto",[t.breakpoints.down("lg")]:{flexDirection:"column",alignItems:"center"}},fieldsWrap:{marginRight:10,[t.breakpoints.down("lg")]:{marginRight:0,marginBottom:20},[t.breakpoints.down("md")]:{width:"100%"}},textArea:{resize:"none",width:"100%",marginTop:22,padding:"10px 20px",border:"1px solid #b8b8b8",borderRadius:"16px",transition:"0.3s ease-in-out",...t.typography.body1,"&:focus-visible":{outline:"none",border:"1px solid ".concat(t.palette.primary.main)},"&::-webkit-input-placeholder":{color:"#b8b8b8",fontSize:16},"&::-moz-placeholder":{color:"#b8b8b8",fontSize:16},[t.breakpoints.down("md")]:{marginTop:0}},btnsBlock:{textAlign:"center",marginTop:70,[t.breakpoints.down("lg")]:{marginTop:40},[t.breakpoints.down("md")]:{marginTop:32}},submitBtn:{marginLeft:45,padding:"10px 16px",letterSpacing:"1px",textTransform:"inherit",[t.breakpoints.down("md")]:{width:"100%",marginLeft:0,marginTop:20}},cancelBtn:{fontSize:14,padding:"10px 16px",[t.breakpoints.down("md")]:{width:"100%"}},selectDateField:{maxHeight:64},fieldsColumnWrap:{width:342,position:"relative",[t.breakpoints.down("md")]:{width:"100%",marginBottom:22}},labelMobile:{width:"100%",paddingLeft:20,fontSize:13,marginBottom:11,color:t.palette.action.active},alert:{margin:"10px auto 20px",maxWidth:945},floatSchedule:{marginTop:10,marginLeft:0,"& .MuiFormControlLabel-label":{...t.typography.subtitle2},[t.breakpoints.down("md")]:{marginTop:"-10px",marginBottom:12}},disabled:{opacity:.5,pointerEvents:"none",[t.breakpoints.down("md")]:{display:"none"}},selectTutorWrap:{position:"relative",[t.breakpoints.down("md")]:{width:"100%"}},tutorsNotice:{position:"absolute",bottom:-25,left:20},startDateNotice:{position:"absolute",left:20,bottom:-20},lessonsInWeekNotice:{display:"block",margin:"5px 0 -14px 20px"},scheduleWrap:{position:"relative",height:"fit-content",[t.breakpoints.down("md")]:{width:"100%"}},scheduleNotice:{fontSize:12,marginLeft:17,marginTop:14,maxWidth:520,"& span":{color:e?"inherit":t.palette.error.main}}}))))(A)(),P=(0,b.Z)(),z=(0,h.Z)(P.breakpoints.down("md")),{t:O}=(0,c.$G)("components.pupil-schedule-actions"),F=!p&&k,E="1"===i;let H,G;if(M){const e=Z(M,p,O("list_minutes",{returnObjects:!0}),O("list_hours",{returnObjects:!0}));H=e.showAlert,G=e.text}return(0,o.jsxs)("div",{className:W.changePage,children:[N&&(0,o.jsx)(L.Z,{className:W.alert,severity:"error",children:O("load_error")}),H&&(0,o.jsx)(L.Z,{className:W.alert,severity:"warning",children:O("subtract_of_lesson",{time:G,text:O("change_schedule_text")})}),(0,o.jsxs)("div",{className:W.titleWrap,children:[(0,o.jsx)(d.Z,{className:W.title,variant:z?"h5":"h2",children:O("change_schedule")}),z&&(0,o.jsx)(d.Z,{className:W.labelMobile,variant:"h6",children:"".concat(O("chose_subject_and_tutor"),":")}),(0,o.jsxs)("div",{className:W.selectTutorWrap,children:[(0,o.jsx)(ie,{listTutorsAndSubjects:t,setTutorsAndSubjects:a,isSubjectMain:!0,subjectNames:C}),!k&&!z&&(0,o.jsx)(d.Z,{className:W.tutorsNotice,variant:"caption",color:"error",children:O("begin_select_tutor")})]})]}),(0,o.jsxs)("div",{className:"".concat(W.mainContentWrap," ").concat(k?"":W.disabled),children:[(0,o.jsxs)("div",{className:W.fieldsWrap,children:[(0,o.jsxs)("div",{className:W.fieldsColumnWrap,children:[z&&(0,o.jsx)(d.Z,{className:W.labelMobile,variant:"h6",children:"".concat(O("start_educating_date"),":")}),(0,o.jsx)(ae,{externalClass:W.selectDateField,value:p,onChange:g}),F&&(0,o.jsx)(d.Z,{className:W.startDateNotice,variant:"caption",color:"error",children:O("indicate_date")})]}),(0,o.jsxs)("div",{className:W.fieldsColumnWrap,children:[z&&(0,o.jsx)(d.Z,{className:W.labelMobile,variant:"h6",children:"".concat(O("number_of_lessons_in_week"),":")}),(0,o.jsx)(V,{value:i,options:re.h,onChange:v,name:"lessonsInWeek",title:"".concat(O("select_count_lessons_in_week"))}),E&&(0,o.jsx)(d.Z,{className:W.lessonsInWeekNotice,variant:"caption",color:"error",children:O("achievement_result_notice")})]}),(0,o.jsxs)("div",{className:W.fieldsColumnWrap,children:[z&&(0,o.jsx)(d.Z,{className:W.labelMobile,variant:"h6",children:"".concat(O("comment"),":")}),(0,o.jsx)(B.Z,{className:W.textArea,name:"comment",minRows:4,placeholder:O("comment_for_support"),value:r,onChange:v})]}),(0,o.jsx)(_.Z,{className:W.floatSchedule,control:(0,o.jsx)(I.Z,{name:"isFloatSchedule",icon:(0,o.jsx)(D.PDu,{}),checkedIcon:(0,o.jsx)(D.u2v,{}),color:"primary",onChange:v,checked:s}),label:O("float_schedule")}),s&&(0,o.jsx)("div",{className:W.fieldsColumnWrap,children:(0,o.jsx)(B.Z,{className:W.textArea,minRows:4,name:"commentForSupport",placeholder:O("describe_your_schedule"),value:l,onChange:v})})]}),z&&(0,o.jsx)(d.Z,{className:W.labelMobile,variant:"h6",children:"".concat(O("class_time"),":")}),(0,o.jsxs)("div",{className:W.scheduleWrap,children:[(0,o.jsx)(ve,{stage:u,data:n,onChooseDayChange:T,onDayIntervalChange:R,setFullSchedule:y,setScheduleStage:f}),(0,o.jsx)(d.Z,{className:W.scheduleNotice,variant:"subtitle2",children:(0,o.jsx)(c.cC,{t:O,i18nKey:"schedule_notice",components:{b:(0,o.jsx)("b",{}),span:(0,o.jsx)("span",{})}})})]})]}),(0,o.jsxs)("div",{className:W.btnsBlock,children:[(0,o.jsx)(m.Z,{className:W.cancelBtn,variant:"contained",size:"small",onClick:j,children:O("not_necessary")}),(0,o.jsx)(m.Z,{className:W.submitBtn,variant:z?"outlined":"text",size:"small",disabled:w||N,onClick:S,children:O("want_change_schedule")})]})]})};var we=(0,i.$j)((e=>{let{changeSchedule:t,userAppBar:a,sidebarSlice:n,lessonsListNew:o}=e;return{changeSchedule:t,pupilId:a.user.id,subjectNames:n.subjectNames,lessonsList:o.schedule.allLessons}}),(e=>(0,v.DE)({...T.Nw,getTutorsAndSubjects:T.cT},e)))((0,w.Z)((e=>{let{onClose:t,changeSchedule:a,setListTutorsAndSubjectsData:n,setDayForAvailableTime:i,setIntervalByDay:r,setEducationStartDate:l,setValueForField:d,setAvailableTime:p,resetChangeScheduleState:m,pupilId:u,getTutorsAndSubjects:h,subjectNames:x,setScheduleStage:b,openModal:g,closeModal:f,lessonsList:v}=e;const{listTutorsAndSubjects:w,availableTime:N,scheduleStage:C,educationStartDate:Z,isFloatSchedule:T,lessonsInWeek:_,isLoadError:I,comment:L,commentForSupport:B}=a,{t:D}=(0,c.$G)("components.pupil-schedule-actions"),[R,M]=(0,s.useState)(!0),[A,W]=(0,s.useState)(!0),P=w.filter((e=>e.isChecked)),z=P.length>0,O=Boolean(P.length)&&S(v,P);(0,s.useEffect)((()=>(h(u),window.location.hash="schedule&change",()=>{m(),window.location.hash="schedule"})),[]),(0,s.useEffect)((()=>{(()=>{const e=Object.keys(N).reduce(((e,t)=>{let a=e;return N[t].isChecked&&(a+=N[t].intervals.length),a}),0),t="Больше 7"===_?e>7:e>=Number(_);A!==t&&W(t);const a=Z&&_&&z&&3===C&&t;M(!(T?a&&B:a))})()}),[a]);return(0,o.jsx)(je,{listTutorsAndSubjects:w,setListTutorsAndSubjectsData:n,availableTime:N,educationStartDate:Z,scheduleStage:C,setScheduleStage:b,isFloatSchedule:T,lessonsInWeek:_,comment:L,commentForSupport:B,setEducationStartDate:l,setAvailableTime:p,onFieldChange:e=>{const{value:t,name:a}=e.target;d("isFloatSchedule"!==a?{name:a,value:t}:{name:a,value:!T})},isChosenTutor:z,onCancelBtnClick:()=>{t(),m()},isSubmitBtnDisabled:R,subjectNames:x,isLoadError:I,onSubmitClick:async()=>{const e=w.filter((e=>{let{isChecked:t}=e;return t})),t=e.reduce(((e,t)=>{let{id:a,subject:n}=t;return e[a]=e[a]?[...e[a],n]:[n],e}),{}),a=Object.keys(N).reduce(((e,t)=>N[t].isChecked?[...e,N[t]]:e),[]),n=((e,t)=>t.reduce(((t,a)=>(t[Object.keys(e).find((t=>e[t].id===a[0]))]=a[1].map((e=>e.split("-").map((e=>Number(e.split(":")[0]))))),t)),{}))(N,de(a)),s={event:"change_schedule",teacher_subject:t,count_less_week:_,date_start:(0,k.Z)(Z).format("DD.MM.YY"),comment:L,comment_for_support:B,pupil_time_study:n};M(!0);try{await(0,j.fJ)(s),g((0,o.jsx)(y,{type:"success",title:D("success_change_schedule_title"),text:D("success_change_schedule_text"),onClose:f}))}catch(e){g((0,o.jsx)(y,{type:"error",title:D("error_submit"),onClose:f})),M(!1)}},onChooseDayChange:e=>{const{name:t}=e.target;i(t)},onDayIntervalChange:(e,t)=>{const a=Object.keys(N).find((t=>N[t].id===e)),n=N[a];let o=[];o=(null==n?void 0:n.intervals.includes(t))?n.intervals.filter((e=>e!==t)):[...n.intervals,t],r({day:a,intervals:o})},nextLesson:O,isCountOfLessonsMatchSlots:A})}))),ke=a(93389),ye=a(19021);var Ne=()=>{const e=(0,b.Z)(),t=(0,h.Z)(e.breakpoints.down("md")),a=(e=>(0,x.Z)((()=>({title:{marginBottom:e?35:0,marginRight:e?0:25,fontFamily:e?"IBM Plex Sans, Arial, sans-serif":"Nunito, Arial, sans-serif",letterSpacing:e?.5:1.05}}))))(t)(),{t:n}=(0,c.$G)(["components.pupil-schedule-actions"]);return(0,o.jsx)(d.Z,{className:a.title,variant:t?"h5":"h2",children:n("replace_tutor")})},Ce=a(59505),Se=a(28054);var Ze={person:"person",reasons:"reasons",startDateEducation:"startDateEducation",intensity:"intensity",lessonsByPeriod:"lessonsByPeriod",days:"days",timeOfLessons:"timeOfLessons",comment:"comment",wishes:"wishes"};const Te=["Преподаватель не задает/не проверяет ДЗ","Непонятное объяснение материала","Нет прогресса в обучении / ухудшились оценки","Некорректное поведение","Недисциплинированность (отмены, опоздания и т.п.)","Плохое качество звука / видео"];var _e=e=>{let{isChosenTutor:t}=e;const{t:a}=(0,c.$G)(["components.change-tutor"]),n=(0,b.Z)(),r=(0,h.Z)(n.breakpoints.down("md")),l=(0,i.I0)(),p=(0,i.v9)(ye._6),m=(0,i.v9)(ye.H2),u=(0,i.v9)(ye.MV),g=(0,i.v9)(ye.lD),f=(e=>(0,x.Z)((t=>({reasons:{padding:20,paddingTop:0,[t.breakpoints.between("md","lg")]:{padding:15},[t.breakpoints.down("md")]:{padding:"0 5px"}},item:{[t.breakpoints.down("md")]:{margin:"20px 0"}},title:{marginBottom:20,marginLeft:e?12:0,marginTop:e?0:10,"&.MuiFormLabel-root &.MuiInputLabel-root":{display:"none"},fontSize:e?13:"auto",color:e?t.palette.action.active:"auto"},mobileReason:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,color:"grey",border:"1px solid #ececec",borderRadius:16,boxShadow:"0px 0px 3px rgba(18, 17, 32, 0.05)",cursor:"pointer","&:active":{opacity:.8}},commentMobile:{paddingLeft:12,paddingTop:24,paddingBottom:24,borderRadius:16},disabled:{opacity:.5,pointerEvents:"none"},noticeReason:{fontSize:12,marginTop:14,marginLeft:14,marginBottom:e?5:0,color:t.palette.error.main}}))))(r)(),v=(0,i.v9)(ye.n5)===Ze.reasons;(0,s.useEffect)((()=>{p||l((0,ye.dw)({type:"reasons",data:Te}))}),[]);const j=e=>{const{name:t}=e.target;l((0,ye.YK)({name:t}))},w=()=>{l((0,ye.cQ)()),l((0,ye.YK)({name:"newComment"}))},k=e=>{const{value:t}=e.target;l((0,ye.Oy)(t))},y=e=>(0,o.jsx)(_.Z,{className:f.item,control:(0,o.jsx)(I.Z,{icon:(0,o.jsx)(D.wc4,{}),checkedIcon:(0,o.jsx)(D.pEU,{}),name:e,onChange:j,checked:p&&p[e]}),label:e},e),N=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.Z,{control:(0,o.jsx)(I.Z,{icon:(0,o.jsx)(D.wc4,{}),checkedIcon:(0,o.jsx)(D.pEU,{}),checked:u,onChange:w}),label:a("reasons.comment"),id:"outlined-multiline-flexible"}),(0,o.jsx)(De,{disabled:!t,id:"comment",value:g,onChange:k,placeholder:a("reasons.comments")})]});if(!p)return null;const C=Object.keys(p).find((e=>p[e])),S=()=>t?C||u?u&&!(null==g?void 0:g.trim())?(0,o.jsx)(d.Z,{className:f.noticeReason,variant:"subtitle2",children:(0,o.jsx)(c.cC,{t:a,i18nKey:"schedule.noticeComment",components:{b:(0,o.jsx)("b",{})}})}):null:(0,o.jsx)(d.Z,{className:f.noticeReason,variant:"subtitle2",children:(0,o.jsx)(c.cC,{t:a,i18nKey:"schedule.noticeReason",components:{b:(0,o.jsx)("b",{})}})}):null;return(0,o.jsxs)("section",{className:"".concat(f.reasons," ").concat(t?"":f.disabled),children:[(0,o.jsx)(d.Z,{variant:r?"h6":"subtitle2",children:r?"":(()=>{const e=m.filter((e=>e.isChecked));if(!e.length)return"";if(e.length>1){const t=e.map((e=>" ".concat(e.name," ").concat(e.middleName||e.surname)));return"".concat(a("reasons.titleMany")," ").concat(t,".")}const t="female"===e[0].gender,n="".concat(e[0].name," ").concat(e[0].middleName||e[0].surname);return t?"".concat(a("reasons.titleFemale")," ").concat(n,"."):"".concat(a("reasons.titleMale")," ").concat(n,".")})()}),(0,o.jsx)(d.Z,{className:f.title,variant:r?"h6":"subtitle2",children:a("reasons.leaveCommentPlease")}),r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ee,{title:C||g||a("reasons.chooseReason"),onBtnClick:()=>{l((0,ye.Rc)(Ze.reasons))}}),(0,o.jsx)(Fe,{open:v,title:a("reasons.reasons"),children:(0,o.jsxs)("div",{children:[Object.keys(p).map((e=>(0,o.jsxs)(o.Fragment,{children:[y(e),(0,o.jsx)(Ce.Z,{})]}))),(0,o.jsx)("div",{className:f.commentMobile,children:N()})]})}),S()]}):(0,o.jsxs)(Se.Z,{children:[Object.keys(p).map((e=>y(e))),N(),S()]})]})};var Ie=e=>{let{onSubmitClick:t,onCancelBtnClick:a}=e;const{t:n}=(0,c.$G)(["components.change-tutor"]),r=(0,b.Z)(),l=(0,h.Z)(r.breakpoints.down("md")),[d,p]=(0,s.useState)(!1),u=(0,i.v9)(ye.gT),g=((e,t)=>(0,x.Z)((()=>({controls:{display:"flex",flexDirection:e?"column":"row",alignItems:"center",justifyContent:t?"space-between":"center",maxWidth:680,margin:"0 auto",marginTop:40,marginBottom:e?40:0,"&>button":{fontSize:14}},cancel:{marginBottom:e?30:0}}))))(l,u)();return(0,o.jsxs)("div",{className:g.controls,children:[(0,o.jsx)(m.Z,{fullWidth:l,className:g.cancel,onClick:a,children:n("confirmBtnControls.cancel")}),u&&(0,o.jsx)(m.Z,{variant:l?"outlined":"text",onClick:()=>{p(!0),t()},disabled:d,children:n("confirmBtnControls.confirm")})]})};var Le=e=>{let{selectData:t,disabled:a,action:n,initialSelector:s}=e;const r=(0,b.Z)(),l=(0,h.Z)(r.breakpoints.down("md")),c=(0,i.I0)(),p=(0,i.v9)(s),m=(e=>(0,x.Z)((t=>({title:{margin:10,marginLeft:33},select:{height:64,"&.Mui-disabled":{opacity:.5,backgroundColor:"transparent"},"&.MuiInputBase-root":{borderRadius:16,backgroundColor:"#fff",border:"1px solid #b8b8b8"}},selectValue:{display:"flex",marginTop:-20,paddingLeft:8,[t.breakpoints.down("md")]:{marginTop:-10}},label:{fontSize:11,color:t.palette.action.active},value:{fontSize:15,fontWeight:500,lineHeight:1.35,color:e?"#262626":"#000",[t.breakpoints.down("md")]:{fontWeight:"none"}}}))))(a)();return(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsx)(d.Z,{className:m.title,variant:"h6",color:"textSecondary",children:t.label}),(0,o.jsx)(P.Z,{className:m.select,disabled:a,fullWidth:!0,variant:"filled",labelId:"demo-simple-select-label",id:"select-name",onChange:e=>{c(n(e.target.value))},defaultValue:"default value",renderValue:()=>(0,o.jsx)("div",{className:m.selectValue,children:(0,o.jsxs)("article",{children:[!l&&(0,o.jsx)(d.Z,{className:m.label,variant:"caption",children:t.label}),(0,o.jsx)(d.Z,{className:m.value,variant:"subtitle2",children:p})]})}),IconComponent:l?D.LZ3:D.veu,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:t.items.map((e=>(0,o.jsx)(z.Z,{value:e,children:e},e)))})]})};const Be=(0,x.Z)((()=>({textarea:{width:"100%",minHeight:100,marginTop:11,padding:20,fontSize:16,fontFamily:"IBM Plex Sans, Arial, sans-serif",letterSpacing:0,color:"#000",border:"1px solid #B8B8B8",borderRadius:16,resize:"none","&:disabled":{opacity:.4}}})));var De=s.forwardRef(((e,t)=>{const a=Be();return(0,o.jsx)("textarea",{...e,ref:t,className:a.textarea})}));const Re="Количество занятий в неделю",Me=["1","2","3","4","5","6","7","Больше 7"];var Ae={title:"Заменить репетитора",person:{sub:"Русский язык1",name:"Абдурахмангджи",surname:"Александровна"},persons:[{sub:"Русский язык1",name:"Абдурахмангджи",surname:"Александровна",avatarUrl:"https://dlyarostavolos.com/wp-content/uploads/2018/12/318_1000-768x1137.jpg"},{sub:"русский язык2",name:"Александра2",surname:"Иванова2",avatarUrl:"https://dlyarostavolos.com/wp-content/uploads/2018/12/318_1000-768x1137.jpg"},{sub:"русский язык3",name:"Александра3",surname:"Иванова3",avatarUrl:"https://dlyarostavolos.com/wp-content/uploads/2018/12/318_1000-768x1137.jpg"}],reasons:{items:["Личные причины","Непонятное объяснение материала","Нет прогресса в обучение / ухудшились оценки","Некорректное поведение","Недисциплинированность (отмены, опоздания и т.п.)","Плохое качество звука / видео"],comment:"Комментарий Комментарий Комментарий Комментарий"},schedule:{label:"Оставить старое расписание",select:{label:"Дата начала обучения",items:["27 сентября 2021","18 сентября 2021","19 сентября 2021","20 сентября 2021","21 сентября 2021"]}},intensity:{select:{label:"Интенсивность",items:["Уроки каждую неделю","Уроки каждый день","Уроки каждый месяц","Уроки каждые выходные"]}},lessonsByPeriod:{select:{label:Re,items:Me},radio:{label:Re,items:Me.map((e=>({label:e,data:{}})))}},timeOfLessons:{select:{label:"Время занятий",items:["Вечером","Днем","Утром","Ночью"]}},intensityObj:{label:"Интенсивность",items:[{label:"Уроки каждую неделю",data:{}},{label:"Уроки каждый день",data:{}},{label:"Уроки каждый месяц",data:{}},{label:"Уроки каждые выходные",data:{}}]},reasonsTitleText:{desktop:"Очень жаль, что Вам не подошла Абдурахмангджи Александровна. Прокомментируйте, пожалуйста, что именно было не так:",mobile:"Прокомментируйте, пожалуйста, что именно было не так:"},listTutorsMock:[{id:"1",name:"Ирина",surname:"Никишина",middleName:"Юрьевна",subject:"Математика",avatarLink:"https://saroblnews.ru/files/repost/19-07-26/c8819222039cf2f99c91f7a8098a8936.jpg",isChecked:!1,gender:"female"},{id:"2",name:"Абдурахмангджи",surname:"",middleName:"Александровна",subject:"Русский язык",avatarLink:"https://sun9-12.userapi.com/impf/c836521/v836521610/1106d/N40-ekIgzRY.jpg?size=400x267&quality=96&sign=034bb73ab24c41f8545656f0cb07a1dd&type=album",isChecked:!1,gender:"female"},{id:"3",name:"Анастасия",surname:"Сидоренко",middleName:"",subject:"Физика",avatarLink:"https://avatars.mds.yandex.net/get-zen_doc/5285343/pub_60fc5a3fd6464c59668408d1_60fc5a5ccaa93609b6867e52/scale_1200",isChecked:!1,gender:"female"},{id:"4",name:"Анастасия",surname:"Сидоренко",middleName:"",subject:"Физика",avatarLink:"https://avatars.mds.yandex.net/get-zen_doc/5285343/pub_60fc5a3fd6464c59668408d1_60fc5a5ccaa93609b6867e52/scale_1200",isChecked:!1,gender:"female"},{id:"5",name:"Анастасия",surname:"Сидорxzcенко",middleName:"",subject:"Фиzxзика",avatarLink:"https://avatars.mds.yandex.net/get-zen_doc/5285343/pub_60fc5a3fd6464c59668408d1_60fc5a5ccaa93609b6867e52/scale_1200",isChecked:!1,gender:"female"},{id:"6",name:"Анастsaасия",surname:"Сиsaдоренко",middleName:"",subject:"Физиsка",avatarLink:"https://avatars.mds.yandex.net/get-zen_doc/5285343/pub_60fc5a3fd6464c59668408d1_60fc5a5ccaa93609b6867e52/scale_1200",isChecked:!1,gender:"female"}]},We=a(19282);const{lessonsByPeriod:Pe}=Ae;var ze=e=>{let{availableTime:t,onCalendarSlotClick:a,isChosenTutor:n}=e;const{t:s}=(0,c.$G)(["components.change-tutor"]),r=(0,b.Z)(),l=(0,h.Z)(r.breakpoints.down("md")),p=(e=>(0,x.Z)((t=>({schedule:{padding:e?"0 5px":0,paddingLeft:e?"5px":0,paddingRight:e?"5px":0,paddingTop:0},notice:{fontSize:12,paddingLeft:17,paddingTop:12,maxWidth:350},hideNotice:{opacity:0},errorText:{color:t.palette.error.main},title:{"&>.MuiFormControlLabel-label":{fontSize:e?13:15,fontWeight:e?600:500,color:t.palette.action.active}},newSchedule:{marginBottom:20,paddingLeft:10},select:{marginBottom:20},selectWithNotice:{position:"relative",marginBottom:50},noticeByLessonsCount:{position:e?"static":"absolute",left:17,bottom:"-44px",fontSize:12,maxWidth:410,marginLeft:e?17:0,marginTop:e?"-8px":0,marginBottom:e?8:0},disabled:{opacity:.5,pointerEvents:"none"},wishes:{marginTop:20}}))))(l)(),m=(0,i.I0)(),u=(0,i.v9)(ye.lE),g=(0,i.v9)(ye.n5),f=(0,i.v9)(ye.jE),v=(0,i.v9)(ye.rW),j=(0,i.v9)(ye.P),w=(0,i.v9)(ye.CM);let k=!1,y=!1;if(u){k="1"===j;const e=(0,We.QE)(t);y="Больше 7"===j?e>7:e>=Number(j)}const N=!y&&u,C=e=>{m((0,ye.KZ)(e.target.value))},S=()=>{switch(g){case Ze.lessonsByPeriod:return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Fe,{open:Boolean(g),title:s("schedule.lessonsByPeriod"),children:(0,o.jsx)($e,{type:Ze[g],items:Pe.radio.items,setInitial:ye.P})})});case Ze.days:return(0,o.jsx)(Fe,{open:Boolean(g),title:"",children:(0,o.jsx)(qe,{selectedTime:t,onCalendarSlotClick:a})});case Ze.wishes:return(0,o.jsx)(Fe,{open:Boolean(g),title:s("schedule.wishes"),children:(0,o.jsx)(De,{id:"wishes",value:f,onChange:C,placeholder:s("schedule.wishes")})});default:return""}};return(0,o.jsxs)(Se.Z,{className:p.schedule,children:[(0,o.jsx)("div",{className:p.newSchedule,children:(0,o.jsx)(_.Z,{className:"".concat(p.title," ").concat(n?"":p.disabled),control:(0,o.jsx)(I.Z,{icon:(0,o.jsx)(D.PDu,{}),checkedIcon:(0,o.jsx)(D.u2v,{}),color:"primary",onChange:()=>{m((0,ye.KN)(!u))},checked:!u,disabled:!n}),label:s("schedule.keepOldSchedule")})}),l?(()=>{const e={[Ze.days]:s(w?"schedule.changeAvailableSlots":"schedule.chooseAvailableSlots"),[Ze.lessonsByPeriod]:"".concat(s("schedule.lessonsByWeek")," - ").concat(j)||s("schedule.lessonsByPeriod")};return u?(0,o.jsxs)("div",{className:n?"":p.disabled,children:[Object.keys(e).map((t=>(0,o.jsx)(Ee,{title:e[t],onBtnClick:()=>m((0,ye.Rc)(t))},t))),k&&(0,o.jsx)(d.Z,{className:p.noticeByLessonsCount,color:"error",variant:"subtitle2",children:s("schedule.achievement_result_notice")}),S(),(0,o.jsx)(ae,{externalClass:u?"":p.disabled,value:v,onChange:e=>m((0,ye.KO)(e)),newTutor:!0,minDate:(0,We.fz)()}),(0,o.jsx)("div",{className:p.wishes,children:(0,o.jsx)(Ee,{title:f||s("schedule.wishes"),onBtnClick:()=>m((0,ye.Rc)(Ze.wishes))})}),N&&(0,o.jsx)(d.Z,{className:"".concat(p.notice," ").concat(p.errorText," ").concat(!N&&p.hideNotice),variant:"subtitle2",children:s("schedule.count_slots_notice")})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ee,{title:f||s("schedule.wishes"),onBtnClick:()=>m((0,ye.Rc)(Ze.wishes))}),(0,o.jsx)(Ee,{disabled:!u,title:s("schedule.setNewSchedule")}),S()]})})():(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("article",{className:"".concat(p.select," ").concat(k?p.selectWithNotice:""),children:[(0,o.jsx)(Le,{selectData:Pe.select,action:ye.Y2,initialSelector:ye.P,disabled:!u||!n}),k&&(0,o.jsx)(d.Z,{className:p.noticeByLessonsCount,color:"error",variant:"subtitle2",children:s("schedule.achievement_result_notice")})]}),(0,o.jsx)("article",{className:p.select,children:(0,o.jsx)(qe,{selectedTime:t,onCalendarSlotClick:a,disabled:!u||!n})}),(0,o.jsx)("div",{className:p.select,children:(0,o.jsx)(ae,{externalClass:u&&n?"":p.disabled,value:v,onChange:e=>m((0,ye.KO)(e)),newTutor:!0,minDate:(0,We.fz)()})}),(0,o.jsxs)("div",{className:p.select,children:[(0,o.jsx)(De,{disabled:!n,id:"wishes",value:f,onChange:C,placeholder:s("schedule.wishes")}),(0,o.jsx)(d.Z,{className:"".concat(p.notice," ").concat(p.errorText," ").concat(!N&&p.hideNotice),variant:"subtitle2",children:s("schedule.count_slots_notice")})]})]})]})};const Oe=(0,x.Z)((()=>({inner:{padding:6,display:"flex",flexDirection:"column",height:"100%"},content:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1},title:{marginBottom:30},mobileFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:10,marginTop:25},cancel:{padding:"5px 0",fontSize:13,letterSpacing:0,textTransform:"none"},save:{padding:"5px 10px",fontSize:13,letterSpacing:0,textTransform:"none"}})));var Fe=e=>{let{children:t,open:a,onSaveMobileDrawerAction:n,title:s}=e;const{t:r}=(0,c.$G)(["components.change-tutor"]),l=Oe(),p=(0,i.I0)();return(0,o.jsx)(E,{open:a,onDrawerClose:()=>p((0,ye.Rc)(null)),position:"right",closeIcon:!1,children:(0,o.jsxs)("div",{className:l.inner,children:[(0,o.jsxs)("section",{className:l.content,children:[s&&(0,o.jsx)(d.Z,{className:l.title,variant:"h5",align:"center",children:s}),t]}),(0,o.jsxs)("article",{className:l.mobileFooter,children:[(0,o.jsx)(m.Z,{className:l.cancel,variant:"text",size:"small",startIcon:(0,o.jsx)(D.Y4O,{}),onClick:()=>p((0,ye.Rc)(null)),children:r("mobileDrawer.cancel")}),(0,o.jsx)(m.Z,{className:l.save,size:"small",onClick:()=>p((0,ye.Rc)(null)),children:r("mobileDrawer.choose")})]})]})})};var Ee=e=>{let{disabled:t,title:a,onBtnClick:n=()=>{}}=e;const s=(e=>(0,x.Z)((()=>({root:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,padding:16,paddingRight:11,color:"grey",opacity:e?.2:1,border:"1px solid #ececec",backgroundColor:"#fff",borderRadius:16,boxShadow:"0px 0px 3px rgba(18, 17, 32, 0.05)",cursor:"pointer"}}))))(t)();return(0,o.jsxs)("div",{className:s.root,onClick:n,children:[(0,o.jsx)(d.Z,{variant:"caption",color:"inherit",children:a}),(0,o.jsx)(D.LZ3,{color:"primary"})]})},He=a(8423),Ge=a(86010);const Ye=(0,x.Z)((e=>({main:{width:"100%"},root:{overflow:"hidden",backgroundColor:e.palette.background.paper,borderRadius:16},item:{margin:0,padding:"24px 0"},checked:{background:"".concat((0,He.Fq)(e.palette.primary.main,.2)),transition:"background 500ms ease"},radio:{marginLeft:20}})));var $e=e=>{let{items:t,type:a,setInitial:n}=e;const s=Ye(),r=(0,i.v9)(n),l=(0,i.I0)(),c=e=>{let{value:t,data:a}=e;return(0,o.jsx)(d.Z,{variant:"subtitle2",children:t})};return(0,o.jsx)(A.Z,{className:s.main,component:"fieldset",children:(0,o.jsx)(R.Z,{className:s.root,"aria-label":"group",name:"controlled-radio-buttons-group",value:r,onChange:e=>{l((0,ye.i6)({type:a,data:e.target.value}))},children:(null==t?void 0:t.length)?t.map(((e,a)=>{let{label:n,data:i}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.Z,{className:(0,Ge.Z)({[s.item]:!0,[s.checked]:r===n}),value:n,control:(0,o.jsx)(M.Z,{className:s.radio,icon:(0,o.jsx)(D.wc4,{}),checkedIcon:(0,o.jsx)(D.pEU,{})}),label:(0,o.jsx)(c,{value:n,data:i})}),t.length!==a+1&&(0,o.jsx)(Ce.Z,{})]})})):(0,o.jsx)(d.Z,{children:"Список пуст"})})})};(0,x.Z)((e=>({root:{overflow:"hidden",backgroundColor:e.palette.background.paper,borderRadius:16},item:{margin:0,padding:"24px 0"},checked:{background:"".concat((0,He.Fq)(e.palette.primary.main,.2)),transition:"background 500ms ease"},personContainer:{display:"flex",alignItems:"center"},personAvatar:{width:48,height:48,marginRight:15},personSubject:{color:e.palette.action.active},personInfo:{marginRight:20}})));const Ve=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],Ke=Array(24).fill("").map(((e,t)=>t)),Ue=Array(15).fill("").map(((e,t)=>t+7)),Je=e=>{let{onCalendarSlotClick:t,selectedTime:a,disabled:n}=e;const i=(0,b.Z)(),r=(0,h.Z)(i.breakpoints.down("md")),{t:l}=(0,c.$G)("components.pupil-schedule-actions"),[p,m]=(0,s.useState)(!1),u=(0,x.Z)((e=>({calendar:{width:"fit-content",[e.breakpoints.down("md")]:{margin:"0 auto",paddingBottom:30}},disabled:{pointerEvents:"none",opacity:.3},titleWrap:{display:"flex",justifyContent:"space-between",marginBottom:18,[e.breakpoints.down("md")]:{marginTop:26,marginBottom:10,flexDirection:"column",alignItems:"center",textAlign:"center"}},calendarTitle:{paddingLeft:28,color:e.palette.action.active,[e.breakpoints.down("md")]:{paddingLeft:0,...e.typography.h5,textTransform:"uppercase",marginBottom:17}},changeBtn:{border:"none",backgroundColor:"transparent",cursor:"pointer",...e.typography.caption,color:"#7e28df",[e.breakpoints.down("md")]:{fontSize:15,textTransform:"uppercase"}},calendarBody:{border:"1px solid #b8b8b8",height:"fit-content",[e.breakpoints.down("md")]:{display:"flex"}},calendarDay:{display:"flex",borderBottom:"1.1px solid #b8b8b8","&:last-child":{borderBottom:"none"},[e.breakpoints.down("md")]:{flexDirection:"column",borderBottom:"none",borderRight:"1px solid #b8b8b8","&:last-child":{borderRight:"none"}}},calendarHour:{width:22,height:22,backgroundColor:e.palette.background.paper,borderRight:"1px solid #b8b8b8",cursor:"pointer",transition:"width, height 0.2s ease-in-out","&:last-child":{borderRight:"none"},[e.breakpoints.down("lg")]:{},[e.breakpoints.down("md")]:{width:35,height:35,borderRight:"none",borderBottom:"1px solid #b8b8b8","&:last-child":{borderBottom:"none"}}},topHeaderWrap:{display:"flex",paddingLeft:20,[e.breakpoints.down("md")]:{justifyContent:"center"}},topHeader:{width:22,height:27,textAlign:"center",color:e.palette.action.active,[e.breakpoints.down("lg")]:{},[e.breakpoints.down("md")]:{width:35}},withHeaderDaysWrap:{display:"flex",justifyContent:"center"},sideHeaderWrap:{display:"flex",flexDirection:"column",paddingTop:2},sideHeader:{flexGrow:1,display:"flex",width:20,height:22,alignItems:"center",color:e.palette.action.active,[e.breakpoints.down("lg")]:{},[e.breakpoints.down("md")]:{height:35}},selectedSlot:{position:"relative",width:"100%",height:"100%",backgroundColor:e.palette.primary.main,border:"1px solid #7e28df",pointerEvents:"none"}})))(),g=p?Ke:Ue,f=(e,a)=>()=>t(e,a);return(0,o.jsxs)("div",{className:"".concat(u.calendar," ").concat(n&&u.disabled),children:[(0,o.jsx)("div",{className:u.titleWrap,children:(0,o.jsx)(d.Z,{className:u.calendarTitle,variant:"caption",children:l("available_pupil_time")})}),(0,o.jsx)("div",{className:u.topHeaderWrap,children:r?Ve.map((e=>(0,o.jsx)(d.Z,{variant:"caption",className:u.topHeader,children:e},e))):g.map((e=>(0,o.jsx)(d.Z,{variant:"caption",className:u.topHeader,children:e},e)))}),(0,o.jsxs)("div",{className:u.withHeaderDaysWrap,children:[(0,o.jsx)("div",{className:u.sideHeaderWrap,children:r?g.map((e=>(0,o.jsx)(d.Z,{variant:"caption",className:u.sideHeader,children:e},e))):Ve.map((e=>(0,o.jsx)(d.Z,{variant:"caption",className:u.sideHeader,children:e},e)))}),(0,o.jsx)("div",{className:u.calendarBody,children:Ve.map((e=>(0,o.jsx)("div",{className:u.calendarDay,children:g.map((t=>{var n;const s=null===(n=a[e])||void 0===n?void 0:n.includes(t);return(0,o.jsx)("div",{className:u.calendarHour,role:"presentation",onMouseDown:f(e,t),onDragStart:e=>e.preventDefault(),children:s&&(0,o.jsx)("div",{className:u.selectedSlot})},t)}))},e)))})]})]})};var qe=(0,s.memo)(Je);let Xe;const Qe=e=>{let{listTutorsAndSubjects:t,setTutorsAndSubjects:a,isSubjectMain:n=!1,externalClass:i="",subjectNames:r}=e;const l=t.filter((e=>e.isChecked)),p=l.length,m=(e=>(0,x.Z)((t=>({main:{width:"100%"},selectTutorWrap:{position:"relative",width:342,[t.breakpoints.down("md")]:{width:"100%"}},selectTutor:{position:"relative",padding:"9px 40px 7px 18px",border:"1px solid #b8b8b8",borderRadius:"16px",backgroundColor:t.palette.background.paper,userSelect:"none",cursor:"pointer","&:focus-visible":{outlineColor:t.palette.primary.main,outlineWidth:"1px"},"&::before":{content:'""',position:"absolute",right:20,top:"calc(50% - 6px)",display:"block",width:10,height:10,borderRight:"2px solid ".concat(t.palette.text.primary),borderTop:"2px solid ".concat(t.palette.text.primary),transform:"rotate(135deg)",transition:"transform 0.2s ease-in-out",[t.breakpoints.down("md")]:{top:"calc(50% - 5px)",borderRight:"2px solid ".concat(t.palette.primary.main),borderTop:"2px solid ".concat(t.palette.primary.main),transform:"rotate(45deg)"}},[t.breakpoints.down("md")]:{border:"1px solid #ececec",boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)"}},selectInnerWrap:{display:"flex",alignItems:"center"},selectTutorOpen:{border:"1px solid ".concat(t.palette.primary.main),transition:"border 0.1s ease-in-out","&::before":{top:"50%",transform:"rotate(315deg)"}},avatar:{width:48,height:48,marginRight:14,border:"1px solid ".concat(t.palette.background.paper)},shiftAvatar:{marginLeft:"-".concat(5*e,"px"),"&:first-of-type":{marginLeft:0}},fixedAvatarShift:{marginLeft:"-".concat(30,"px"),"&:first-of-type":{marginLeft:0}},tutorName:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},greyText:{color:t.palette.action.active},tutorNameWrap:{width:"90%",overflow:"hidden"},defaultTextForSelect:{color:"#b8b8b8"},listTutors:{position:"absolute",top:75,left:0,listStyle:"none",paddingLeft:0,margin:0,backgroundColor:t.palette.background.paper,borderRadius:"16px",width:"100%",maxHeight:222,overflowX:"hidden",overflowY:"auto",boxShadow:"0 0 3px rgba(18, 17, 32, 0.05)",zIndex:10,"& li:last-child":{borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px"},"& li:first-of-type":{borderTopLeftRadius:"16px",borderTopRightRadius:"16px"},[t.breakpoints.down("md")]:{position:"relative",top:"auto",left:"auto",maxHeight:"100%",border:"none"}},tutorItem:{display:"flex",padding:"11px 21px 13px",cursor:"pointer",userSelect:"none",border:"1px solid ".concat(t.palette.action.selected),transition:"background-color 0.3s ease-in-out"},tutorActiveItem:{backgroundColor:"#F6F4FD"},tutorCheckbox:{padding:0,marginRight:20},counter:{width:50,textAlign:"center",color:t.palette.action.active,padding:"5px 2px",borderRadius:"8px",backgroundColor:"#f1f1f1"},titleMobile:{margin:"26px 0",textAlign:"center"},subject:{display:"inline-block","&:first-letter":{textTransform:"uppercase"}}}))))(p)(),u=(0,b.Z)(),g=(0,h.Z)(u.breakpoints.down("md")),{t:f}=(0,c.$G)("components.pupil-schedule-actions"),[v,j]=(0,s.useState)(!1),w=e=>{let{name:t="",middleName:a="",subject:s}=e;return n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{className:"".concat(m.tutorName," ").concat(m.greyText),variant:"caption",children:"".concat(t," ").concat(a)}),(0,o.jsx)(d.Z,{className:m.subject,variant:"subtitle2",children:r[s]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{className:"".concat(m.subject," ").concat(m.greyText),variant:"caption",children:r[s]}),(0,o.jsx)(d.Z,{className:m.tutorName,variant:"subtitle2",children:"".concat(t," ").concat(a)})]})},k=()=>(0,o.jsx)("ul",{className:m.listTutors,children:t.map((e=>{let{id:n,name:s,middleName:i,subject:r,avatarLink:l,isChecked:c}=e;return(0,o.jsxs)("li",{className:"".concat(m.tutorItem," ").concat(c?m.tutorActiveItem:""),role:"presentation",onClick:()=>((e,n)=>{const o=t.map((t=>{const a={...t};return a.isChecked=!1,a.id===e&&a.subject===n&&(a.isChecked=!a.isChecked),a}));a(o)})(n,r),children:[(0,o.jsx)(I.Z,{icon:(0,o.jsx)(D.wc4,{}),checkedIcon:(0,o.jsx)(D.pEU,{}),className:m.tutorCheckbox,color:"primary",checked:c}),(0,o.jsx)(ne.Z,{className:m.avatar,src:l,userId:n}),(0,o.jsx)("div",{className:m.tutorNameWrap,children:w({name:s,middleName:i,subject:r})})]},n+r)}))});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G,{open:v&&g,position:"right",onSelectBtnClick:()=>j(!1),onDrawerClose:()=>{j(!1);Xe&&JSON.stringify(Xe)!==JSON.stringify(t)&&a(Xe)},children:(0,o.jsxs)("div",{className:m.main,children:[(0,o.jsx)(d.Z,{className:m.titleMobile,variant:"h5",children:f("chose_subject_and_tutor")}),k()]})}),(0,o.jsx)(q.Z,{onClickAway:()=>{g||j(!1)},children:(0,o.jsxs)("div",{className:"".concat(m.selectTutorWrap," ").concat(i),children:[(0,o.jsx)("div",{className:"".concat(m.selectTutor," ").concat(v?m.selectTutorOpen:""),role:"presentation",onClick:()=>{g&&(Xe=[...t]),j((e=>!e))},onKeyPress:()=>{j(!v)},tabIndex:0,children:(()=>{switch(!0){case 1===p:return(0,o.jsxs)("div",{className:m.selectInnerWrap,children:[(0,o.jsx)(ne.Z,{className:m.avatar,src:l[0].avatarLink,userId:l[0].id}),(0,o.jsx)("div",{className:m.tutorNameWrap,children:w(l[0])})]});case p>1&&p<5:return(0,o.jsx)("div",{className:m.selectInnerWrap,children:l.map((e=>{let{avatarLink:t,id:a}=e;return(0,o.jsx)(ne.Z,{className:m.avatar,src:t,userId:a},a)}))});case p>=5&&p<7:return(0,o.jsx)("div",{className:m.selectInnerWrap,children:l.map((e=>{let{avatarLink:t,id:a}=e;return(0,o.jsx)(ne.Z,{className:"".concat(m.avatar," ").concat(m.shiftAvatar),src:t,userId:a},a)}))});case p>6:return(0,o.jsxs)("div",{className:m.selectInnerWrap,children:[l.slice(0,6).map((e=>{let{avatarLink:t,id:a}=e;return(0,o.jsx)(ne.Z,{className:"".concat(m.avatar," ").concat(m.fixedAvatarShift),src:t,userId:a},a)})),(0,o.jsx)(d.Z,{className:m.counter,variant:"caption",children:"+".concat(p-6)})]});default:return(0,o.jsxs)("div",{className:m.selectInnerWrap,children:[(0,o.jsx)(ne.Z,{className:m.avatar,isGray:!0}),(0,o.jsx)(d.Z,{className:m.defaultTextForSelect,variant:"subtitle2",children:f("chose")})]})}})()}),v&&!g&&k()]})})]})};var et=(0,s.memo)(Qe);var tt=e=>{let{subjectNames:t,onSubmitClick:a,onCancelBtnClick:n,onCalendarSlotClick:s,availableTime:r}=e;const l=(0,b.Z)(),{t:p}=(0,c.$G)(["components.change-tutor"]),m=(e=>(0,x.Z)((t=>({container:{padding:0,[t.breakpoints.up("md")]:{maxWidth:1080,margin:"0 auto"},overflowY:"auto","&::-webkit-scrollbar":{display:"none"},"&::-moz-scrollbar":{display:"none",width:0,height:0}},alert:{margin:"10px auto 20px"},titlePerson:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",margin:"20px auto",[t.breakpoints.up("md")]:{justifyContent:"space-between"},[t.breakpoints.down("md")]:{flexDirection:"column"}},persons:{width:385,"&>MuiInputBase-root":{height:68}},reasonsSchedule:{display:"flex",justifyContent:"space-between",flexDirection:e?"column":"row",[t.breakpoints.up("md")]:{minHeight:500,maxHeight:"70vh",overflowY:"scroll","&::-webkit-scrollbar":{display:"none"},"&::-moz-scrollbar":{display:"none",width:0,height:0}}},reasons:{width:"50%",[t.breakpoints.down("md")]:{width:"100%"}},schedule:{width:e?"100%":"50%",marginLeft:e?0:100,padding:0,[t.breakpoints.between("md","lg")]:{width:"calc(60% - 22px)",marginLeft:0}},selectTutorWrap:{[t.breakpoints.down("md")]:{width:"100%"}},tutorNotice:{paddingLeft:14,paddingTop:5}}))))((0,h.Z)(l.breakpoints.down("md")))(),u=(0,i.I0)(),g=(0,i.v9)(ye.H2),f=g.some((e=>{let{isChecked:t}=e;return t}));return(0,o.jsxs)("section",{className:m.container,children:[(0,o.jsxs)("div",{className:m.titlePerson,children:[(0,o.jsx)(Ne,{}),(0,o.jsxs)("div",{className:m.selectTutorWrap,children:[(0,o.jsx)(et,{subjectNames:t,listTutorsAndSubjects:g,setTutorsAndSubjects:e=>u((0,ye.fj)(e))}),!f&&(0,o.jsx)(d.Z,{className:m.tutorNotice,variant:"caption",color:"error",children:p("schedule.before_choose_tutor")})]})]}),(0,o.jsx)(L.Z,{className:m.alert,severity:"error",children:(0,o.jsx)(c.cC,{t:p,i18nKey:"schedule.notice",components:{b:(0,o.jsx)("b",{})}})}),(0,o.jsxs)("div",{className:m.reasonsSchedule,children:[(0,o.jsx)("div",{className:m.reasons,children:(0,o.jsx)(_e,{isChosenTutor:f})}),(0,o.jsx)("div",{className:m.schedule,children:(0,o.jsx)(ze,{onCalendarSlotClick:s,availableTime:r,isChosenTutor:f})})]}),(0,o.jsx)(Ie,{onSubmitClick:a,onCancelBtnClick:n})]})};var at=(0,i.$j)((e=>{let{changeTutor:t,sidebarSlice:a,userAppBar:n}=e;return{subjectNames:a.subjectNames,pupilId:n.user.id,changeTutor:t}}),(e=>(0,v.DE)({...ye.Nw,getTutorsAndSubjects:ye.cT},e)))((0,w.Z)((e=>{let{pupilId:t,getTutorsAndSubjects:a,openModal:n,closeModal:r,subjectNames:l,changeTutor:d,onClose:p,setInitial:m,setAvailableTime:u,setFormValid:h}=e;const{t:x}=(0,c.$G)("components.pupil-schedule-actions"),b=(0,i.v9)(ye.e3),{availableTime:g,isFormValid:f}=d,v=new ke.Z("lessons"),w=(0,s.useCallback)(((e,t)=>{let a=[...g[e]||[]];a=a.includes(t)?a.filter((e=>e!==t)):[...a,t].sort(((e,t)=>e-t)),u({day:e,selectedHours:a})}),[g]);(0,s.useEffect)((()=>(v.info("open_change_tutor_form"),a(t),window.location.hash="schedule&replace",()=>{window.location.hash="schedule"})),[]),(0,s.useEffect)((()=>{(()=>{const e=(0,We.Yg)(b);f!==e&&h(e)})()}),[d]);return(0,o.jsx)(tt,{openModal:n,closeModal:r,subjectNames:l,onSubmitClick:()=>{const e=(0,We.tJ)(b);v.info("submit_tutor_form",e),(0,j.fJ)(e).then((()=>{n((0,o.jsx)(y,{type:"success",title:x("success_change_tutor_title"),text:x("success_change_tutor_text"),onClose:r})),m()})).catch((()=>{n((0,o.jsx)(y,{type:"error",title:x("error_submit"),onClose:r}))}))},onCancelBtnClick:()=>{v.info("cancel_change_tutor_form"),p()},onCalendarSlotClick:w,availableTime:g})}))),nt=a(4039),ot=a(79212),st=a.n(ot),it=a(77934),rt=a(41185);const lt=(0,a(58377).Z)((e=>({root:{"&.MuiDateRangePickerDay-rangeIntervalDayHighlight":{backgroundColor:e.palette.primary.light},"&.MuiDateRangePickerDay-rangeIntervalDayHighlightStart .Mui-selected":{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main},"&:focus":{backgroundColor:e.palette.primary.main}},"&.MuiDateRangePickerDay-rangeIntervalDayHighlightEnd .Mui-selected":{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main},"&:focus":{backgroundColor:e.palette.primary.main}},"&.MuiDateRangePickerDay-root .Mui-selected":{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main},"&:focus":{backgroundColor:e.palette.primary.main}}}})))(it.ZP);var ct=e=>{let{value:t,setValue:a,className:n,displayStaticWrapperAs:s,calendars:i}=e;return(0,o.jsx)(U.Z,{locale:Q.Z,dateAdapter:K.Z,children:(0,o.jsx)(rt.Z,{className:n,value:t,onChange:a,renderDay:(e,t)=>(0,o.jsx)(lt,{...t}),displayStaticWrapperAs:s,calendars:i,renderInput:null,minDate:new Date})})};f().extend(st());const dt=(0,x.Z)((e=>({pausePage:{paddingBottom:38,overflowY:"auto","&::-webkit-scrollbar":{display:"none"},"&::-moz-scrollbar":{display:"none",width:0,height:0},[e.breakpoints.between("md","lg")]:{paddingBottom:24}},contentWrap:{display:"flex",justifyContent:"space-between",maxWidth:946,margin:"43px auto 56px",[e.breakpoints.between("md","lg")]:{flexDirection:"column",alignItems:"center",margin:"32px auto 46px"},[e.breakpoints.down("md")]:{flexDirection:"column",margin:"35px auto 70px"}},title:{textAlign:"center"},subtitle:{marginLeft:17,marginBottom:11,color:e.palette.text.secondary,[e.breakpoints.down("md")]:{fontSize:13,color:e.palette.action.active}},selectionBlock:{width:"100%",display:"flex",flexDirection:"column",[e.breakpoints.between("md","lg")]:{flexDirection:"row",justifyContent:"space-between"}},subjectAndTutorBlock:{marginBottom:34,marginRight:20,[e.breakpoints.down("md")]:{marginRight:0,marginBottom:20}},blockOfReasons:{width:"fit-content","& .MuiFormControlLabel-root":{marginRight:0},[e.breakpoints.between("md","lg")]:{marginLeft:15,marginBottom:20},[e.breakpoints.down("md")]:{width:"100%"}},blockOfReasonWrap:{width:"100%"},datePickerBlock:{width:"100%"},radioGroup:{marginLeft:22,[e.breakpoints.down("md")]:{marginLeft:0,backgroundColor:e.palette.background.paper,borderRadius:16,boxShadow:"0 0 3px rgba(18, 17, 32, 0.05)",border:"1px solid #ececec","& label:last-child":{borderBottom:"none"}}},radioBtn:{padding:6},datePickerWrap:{width:420,marginLeft:15,"& .css-1ti4rpc":{borderRadius:16,border:"1px solid ".concat(e.palette.action.selected)},[e.breakpoints.down("md")]:{width:"100%",margin:"0 auto","& .MuiPickerStaticWrapper-root":{minWidth:300}}},datePicker:{borderRadius:"16px","& div > div":{width:"100%"},"& .css-f7iyql":{padding:"20px 23px"},"& .MuiTypography-subtitle1":{...e.typography.h5,"&::first-letter":{textTransform:"uppercase"}},"& .MuiTypography-caption":{...e.typography.body1,color:e.palette.action.active},"& .css-1n2mv2k span":{width:42,margin:0},"& .MuiDateRangePickerDay-root":{width:42,height:42},"& .MuiIconButton-edgeStart":{padding:5},"& .MuiIconButton-edgeEnd":{padding:5}},btnsBlock:{textAlign:"center",[e.breakpoints.down("md")]:{"& button":{width:"calc(100% - 54px)"}}},submitBtn:{marginLeft:45,padding:"10px 16px",letterSpacing:"1px",textTransform:"inherit",[e.breakpoints.down("md")]:{marginTop:20,marginLeft:0}},cancelBtn:{fontSize:14,padding:"10px 16px",letterSpacing:"1px"},selectElement:{position:"relative",width:"100%",marginBottom:20,padding:"17px 50px 17px 20px",borderRadius:16,boxShadow:"0 0 5px rgba(18, 17, 32, 0.05)",backgroundColor:e.palette.background.paper,cursor:"pointer","&::before":{content:'""',position:"absolute",right:20,top:"calc(50% - 5px)",display:"block",width:10,height:10,borderRight:"2px solid ".concat(e.palette.primary.main),borderTop:"2px solid ".concat(e.palette.primary.main),transform:"rotate(45deg)"}},selectTitle:{color:"#b8b8b8",userSelect:"none"},selectTitleActive:{color:e.palette.text.primary,fontWeight:500},subtitleMobile:{maxWidth:215,margin:"26px auto",textAlign:"center",color:e.palette.warning.contrastText},reasonLabel:{[e.breakpoints.down("md")]:{padding:"18px 23px",marginLeft:0,borderBottom:"1px solid #dcdcdc",transition:"background-color 0.3s ease-in-out"}},reasonLabelActive:{[e.breakpoints.down("md")]:{backgroundColor:"#F6F4FD"}},selectTutorForPause:{[e.breakpoints.up("lg")]:{width:"382px !important"}},alert:{margin:"10px auto 20px",maxWidth:945},notice:{fontSize:12,marginLeft:17,marginTop:12,maxWidth:420},errorText:{color:e.palette.error.main},errorField:{border:"1px solid ".concat(e.palette.error.main)}})));var pt=e=>{let{listTutorsAndSubjects:t,setListTutorsAndSubjectsData:a,listReasons:n,onReasonBtnChange:s,chosenReason:i,pauseDuration:r,setPauseDuration:l,typeOfSelectionPage:p,onDrawerClose:u,onElementForSelectClick:x,onSelectBtnClick:g,onCancelBtnClick:v,isLoadError:j,subjectNames:w,isSubmitBtnDisabled:k,onSubmitClick:y,isPeriodError:N,nextLesson:C}=e;const S=dt(),T=(0,b.Z)(),I=(0,h.Z)(T.breakpoints.down("md")),{t:B}=(0,c.$G)("components.pupil-schedule-actions"),D=r[0],A=r[1];let W,P;if(C){const e=Z(C,D,B("list_minutes",{returnObjects:!0}),B("list_hours",{returnObjects:!0}));W=e.showAlert,P=e.text}const z=()=>(0,o.jsxs)("div",{className:S.blockOfReasonWrap,children:[I?(0,o.jsx)(d.Z,{className:S.subtitleMobile,variant:"h5",children:B("reason_for_pause")}):null,(0,o.jsx)("div",{className:S.blockOfReasons,children:(0,o.jsx)(R.Z,{className:S.radioGroup,value:i,children:n.map((e=>(0,o.jsx)(_.Z,{value:e,className:"".concat(S.reasonLabel," ").concat(i===e?S.reasonLabelActive:""),control:(0,o.jsx)(M.Z,{className:S.radioBtn,color:"primary"}),label:(0,o.jsx)(d.Z,{variant:"subtitle2",children:e}),onChange:s})))})})]}),O=()=>(0,o.jsxs)("div",{className:S.datePickerBlock,children:[I?(0,o.jsx)(d.Z,{className:S.subtitleMobile,variant:"h5",children:B("period_for_freeze")}):null,(0,o.jsx)("div",{className:S.datePickerWrap,children:(0,o.jsx)(ct,{className:S.datePicker,displayStaticWrapperAs:"desktop",value:r,setValue:l,calendars:1})})]}),F={reason:z(),duration:O()};return(0,o.jsxs)("div",{className:S.pausePage,children:[(0,o.jsx)(G,{open:Boolean(p),position:"right",onDrawerClose:u,onSelectBtnClick:g,children:F[p]}),j&&(0,o.jsx)(L.Z,{className:S.alert,severity:"error",children:B("load_error")}),(0,o.jsx)(d.Z,{className:S.title,variant:I?"h5":"h2",children:B("take_pause")}),W&&(0,o.jsx)(L.Z,{className:S.alert,severity:"warning",children:B("subtract_of_lesson",{time:P,text:B("take_pause_text")})}),(0,o.jsxs)("div",{className:S.contentWrap,children:[(0,o.jsxs)("div",{className:S.selectionBlock,children:[(0,o.jsxs)("div",{className:S.subjectAndTutorBlock,children:[(0,o.jsx)(d.Z,{className:S.subtitle,variant:"subtitle2",children:"".concat(B("chose_subject_and_tutor"),":")}),(0,o.jsx)(ie,{externalClass:S.selectTutorForPause,listTutorsAndSubjects:t,setTutorsAndSubjects:a,subjectNames:w,isSubjectMain:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(d.Z,{className:S.subtitle,variant:"subtitle2",children:"".concat(B("select_reason_for_pause"),":")}),I?(0,o.jsx)("div",{className:S.selectElement,onClick:()=>x("reason"),role:"presentation",children:(0,o.jsx)(d.Z,{className:"".concat(S.selectTitle," ").concat(i?S.selectTitleActive:""),variant:"body2",children:i||"".concat(B("chose_reason"),"...")})}):z()]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(d.Z,{className:S.subtitle,variant:"subtitle2",children:"".concat(B("chose_period_for_freeze"),":")}),I?(0,o.jsx)("div",{className:"".concat(S.selectElement," ").concat(N?S.errorField:""),onClick:()=>x("duration"),role:"presentation",children:D&&A?(0,o.jsx)(d.Z,{className:S.selectTitleActive,variant:"body2",children:"".concat(f()(D).format("DD.MM.YYYY"),"-").concat(f()(A).format("DD.MM.YYYY"))}):(0,o.jsx)(d.Z,{className:S.selectTitle,variant:"body2",children:"".concat(B("chose_period"),"...")})}):O(),(0,o.jsx)(d.Z,{className:"".concat(S.notice," ").concat(N?S.errorText:""),variant:"subtitle2",children:(0,o.jsx)(c.cC,{t:B,i18nKey:"notice",components:{b:(0,o.jsx)("b",{})}})})]})]}),(0,o.jsxs)("div",{className:S.btnsBlock,children:[(0,o.jsx)(m.Z,{className:S.cancelBtn,variant:"contained",size:"small",onClick:v,children:B(W?"better_got_to_lesson":"not_necessary")}),(0,o.jsx)(m.Z,{className:S.submitBtn,variant:I?"outlined":"text",size:"small",disabled:k||j,onClick:y,children:B(W?"confirm_debiting":"want_take_pause")})]})]})};let mt;var ut=(0,i.$j)((e=>{let{pauseInSchedule:t,userAppBar:a,sidebarSlice:n,lessonsListNew:o}=e;return{pauseInSchedule:t,pupilId:a.user.id,subjectNames:n.subjectNames,lessonsList:o.schedule.allLessons}}),(e=>(0,v.DE)({...nt.Nw,getTutorsAndSubjects:nt.cT,getReasons:nt.h2},e)))((0,w.Z)((e=>{let{onClose:t,pauseInSchedule:a,pupilId:n,setListTutorsAndSubjectsData:i,setReason:r,setPauseDuration:l,resetPauseInScheduleState:d,getTutorsAndSubjects:p,subjectNames:m,getReasons:u,openModal:h,closeModal:x,lessonsList:b}=e;const{listTutorsAndSubjects:g,listReasons:f,chosenReason:v,pauseDuration:w,isLoadError:N}=a,C=g.filter((e=>{let{isChecked:t}=e;return t})),Z=Boolean(C.length)&&S(b,C),{t:T}=(0,c.$G)("components.pupil-schedule-actions"),[_,I]=(0,s.useState)(""),[L,B]=(0,s.useState)(!0),[D,R]=(0,s.useState)(!1);(0,s.useEffect)((()=>(u(),p(n),window.location.hash="schedule&pause",()=>{d(),window.location.hash="schedule"})),[]),(0,s.useEffect)((()=>{(()=>{const e=g.filter((e=>e.isChecked)).length;let t=!1;if(w.every((e=>e))){const e=(0,k.Z)(w[0]),a=(0,k.Z)(w[1]);t=Math.abs(a.diff(e,"day"))+1>=7,R(!t)}B(!(e&&v&&t))})()}),[a]);return(0,o.jsx)(pt,{listTutorsAndSubjects:g,listReasons:f,setListTutorsAndSubjectsData:i,onReasonBtnChange:e=>{const{value:t}=e.target;r(t)},chosenReason:v,pauseDuration:w,setPauseDuration:l,typeOfSelectionPage:_,onDrawerClose:()=>{if(mt)switch(_){case"tutors":i(mt.listTutorsAndSubjects);break;case"reason":r(mt.chosenReason);break;case"duration":l(mt.pauseDuration)}I("")},onSelectBtnClick:()=>I(""),onElementForSelectClick:e=>{mt={...a},I(e)},onCancelBtnClick:t,isLoadError:N,subjectNames:m,isSubmitBtnDisabled:L,onSubmitClick:()=>{const[e,t]=w.map((e=>(0,k.Z)(e).format("DD.MM.YY"))),a=C.reduce(((e,t)=>{let{id:a,subject:n}=t;return e[a]=e[a]?[...e[a],n]:[n],e}),{}),n={event:"break_studies",reason:v,teacher_subject:a,date_start:e,date_end:t};B(!0),(0,j.fJ)(n).then((()=>{h((0,o.jsx)(y,{type:"success",title:T("success_take_pause_title"),text:T("success_take_pause_text"),onClose:x}))})).catch((()=>{h((0,o.jsx)(y,{type:"error",title:T("error_submit"),onClose:x})),B(!1)}))},isPeriodError:D,nextLesson:Z})}))),ht=a(74476),xt=a(35578),bt=a(28143);const gt=(0,x.Z)((e=>({root:{[e.breakpoints.down("md")]:{fontSize:25}}})));var ft=()=>{const{t:e}=(0,c.$G)("components.lessons-list"),t=gt();return(0,o.jsx)(d.Z,{className:t.root,variant:"h1",children:e("title")})};var vt=()=>{const{t:e}=(0,c.$G)("components.lessons-list"),t=[e("tabs.schedule"),e("tabs.past")],a=(0,i.v9)(r.PZ),n=(0,i.I0)(),l=(e=>(0,x.Z)((t=>({root:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",borderRadius:14,background:t.palette.action.disabledBackground,border:"1px solid #e6e6e6"},tab:{position:"relative",width:"50%",height:54,borderRadius:14,textAlign:"center",cursor:"pointer","&:hover":{"& $tabText":{color:t.palette.primary.main}},"& > p":{[t.breakpoints.between("md","lg")]:{width:"100%"}}},tabText:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:t.palette.action.active,[t.breakpoints.down("md")]:{fontSize:14}},active:{color:"black"},slider:{position:"absolute",left:6,width:"50%",height:44,borderRadius:14,background:t.palette.common.white,boxShadow:"1px 1px 4px rgba(0, 0, 0, 0.1)",transform:e?"translateX(calc(100% - 12px))":"translateX(0%)",transition:"all 500ms ease"}}))))(a)();return(0,s.useEffect)((()=>{window.location.hash=a?"past":"schedule"}),[a]),(0,o.jsxs)("div",{className:l.root,children:[(0,o.jsx)("div",{className:l.slider}),t.map(((e,t)=>(0,o.jsx)("div",{className:l.tab,onClick:()=>{n(t?(0,r.r7)(!0):(0,r.r7)(!1))},"aria-hidden":"true",children:(0,o.jsx)(d.Z,{className:"".concat(l.tabText," ").concat(Boolean(t)===a&&l.active),children:e})},"".concat(e,"-").concat(t))))]})},jt=a(28893);(0,x.Z)((e=>({root:{height:172,margin:"20px 0",borderRadius:16,[e.breakpoints.down("md")]:{height:147}}})));var wt=a(21082),kt=a(76426);const yt=(0,x.Z)((e=>({root:{display:"flex",flexWrap:"wrap",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:163,padding:"24px 0",[e.breakpoints.between("md","lg")]:{width:140,padding:"24px 15px"},[e.breakpoints.down("md")]:{flexDirection:"row",maxWidth:126,marginBottom:7,padding:0}},dayWeek:{order:0,textTransform:"capitalize",[e.breakpoints.down("md")]:{order:4,padding:"5px 10px",fontSize:11,color:e.palette.action.active,backgroundColor:e.palette.action.disabledBackground,borderRadius:8,marginTop:5}},day:{order:1,lineHeight:1,[e.breakpoints.down("md")]:{fontSize:13,fontWeight:600}},month:{marginBottom:10,fontSize:12,fontWeight:500,color:e.palette.action.active,order:2,[e.breakpoints.down("md")]:{marginBottom:0,fontSize:13,fontWeight:500,color:e.palette.text.primary}},time:{padding:"5px 26px",fontSize:15,fontWeight:"bold",backgroundColor:e.palette.action.disabledBackground,borderRadius:8,order:3,[e.breakpoints.down("md")]:{padding:0,fontWeight:600,fontSize:13,backgroundColor:"transparent"}}})));var Nt=e=>{let{scheduledTime:t}=e;const a=yt(),{dateTime:n}=(0,wt.Z)(t),s=(0,kt.Z)(n,"dddd").formatedDate,i=(0,kt.Z)(n,"D").formatedDate,r=(0,kt.Z)(n,"MMMM").formatedDate,l=(0,kt.Z)(n,"HH:mm").formatedDate;return(0,o.jsxs)("div",{className:a.root,children:[(0,o.jsx)(d.Z,{className:a.dayWeek,children:s}),(0,o.jsx)(d.Z,{className:a.day,variant:"h2",children:i}),(0,o.jsx)(d.Z,{className:a.month,children:r.replace("ь","я")}),(0,o.jsx)(d.Z,{className:a.time,children:l})]})};const Ct=(0,x.Z)((e=>({root:{marginRight:10,marginBottom:10,fontFamily:"IBM Plex Sans, Arial, sans-serif",textTransform:"capitalize",[e.breakpoints.between("md","lg")]:{fontSize:17},[e.breakpoints.down("md")]:{fontSize:13,fontWeight:600}}})));var St=e=>{let{text:t}=e;const a=Ct();return(0,o.jsx)(d.Z,{className:a.root,variant:"h4",children:t})};const Zt={success:(0,o.jsx)(D.tmp,{}),error:(0,o.jsx)(D.FBB,{htmlColor:"red"})},Tt=(0,x.Z)((e=>({wrap:{display:"flex",marginRight:5,[e.breakpoints.down("md")]:{marginTop:5}},root:{display:"flex",alignItems:"center",padding:"5px 20px",backgroundColor:e.palette.action.disabledBackground,color:e.palette.action.active,borderRadius:8,[e.breakpoints.between("md","lg")]:{padding:"5px 5px"},[e.breakpoints.down("md")]:{padding:"5px 5px"},"&>span":{[e.breakpoints.down("md")]:{letterSpacing:"-0.6px"}}},icon:{display:"flex",alignItems:"center",marginRight:10,[e.breakpoints.down("lg")]:{"& svg":{width:"18px",height:"18px"}},[e.breakpoints.between("md","lg")]:{marginRight:5},[e.breakpoints.down("md")]:{marginRight:5,"& svg":{fontSize:16}}},text:{color:e.palette.action.active,whiteSpace:"nowrap",[e.breakpoints.between("md","lg")]:{fontSize:11,whiteSpace:"nowrap"},[e.breakpoints.down("md")]:{height:16,fontSize:11}}})));var _t=e=>{let{text:t,icon:a}=e;const n=Tt();return(0,o.jsx)("div",{className:n.wrap,children:(0,o.jsxs)("article",{className:n.root,children:[a&&(0,o.jsx)("div",{className:n.icon,children:Zt[a]}),(0,o.jsx)(d.Z,{className:n.text,variant:"caption",children:t})]})})};const It="/static/img/default_avatar.jpg",Lt=(0,x.Z)((e=>({wrap:{textDecoration:"none"},root:{display:"flex","&:hover":{cursor:"pointer"},[e.breakpoints.down("md")]:{flexDirection:"column",alignItems:"end"}},avatar:{marginRight:15,[e.breakpoints.down("md")]:{marginRight:0,alignSelf:"flex-end"}},title:{color:e.palette.action.active,[e.breakpoints.down("md")]:{display:"none"}},info:{[e.breakpoints.down("md")]:{fontSize:13,textAlign:"right"}},name:{[e.breakpoints.down("md")]:{marginTop:3,fontSize:13,fontWeight:600}}})));var Bt=e=>{let{tutorId:t,pupilId:a,tutorName:n,tutorMiddlename:s,pupilName:i,isPupil:r,tutorAvatar:l=It}=e;const p=Lt(),{t:m}=(0,c.$G)("components.lessons-list"),u="/my_repetitors#".concat(t),h="/pupil/".concat(a),x=r?"".concat(n," ").concat(s):i,b=r?u:h;return(0,o.jsx)("a",{className:p.wrap,href:b,children:(0,o.jsxs)("article",{className:p.root,children:[(0,o.jsx)(ne.Z,{className:p.avatar,src:l,userId:t,size:"medium"}),(0,o.jsxs)("div",{className:p.info,children:[(0,o.jsx)(d.Z,{className:p.title,variant:"caption",children:m(t?"person.tutor":"person.pupil")}),(0,o.jsx)(d.Z,{className:p.name,variant:"subtitle2",children:x})]})]})})};const Dt=(0,x.Z)((e=>({root:{display:"flex",alignItems:"center",margin:"0 auto",color:e.palette.action.active,[e.breakpoints.down("lg")]:{marginBottom:15},[e.breakpoints.down("md")]:{flex:1,justifyContent:"center",margin:0,marginBottom:20,padding:15,textAlign:"center",borderRadius:16}},text:{color:e.palette.action.active,lineHeight:1,fontSize:10,opacity:.6}})));var Rt=e=>{let{icon:t,title:a}=e;const n=Dt(),s=(0,b.Z)(),i=(0,h.Z)(s.breakpoints.down("md"));return(0,o.jsxs)("div",{className:n.root,children:[t&&!i&&(0,o.jsx)(D.o3o,{color:"inherit"}),(0,o.jsx)(d.Z,{className:n.text,variant:"caption",children:a})]})};var Mt=e=>{let{isOverbooking:t=!1,disabled:a=!1,lessonId:n="",cancelPanel:s=!1,lessonCancelId:i="",onClick:r=null}=e;const{t:d}=(0,c.$G)("components.lessons-list"),p=(e=>(0,x.Z)((t=>({btnCancelLesson:{fontSize:12,marginTop:10,fontWeight:500,color:t.palette.action.active,textTransform:"none",border:"1px solid transparent",textAlign:"center","&:hover":{border:e?"1px solid transparent":"1px solid ".concat(t.palette.primary.main),background:"none",color:t.palette.primary.main},[t.breakpoints.down("lg")]:{padding:10,letterSpacing:.3,whiteSpase:"nowrap"},[t.breakpoints.between("md","lg")]:{lineHeight:"14px"},[t.breakpoints.down("md")]:{maxHeight:e?"40px":"50vh",margin:"0 5px",fontSize:e?8:12,lineHeight:1.5,border:"1px solid ".concat(t.palette.primary.main),color:t.palette.primary.main,background:t.palette.action.disabledBackground,borderRadius:16,"&.MuiButtonBase-root":{maxHeight:e?"auto":"50vh"}}}}))))(s)(),u=n?"?lesson_id=".concat(n):"",h="/cancel_lesson/".concat(i).concat(u),b=(0,l.useRouter)();return(0,o.jsx)(m.Z,{className:p.btnCancelLesson,variant:"text",size:"small",disabled:a,onClick:()=>{r&&r(),!t&&s&&b.push(h)},children:d("controls.cancelLessonBtn")})};const At=(0,x.Z)((e=>({toLessonBtn:{fontSize:14,textAlign:"center","&:disabled":{opacity:.3,background:e.palette.primary.main,color:e.palette.background.paper},[e.breakpoints.down("lg")]:{fontSize:12,padding:"10px 22px",whiteSpace:"nowrap"},[e.breakpoints.between("md","lg")]:{fontSize:9,padding:"8px 10px","&.MuiButtonBase-root":{maxHeight:"33px",lineHeight:"14px"}},[e.breakpoints.down("md")]:{height:"100%","&.MuiButtonBase-root":{maxHeight:"none",height:"100%",textAlign:"center",whiteSpace:"inherit"}}}})));var Wt=e=>{let{lessonId:t,isOverbooking:a=!1,eventId:n,isDisabled:s=!1}=e;const{t:i}=(0,c.$G)("components.lessons-list"),r=At();return(0,o.jsx)(m.Z,{className:r.toLessonBtn,size:"small",disabled:s,href:a?"/study/overbooking?eventId=".concat(n):"/lessons/".concat(t),children:i("controls.goToLessonBtn")})};const Pt=(0,x.Z)((e=>({root:{display:"flex",flex:1,flexDirection:"column",justifyContent:"space-between",alignItems:"center"},text:{lineHeight:"16px",textAlign:"center",color:e.palette.action.active},icon:{fontSize:"3.2rem",color:e.palette.action.active}})));var zt=e=>{let{title:t,subtitle:a,date:n}=e;const{t:s}=(0,c.$G)("components.lessons-list"),i=Pt();return(0,o.jsxs)("div",{className:i.root,children:[t&&(0,o.jsx)(d.Z,{className:i.text,variant:"subtitle2",children:t}),(0,o.jsx)(D.wY2,{className:i.icon,fontSize:"large"}),(0,o.jsx)(d.Z,{className:i.text,variant:"caption",children:n?"".concat(s("controls.startLessonDate")," ").concat(n," "):a})]})},Ot=a(75228),Ft=a(11202),Et=a(37969),Ht=a(10076),Gt=a(83992),Yt=a(42908),$t=a(86374);const Vt=(0,x.Z)((e=>({btn:{width:"100%",[e.breakpoints.between("md","lg")]:{fontSize:10,paddingRight:"21px"},"& .MuiButton-endIcon":{marginLeft:0,marginRight:0}},materialsMenuItemText:{display:"block",minWidth:170,fontWeight:500,color:e.palette.text.primary,textDecorationLine:"none",wordWrap:"break-word"},disabled:{color:e.palette.text.disabled,cursor:"default"},disabledMaterial:{color:e.palette.text.disabled,opacity:.2,cursor:"not-allowed",pointerEvents:"none"}}))),Kt=e=>{let{etherpadLink:t,openMaterialsPopover:a}=e;const[n,i]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1),{t:d}=(0,c.$G)("components.lessons-list"),p=Vt();return(0,s.useEffect)((()=>{a&&((async()=>{if(t)try{await Gt.hi.get(t),i(!0)}catch(e){console.error("fetchMaterialsError",e.message)}finally{l(!1)}})().catch(console.error),l(!0))}),[t,a]),t?(0,o.jsx)("a",{className:n?p.materialsMenuItemText:"".concat(p.materialsMenuItemText," ").concat(p.disabledMaterial),href:n?t:"#",target:"_blank",rel:"noopener noreferrer",children:r?"Loading...":d("controls.document")}):null},Ut=e=>{let{lessonId:t,openMaterialsPopover:a,boardType:n,boardLink:i,ziteboardId:r}=e;const{t:l}=(0,c.$G)("components.lessons-list"),[d,p]=(0,s.useState)(!1),m=Vt();return(0,s.useEffect)((()=>{a&&(async()=>{const{roomId:e,roomKey:a}=await(0,Yt.q)(t);e&&a&&p(!0)})().catch(console.error)}),[a]),n===$t.V.EXCALIDRAW?d?(0,o.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:m.materialsMenuItemText,children:l("controls.board")}):(0,o.jsx)("span",{className:(0,Ge.Z)(m.materialsMenuItemText,m.disabled),children:l("controls.boardUnvailable")}):i||r?(0,o.jsx)("a",{className:m.materialsMenuItemText,href:i||"/boards/".concat(r),target:"_blank",rel:"noopener noreferrer",children:l("controls.board")}):(0,o.jsx)("span",{className:(0,Ge.Z)(m.materialsMenuItemText,m.disabled),children:l("controls.boardUnvailable")})},Jt=e=>{let{id:t,title:a}=e;const n=(0,b.Z)(),s=Vt(),i=(0,h.Z)(n.breakpoints.down("md")),r=10,l=16;return(0,o.jsxs)("a",{className:s.materialsMenuItemText,href:"/study/content/trials/".concat(t),target:"_blank",rel:"noopener noreferrer",children:[(0,Ot.Z)(a).substring(0,i?r:l),"..."]})};var qt=e=>{let{trialIds:t,materialNames:a,boardLink:n,ziteboardId:i,etherpadLink:r,lessonId:l,boardType:d}=e;const{t:p}=(0,c.$G)("components.lessons-list"),u=Vt(),[h,x]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),f=e=>{const t=e.currentTarget;g(t),x(!0)},v=()=>{x(!1),g(null)};return(0,o.jsx)(q.Z,{onClickAway:v,children:(0,o.jsxs)("div",{children:[(0,o.jsx)(m.Z,{className:u.btn,variant:"outlined",size:"small",endIcon:h?(0,o.jsx)(D.ART,{}):(0,o.jsx)(D.chj,{}),onClick:f,children:p("controls.materials")}),(()=>{const e=[{elem:(0,o.jsx)(Ut,{boardLink:n,boardType:d,openMaterialsPopover:h,ziteboardId:i,lessonId:l}),key:"board-link"},{elem:(0,o.jsx)(Kt,{openMaterialsPopover:h,etherpadLink:r}),key:"document-link"}];let s=[];(null==t?void 0:t.length)&&a&&(s=Object.keys(a).map(((e,t)=>{const n=a[e]!==e?a[e]:"".concat(p("materials.material_N")," ").concat(t+1);return{elem:(0,o.jsx)(Jt,{id:e,title:n}),key:n}})));const c=[...e,...s];return(0,o.jsx)(Ft.ZP,{open:h,anchorEl:b,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,o.jsx)(Et.Z,{children:c.map((e=>{let{elem:t,key:a}=e;return t&&(0,o.jsx)(Ht.ZP,{button:!0,children:t},a)}))})})})()]})})};const Xt=(0,x.Z)((e=>({root:{display:"flex",justifyContent:"center","&:hover":{cursor:"pointer"},margin:"60px auto"},icon:{color:e.palette.action.active},text:{marginLeft:10,color:e.palette.action.active}})));var Qt=e=>{let{isVisible:t,getScheduledLessons:a,getPastLessons:n}=e;const{t:s}=(0,c.$G)("components.lessons-list"),l=Xt(),p=(0,i.I0)(),m=(0,i.v9)(r.PZ),u=(0,i.v9)(r.qI),h=(0,i.v9)(r.Gt);return(0,o.jsx)(o.Fragment,{children:t&&(0,o.jsxs)("div",{className:l.root,onClick:()=>{p((0,r.nR)(m?jt.gA.PAST:jt.gA.SCHEDULE)),(async(e,t)=>{await e(t)})(m?n:a,m?u:h)},"aria-hidden":"true",role:"presentation",children:[(0,o.jsx)(D.W_K,{className:l.icon}),(0,o.jsx)(d.Z,{className:l.text,variant:"subtitle2",children:s("loadMore")})]})})};const ea=(0,x.Z)((e=>({root:{maxHeight:38,padding:"14px 6px",paddingLeft:20,paddingRight:20,color:e.palette.action.active,textTransform:"none",border:"1px solid transparent","& > span > .MuiButton-startIcon":{marginRight:5},"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:"none",color:e.palette.primary.main},[e.breakpoints.down("lg")]:{fontSize:"11px","& > span > .MuiButton-startIcon > svg":{fontSize:18}}}})));var ta=e=>{let{textBtn:t,icon:a,onClick:n}=e;const s=ea();return(0,o.jsx)(m.Z,{className:s.root,variant:"text",startIcon:a,onClick:n,children:(0,o.jsx)(d.Z,{variant:"subtitle2",color:"inherit",children:t})})},aa=a(69634),na=a(56952),oa=a(6621),sa=a(4288);const ia=(0,x.Z)((e=>({drawer:{"& > .MuiPaper-root":{borderRadius:"20px 20px 0 0",padding:"0 25px"},zIndex:1100},item:{padding:"40px 0","&:hover":{backgroundColor:"transparent"}},icon:{marginRight:17},text:{"& > span":{color:e.palette.action.active}},itemWrap:{"& .MuiDivider-root":{margin:0}}})));var ra=e=>{let{onControlClick:t}=e;const{t:a}=(0,c.$G)("components.lessons-list"),n=ia(),[i,r]=(0,s.useState)(null),l=Boolean(i),d=[{caption:a("tools.pauseEducation"),icon:(0,o.jsx)(D.fpf,{fontSize:"large"}),type:"pauseInSchedulePage"},{caption:a("tools.changeTimeTable"),icon:(0,o.jsx)(D.xtS,{fontSize:"large"}),type:"changeSchedulePage"},{caption:a("tools.changeTutor"),icon:(0,o.jsx)(D.DlQ,{fontSize:"large"}),type:"replaceTutorPage"}],p=e=>()=>t(e);return(0,o.jsxs)("div",{children:[(0,o.jsx)(F.Z,{"aria-label":"more",id:"long-button",ariaControls:"long-menu",ariaExpanded:l.toString(),ariaHaspopup:"true",onClick:e=>{r(e.currentTarget)},children:(0,o.jsx)(aa.Z,{color:"primary"})}),(0,o.jsx)(O.Z,{className:n.drawer,anchor:"bottom",open:l,onClose:()=>{r(null)},children:(0,o.jsx)(na.Z,{children:d.map((e=>{let{caption:t,icon:a,type:s}=e;return(0,o.jsxs)("div",{className:n.itemWrap,children:[(0,o.jsxs)(z.Z,{className:n.item,onClick:p(s),button:!0,disableRipple:!0,children:[(0,o.jsx)(oa.Z,{className:n.icon,children:a}),(0,o.jsx)(sa.Z,{className:n.text,color:"inherit",children:t})]},t),(0,o.jsx)(Ce.Z,{})]})}))})})]})};const la=(0,x.Z)((()=>({listControls:{display:"flex",justifyContent:"space-between",margin:"24px auto 25px",padding:"0 30px","& .MuiButton-startIcon":{marginRight:8}}})));var ca=e=>{let{onControlClick:t}=e;const{t:a}=(0,c.$G)("components.lessons-list"),n=la(),s=e=>()=>t(e);return(0,o.jsxs)("section",{className:n.listControls,children:[(0,o.jsx)(ta,{textBtn:a("tools.pauseEducation"),icon:(0,o.jsx)(D.fpf,{}),onClick:s("pauseInSchedulePage")}),(0,o.jsx)(ta,{textBtn:a("tools.changeTimeTable"),icon:(0,o.jsx)(D.xtS,{fontSize:"small"}),onClick:s("changeSchedulePage")}),(0,o.jsx)(ta,{href:"/tutor",textBtn:"Заменить преподавателя",icon:(0,o.jsx)(D.DlQ,{}),onClick:s("replaceTutorPage")})]})},da=a(62101),pa=a(86107);const ma=(0,x.Z)((e=>({programWrapper:{display:"flex",marginTop:20,flexDirection:"column",[e.breakpoints.down("lg")]:{flexDirection:"column",marginTop:15}},themeWrapper:{minWidth:190,"&:not(:last-child)":{marginRight:10},[e.breakpoints.down("lg")]:{width:"100%",margin:0}},moduleTitle:{color:e.palette.text.disabled,marginRight:5},themeTitle:{color:e.palette.text.primary,[e.breakpoints.down("lg")]:{fontWeight:400}}})));var ua=e=>{let{theme:t,module:a,percents:n}=e;const s=ma(),{t:i}=(0,c.$G)("components.lessons-list");return(0,o.jsxs)("div",{className:s.programWrapper,children:[(0,o.jsxs)("div",{className:s.themeWrapper,children:[(0,o.jsx)(d.Z,{variant:"caption",className:s.moduleTitle,children:"".concat(i("lessons.module"),":")}),(0,o.jsx)(d.Z,{variant:"caption",className:s.themeTitle,children:a})]}),(0,o.jsxs)("div",{className:s.themeWrapper,children:[(0,o.jsx)(d.Z,{variant:"caption",className:s.moduleTitle,children:"".concat(t,":")}),(0,o.jsx)(d.Z,{variant:"caption",className:s.themeTitle,children:i("lessons.percents_complete",{percents:n})})]})]})};const ha=(e,t)=>({finished:t("statusLesson.finished"),new:t("statusLesson.finished"),pupil_no_show:t("statusLesson.pupil_no_show"),tutor_no_show:t("statusLesson.tutor_no_show")}[e]||t("statusLesson.canceled"));var xa=(0,s.forwardRef)(((e,t)=>{let{lesson:a,isPupil:n,cancelOverbookingLesson:l}=e;const p=(0,i.v9)(r.PZ),[u,g]=(0,s.useState)(!1),{t:f}=(0,c.$G)("components.lessons-list"),v=(0,b.Z)(),j=(0,h.Z)(v.breakpoints.down("md")),[w,k]=(0,s.useState)(!1),{startTime:y,scheduledTime:C,humanSubject:S,tutorName:Z,tutorMiddlename:T,state:_,duration:I,lessonId:L,isIntro:B,tutorId:R,pupilId:M,pupilName:A,trialIds:W,materialNames:P,boardLink:z,ziteboardId:O,etherpadLink:F,lessonCancelId:E,eventId:H,showCancelLink:G,showCancelShiftLink:Y,journal_filled:$,shift_confirmed:V,lowBalanceHint:K,tutorAvatar:U,type:J,themeTitle:q,moduleTitle:X,programId:Q,themeCompletedOn:ee,board_type:te}=a,ae="new"===_,ne="overbooking"===J,oe=Boolean(z)||Boolean(null==W?void 0:W.length)||Boolean(null==P?void 0:P.length)||O||F,se=Q,ie=(()=>{switch(!0){case Y:return jt.uL.WAITING_CONFIRM;case V:return jt.uL.SHIFTED;default:return jt.uL.READY}})(),re=p||ie!==jt.uL.READY,le=((e,t,a,n)=>(0,x.Z)((o=>({toggleControlBtn:{display:"flex",justifyContent:"space-between",alignItems:"center"},lesson:{display:"flex",minHeight:172,margin:"20px 0",borderRadius:16,transition:"500ms all ease",[o.breakpoints.down("md")]:{backgroundColor:"transparent",transform:n?"translateX(calc(38px - 100%))":"none"}},date:{position:"relative",borderRadius:16,background:o.palette.background.paper,boxShadow:"0px 0px 5px rgba(18, 17, 32, 0.05)","&::before":{position:"absolute",content:"''",top:16,right:"-0.5px",height:"calc(100% - 32px)",borderRight:"1px dashed #e6e6e6"},[o.breakpoints.between("md","lg")]:{},[o.breakpoints.down("md")]:{"&::before":{display:"none"}}},content:{display:"flex",background:o.palette.background.paper,boxShadow:"0px 0px 5px rgba(18, 17, 32, 0.05)",flexDirection:"column",[o.breakpoints.up("lg")]:{flexDirection:"column",justifyContent:"space-between",flex:1,padding:"32px 20px",borderRadius:"16px 0 0 16px"},[o.breakpoints.between("md","lg")]:{padding:"26px 20px",borderRadius:"16px 0 0 16px",maxWidth:"376px"},[o.breakpoints.down("md")]:{minWidth:"100%",padding:"20px 10px 20px 20px",borderRadius:16,flexDirection:"row",flexWrap:"wrap"}},controls:{display:"flex",flexDirection:"column",justifyContent:"space-between",[o.breakpoints.up("lg")]:{width:285,padding:e?"34px 48px":"20px",background:(0,He.Fq)(o.palette.primary.light,.3),borderLeft:"1px solid ".concat((0,He.Fq)(o.palette.primary.main,.1)),borderRadius:"0 16px 16px 0",boxShadow:"0px 0px 5px rgba(18, 17, 32, 0.05)"},[o.breakpoints.between("md","lg")]:{flex:"auto",justifyContent:"space-around",maxWidth:150,padding:15,backgroundColor:(0,He.Fq)(o.palette.primary.light,.3),borderRadius:"0 16px 16px 0"},[o.breakpoints.down("md")]:{minWidth:"calc(100% - 58px)",marginLeft:20,borderRadius:16,padding:15,background:a?o.palette.action.disabledBackground:"transparent","& a":{margin:"0 0 0 5px"}}},subjectStatus:{[o.breakpoints.up("lg")]:{display:"flex",alignItems:"center",justifyContent:"space-between"},[o.breakpoints.between("md","lg")]:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%",marginBottom:15},[o.breakpoints.down("md")]:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",width:"50%"}},scheduleStatusLesson:{display:"flex",justifyContent:"space-between",width:"50%",[o.breakpoints.between("md","lg")]:{width:"auto"},[o.breakpoints.down("md")]:{width:"auto"}},person:{[o.breakpoints.between("md","lg")]:{flex:1},[o.breakpoints.down("md")]:{flex:1,marginRight:10}},controlBtnMobileWaitingStatus:{marginRight:-10},controlsReadyStatusWrap:{display:"flex",flexDirection:"column",justifyContent:"space-between",[o.breakpoints.down("md")]:{flexDirection:"row",height:"100%"}},controlsReadyStatus:{position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",height:132,[o.breakpoints.between("md","lg")]:{justifyContent:"space-between"},[o.breakpoints.down("md")]:{height:"auto",width:"100%"}},cancelPanel:{position:"absolute",top:t?0:"calc(100% + 20px)",width:"100%",height:"100%",background:"#f6f6fb",transition:"200ms all ease",visibility:t?"visible":"hidden",[o.breakpoints.down("md")]:{background:a?o.palette.action.disabledBackground:o.palette.background.default}},cancelPanelText:{fontSize:12,lineHeight:"16px",color:o.palette.text.secondary,[o.breakpoints.between("md","lg")]:{fontSize:10,lineHeight:"12px"}},shouldWeTry:{fontSize:12,textTransform:"initial","&.MuiButtonBase-root":{maxHeight:"34px",lineHeight:"14px"},[o.breakpoints.between("md","lg")]:{fontSize:10,padding:"8px 10px","&.MuiButtonBase-root":{maxHeight:"33px",lineHeight:"14px"}},[o.breakpoints.down("md")]:{width:"50%","&.MuiButtonBase-root":{maxHeight:"40px",lineHeight:"14px"}}},controlsForCancelPanel:{marginTop:10,[o.breakpoints.down("md")]:{display:"flex","& a":{fontSize:12,lineHeight:"14px"}}},wrapperInfo:{display:"flex",justifyContent:"center",[o.breakpoints.up("md")]:{marginBottom:10}}}))))(p,u,re,w)(),ce=(0,kt.Z)((0,wt.Z)(C).dateTime,"DD MMMM, HH:mm",!0),de=ne?(0,pa.Z)(y*N.s_)>=da.PJ:!L,pe=()=>{k(!w)},me=()=>{u&&g(!1)},ue=e=>{const t=ne&&(0,pa.Z)(y*N.s_)<=0;return(0,o.jsxs)("div",{className:le.controlsReadyStatusWrap,children:[(0,o.jsxs)("div",{className:le.controlsReadyStatus,children:[e,!j&&(0,o.jsx)(Wt,{isDisabled:de,lessonId:L,isOverbooking:ne,eventId:H}),G&&(0,o.jsx)(Mt,{disabled:t,lessonId:L,lessonCancelId:E,onClick:()=>g(!0)}),(0,o.jsxs)("div",{className:le.cancelPanel,children:[(0,o.jsx)(d.Z,{className:le.cancelPanelText,variant:"h6",children:f(ce.isLessThanEightHours?"controls.recomendationsLessThan8":K?"controls.lowBalance":"controls.youWantToCancel")}),(0,o.jsxs)("div",{className:le.controlsForCancelPanel,children:[(0,o.jsx)(m.Z,{className:le.shouldWeTry,onClick:me,children:ce.isLessThanEightHours?f("controls.yesToSpend"):f("controls.noToSpend")}),G&&(0,o.jsx)(Mt,{cancelPanel:!0,isOverbooking:ne,lessonId:L,lessonCancelId:E,onClick:ne?()=>l(H):null})]})]})]}),j&&!u&&(0,o.jsx)(Wt,{isDisabled:de,lessonId:L,isOverbooking:ne,eventId:H})]})};return(0,o.jsxs)("article",{className:le.lesson,ref:t,children:[(0,o.jsx)(o.Fragment,{children:j?"":(0,o.jsx)("div",{className:le.date,children:(0,o.jsx)(Nt,{scheduledTime:C})})}),(0,o.jsxs)("div",{className:le.content,children:[(0,o.jsxs)("div",{className:le.subjectStatus,children:[j&&(0,o.jsx)(Nt,{scheduledTime:C}),(0,o.jsx)(St,{text:S}),p?ae?(0,o.jsx)(_t,{text:"".concat(I," ").concat(f("statusLesson.min"))}):(0,o.jsx)(_t,{icon:"finished"===_?"success":"error",text:ha(_,f)}):(0,o.jsxs)("div",{className:le.scheduleStatusLesson,children:[B&&(0,o.jsx)(_t,{text:f("statusLesson.intro")}),(0,o.jsx)(_t,{text:"".concat(I," ").concat(f("statusLesson.min"))})]})]}),!ne&&(0,o.jsx)("div",{className:le.person,children:(0,o.jsx)(Bt,{tutorId:R,pupilId:M,tutorName:Z,pupilName:A,tutorMiddlename:T,isPupil:n,tutorAvatar:U})}),j&&(0,o.jsxs)("div",{className:le.toggleControlBtn,children:[ie===jt.uL.WAITING_CONFIRM&&(0,o.jsx)(D.o3o,{className:le.controlBtnMobileWaitingStatus}),w?(0,o.jsx)(D.Y4O,{onClick:pe,color:"primary"}):(0,o.jsx)(D.LZ3,{onClick:pe,color:"primary"})]}),se&&(0,o.jsx)(ua,{module:X,theme:q,percents:ee})]}),(0,o.jsx)("div",{className:le.controls,children:p?ae?(0,o.jsx)(Wt,{isDisabled:de,lessonId:L,isOverbooking:ne,eventId:H}):(0,o.jsxs)(o.Fragment,{children:[!oe&&(0,o.jsx)(Rt,{title:f("controls.no_materials")}),oe&&(0,o.jsx)(qt,{trialIds:W,materialNames:P,boardLink:z,ziteboardId:O,etherpadLink:F,lessonId:L,boardType:te})]}):{READY:ue(ce.isExpired?(0,o.jsx)("div",{className:le.wrapperInfo,children:(0,o.jsx)(Rt,{title:"Урок сейчас идет"})}):(0,o.jsx)(o.Fragment,{children:ce.timeToLeftForStart?(0,o.jsx)(Rt,{title:"Начало ".concat(ce.timeToLeftForStart),icon:!0}):null})),WAITING_CONFIRM:(0,o.jsx)(zt,{title:f("controls.statusShiftMessageSent"),subtitle:f("controls.statusWaitingConfirmDate")}),SHIFTED:ue((0,o.jsx)("div",{className:le.wrapperInfo,children:(0,o.jsx)(Rt,{title:"Урок перенесен преподавателем"})}))}[ie]})]})}));const ba=(0,x.Z)((e=>({lessonsListView:{[e.breakpoints.down("md")]:{overflow:"hidden"}},title:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15,marginTop:10},noLessonsWrap:{display:"flex",justifyContent:"center",height:"100%",paddingTop:50,paddingBottom:50,textAlign:"center"},noLessons:{height:120,display:"flex",flexDirection:"column",justifyContent:"space-between"},noLessonsBtn:{[e.breakpoints.down("md")]:{fontSize:14,padding:"14px 20px"}},errorModal:{width:"fit-content",textAlign:"center"},closeModalButton:{marginTop:20},loaderBox:{height:124,display:"flex",justifyContent:"center",alignItems:"center"}}))),ga={pause:"pauseInSchedulePage",change:"changeSchedulePage",replace:"replaceTutorPage"};var fa=e=>{let{getScheduledLessons:t,getPastLessons:a,getInitialLessons:n,isPupil:x,cancelOverbookingLesson:g}=e;const v=(0,i.I0)(),j=ba(),{asPath:w}=(0,l.useRouter)(),k=(0,i.v9)(r.PZ),y=(0,i.v9)(r.ZB),C=(0,i.v9)(r.p1),S=(0,i.v9)(r._f),Z=(0,i.v9)(r.kS),T=(0,i.v9)(r.I9),_=k?C:y,{t:I}=(0,c.$G)(["components.lessons-list","common"]),L=(0,i.v9)(ht.dy),B=(0,i.v9)(r.NH),D=(0,b.Z)(),R=(0,h.Z)(D.breakpoints.down("md")),M=w.split("&")[1],[A,W]=(0,s.useState)(ga[M]||""),P=()=>W(""),[z,O]=(0,s.useState)(!1),F=(0,s.useRef)(null),[H,G]=(0,s.useState)(_.length);(0,s.useEffect)((()=>{const e=document.createElement("script");return e.src="https://api.flocktory.com/v2/loader.js?site_id=3821",e.async=!0,document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),(0,s.useEffect)((()=>{if(sessionStorage.getItem(xt.Ts)===xt.jJ.LESSON_LIST){let e=sessionStorage.getItem(xt.t8);e=e?JSON.parse(e):{},window.flocktory=window.flocktory||[],window.flocktory.push(["postcheckout",{user:{email:L.email,name:L.name},order:{id:(null==e?void 0:e.id)||"-",price:(null==e?void 0:e.packagesCount)||"-"},spot:"1"}]),O(!0),sessionStorage.removeItem(xt.Ts),sessionStorage.removeItem(xt.t8)}}),[]),(0,s.useEffect)((()=>{_||n()}),[w]),(0,s.useEffect)((()=>{w.split("#")[1]===bt.Z.PAST?v((0,r.r7)(!0)):v((0,r.r7)(!1)),document.body.style.position="relative"}),[]),(0,s.useEffect)((()=>{_.length>H&&F.current&&F.current.scrollIntoView({behavior:"smooth"}),G(_.length)}),[_]);const Y=Z&&k||S&&!k,$=null==y?void 0:y.filter((e=>!e.isIntro)),V=null==$?void 0:$.some((e=>f()().isBefore(f()(e.startTime*N.default.MS_IN_SECOND)))),K=Boolean(null==$?void 0:$.length)&&!k&&V,U=R&&K,J=!R&&K,q=()=>{v((0,r._K)(!1))},X={pauseInSchedulePage:(0,o.jsx)(ut,{onClose:P}),changeSchedulePage:(0,o.jsx)(we,{onClose:P}),replaceTutorPage:(0,o.jsx)(at,{onClose:P})};return(0,o.jsxs)("main",{className:j.lessonsListView,children:[(0,o.jsx)(p.Z,{open:T,onClose:q,children:(0,o.jsxs)("div",{className:j.errorModal,children:[(0,o.jsx)(d.Z,{variant:"h4",color:"error",children:I("lessons.cancelLessonError",{ns:"common"})}),(0,o.jsx)(m.Z,{className:j.closeModalButton,variant:"contained",onClick:q,children:I("lessons.close",{ns:"common"})})]})}),(0,o.jsxs)("div",{className:j.title,children:[(0,o.jsx)(ft,{}),U&&(0,o.jsx)(ra,{onControlClick:W})]}),(null==C?void 0:C.length)?(0,o.jsx)(vt,{}):"",J&&(0,o.jsx)(ca,{onControlClick:W}),(0,o.jsx)(E,{open:Boolean(A),onDrawerClose:P,children:X[A]}),B||(null==y?void 0:y.length)||k?"":(0,o.jsx)("div",{className:j.noLessonsWrap,children:(0,o.jsx)("div",{className:j.noLessons,children:(0,o.jsx)(d.Z,{variant:"subtitle2",children:I("noLessons.noScheduled")})})}),null==_?void 0:_.map(((e,t)=>(0,o.jsx)(xa,{lesson:e,isPupil:x,cancelOverbookingLesson:g,ref:t===H?F:null},e.eventId))),B?(0,o.jsx)("div",{className:j.loaderBox,children:(0,o.jsx)(u.Z,{className:"loader"})}):(0,o.jsx)(Qt,{getPastLessons:a,getScheduledLessons:t,isVisible:!B&&Y}),z&&(0,o.jsx)("div",{className:"i-flocktory","data-fl-action":"exchange","data-fl-spot":"1","data-fl-user-email":L.email||"xname@flocktory.com",...L.name&&{"data-fl-user-name":"".concat(L.name," ").concat(L.surname||"").trim()}})]})};class va extends s.PureComponent{render(){const{isPupil:e,getScheduledLessons:t,getPastLessons:a,getInitialLessons:n,cancelOverbookingLesson:s}=this.props;return(0,o.jsx)(fa,{isPupil:e,getScheduledLessons:t,getPastLessons:a,getInitialLessons:n,cancelOverbookingLesson:s})}}const ja={getInitialLessons:r.em,getScheduledLessons:r.in,getPastLessons:r.uG,cancelOverbookingLesson:r.od};var wa=(0,i.$j)((e=>({isPupil:"pupil"===e.userAppBar.user.role})),ja)(va),ka=!0,ya=(0,n.Z)(wa)},87017:function(e,t,a){"use strict";a.d(t,{ZP:function(){return l},np:function(){return n.Z}});a(67294),a(2664),a(96147);var n=a(81789),o=a(15832),s=a(58104),i=a.n(s),r=a(34155);var l=class{constructor(e,t={}){var a,n,s=this;this.debug=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];const o=s.getLogData({msgKey:e,logLevel:"debug",data:a});console.debug(o),s.logger.debug(o)},this.info=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];const o=s.getLogData({msgKey:e,logLevel:"info",data:a});s.logger.info(o)},this.warn=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];const o=s.getLogData({msgKey:e,logLevel:"warn",data:a});s.logger.warn(o)},this.error=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];const o=s.getLogData({msgKey:e,logLevel:"error",data:a});s.logger.error(o)},this.getLogData=e=>{let{msgKey:t,logLevel:a,data:n}=e;return{logLevel:a,msgKey:t,data:JSON.stringify(n||{}),user:this.userData||{},userAgent:this.deviceData,url:this.isBrowser?window.location.href:null,timestamp:Date.now()}},this.pageName=e,this.userData=t,this.isBrowser=!0,this.deviceData={userAgent:this.isBrowser?window.navigator.userAgent:null},this.host=(null===(a=r.env)||void 0===a?void 0:a.LOKI_HOST)||window.location.origin,this.loggerMock={debug:e=>{},info:e=>{},warn:e=>{},error:e=>{}},this.loggerOptions={transports:[new(i())({host:this.host,labels:{host:this.isBrowser?window.location.origin:"",contour:r.env.CONTOUR,group:"front",page:this.pageName||"",env:this.isBrowser?"browser":"nodejs"},format:o.format.json(),interval:.3})]},this.logger=null!==(n=r.env)&&void 0!==n||void 0?(0,o.createLogger)(this.loggerOptions):this.loggerMock}}},81789:function(e,t,a){"use strict";a.d(t,{s:function(){return l}});var n=a(85893),o=a(67294),s=a(2664),i=a(87017),r=a(96147);const l=o.createContext({}),c=(0,s.AS)(l),d=(0,s.gR)(l);t.Z=(e,t)=>a=>l=>{const p=t?c():(0,s.I0)(),m=t?d(r.dy):(0,s.v9)(r.dy),u={id:null==l?void 0:l.userId,role:null==l?void 0:l.role},[h,x]=(0,o.useState)(new i.ZP(e,u));return(0,o.useEffect)((()=>{p(t?(0,r.jo)():(0,r.Hp)())}),[]),(0,o.useEffect)((()=>{(null==m?void 0:m.id)&&x(new i.ZP(e||window.location.pathname,m))}),[m]),(0,n.jsx)(a,{logger:h,...l})}},6588:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(85893),o=a(67294),s=a(92022),i=a(53626);var r=(e,t,a)=>{let n=0;if(!t||0===t.length)return a;for(let e=0;e<t.length;e++)n+=t.charCodeAt(e);return e[n%e.length]};var l,c=e=>{const t=e.split(" ");let a="";for(let e=0;e<2;e++){const n=t[e];if(!n)break;a+=n[0]}return a};!function(e){e[e.large=24]="large",e[e.medium=22]="medium",e[e.small=22]="small",e[e.extraSmall=12]="extraSmall"}(l||(l={}));const d=e=>{let{size:t="large",className:a,onClick:o,isGray:d,children:p,userId:m=null,alt:u,...h}=e;const x=(e=>(0,i.Z)((t=>{const a=[t.palette.secondary.main,t.palette.success.main,t.palette.warning.dark,t.palette.info.main],n=t.components.MuiAvatar.styleOverrides,o={"&::after":{cursor:"pointer",content:'""',position:"absolute",border:"1px solid",borderRadius:"100%",borderColor:t.palette.primary.main,width:t.components.MuiAvatar.styleOverrides[e.size].width,height:t.components.MuiAvatar.styleOverrides[e.size].height,boxSizing:"border-box"}};return{root:{width:t.components.MuiAvatar.styleOverrides[e.size].width,height:t.components.MuiAvatar.styleOverrides[e.size].height,"&:hover":e.onClick?o:"",fontWeight:t.typography.fontWeightBold,fontFamily:"Nunito, Arial, sans-serif",fontSize:l[e.size],backgroundColor:e.isGray?t.components.MuiAvatar.styleOverrides.root:r(a,e.userId,n)}}})))({size:t,onClick:o,isGray:d,userId:m})();return(0,n.jsx)(s.Z,{className:"".concat(x.root," ").concat(a),onClick:o,alt:u,...h,children:p&&0!==p.length?(0,n.jsx)("div",{children:c(p)}):void 0})};var p=(0,o.memo)(d)},29523:function(e,t,a){"use strict";a.d(t,{Z:function(){return n.Z}});var n=a(6588)},78729:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(85893),o=a(67294),s=a(62191),i=a(58377);const r=(0,o.forwardRef)(((e,t)=>{let{children:a,color:o="default",colorVariant:r="main",...l}=e;const c=(0,i.Z)((e=>({root:{"&.MuiPaper-root":{color:e.palette[o].contrastText,background:e.palette[o][r],"&.MuiPaper-elevation1":{boxShadow:e.palette[o].shadow}}}})))(s.Z);return(0,n.jsx)(c,{ref:t,elevation:1,square:!1,color:o,...l,children:a})}));var l=(0,o.memo)(r)},76426:function(e,t,a){"use strict";var n=a(27484),o=a.n(n),s=a(28734),i=a.n(s),r=a(7124),l=a.n(r),c=a(84110),d=a.n(c),p=a(29387),m=a.n(p),u=a(70178),h=a.n(u);a(70600);o().extend(h()),o().extend(m()),o().extend(i()),o().extend(d()),o().extend(l()),o().locale("ru"),t.Z=(e,t,a)=>{const n=Intl.DateTimeFormat().resolvedOptions().timeZone,s=o()(e).tz(n),i=s.diff(o()(),"hour",!0)<0,r=s.diff(o()(),"hour")<8,l=e=>{if("минута"===e)return"минуту";if(e.includes("минут")){const e=s.fromNow(!0).split(" ")[0];if(e%10==1&&11!==Number(e))return"".concat(e," минуту")}return e};if(s.isValid()){const e=s.format(t),n=s.isToday()?"(Сегодня)":"(Через ".concat(s.fromNow(!0),")");return{full:"".concat(e," ").concat(a?n:""),relativeTime:s.isToday()?"Сегодня":"через ".concat(s.fromNow(!0)),timeToLeftForStart:!i&&r?"через ".concat(l(s.fromNow(!0))):"",formatedDate:e,isLessThanEightHours:r,isExpired:i}}return"Ошибка даты :("}},86107:function(e,t,a){"use strict";var n=a(62704);t.Z=e=>{const t=(0,n.Z)();return(0,n.Z)(e).diff(t,"minute")}},32595:function(){}},function(e){e.O(0,[7152,3626,7859,1908,4890,4701,3997,1664,8217,1174,4835,2445,4045,158,6647,6656,9039,6743,6192,392,891,3875,5524,4466,90,9888,2307,698,8986,5006,9,6716,2888,9774,179],(function(){return t=3894,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=lessons-8bf7626103bf9936.js.map