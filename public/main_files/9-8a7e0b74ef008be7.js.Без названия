"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{97406:function(e,t,n){n.d(t,{Av:function(){return l},GK:function(){return i},Nl:function(){return c},Vl:function(){return r},Xs:function(){return s}});var o=n(83992);const a="/api/content/blocks",r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"test",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{limit:200,offset:0,subject:""};const{limit:r,offset:s,subject:i}=n,c="?limit=".concat(r,"&offset=").concat(s,"&type=").concat(e,"&subject=").concat(i);return(await o.hi.get("".concat(a).concat(t?"/".concat(t):"").concat(c))).data.payload},s=async e=>(await o.hi.post(a,e)).data.payload,i=async(e,t)=>{const n="".concat(a,"/").concat(e);return(await o.hi.patch(n,t)).data.payload},c=async e=>{const t="".concat(a,"/").concat(e);return(await o.hi.delete(t)).data.payload},l=async(e,t)=>{const{search:n}=window.location,a=new URLSearchParams(n).get("offset")||t,r="".concat("/api/v2/library/blocks","?").concat(t?"":n,"&for_pupils=true&title=").concat(e,"&offset=").concat(a?t:0,"&with_count=true");return(await o.hi.get(r)).data.payload}},20768:function(e,t,n){n.d(t,{k:function(){return a}});var o=n(83992);const a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/api/content/files";const n=new FormData;n.append("file",e[0]);return(await o.hi.post(t,n,{headers:{"Content-Type":"multipart/form-data"}})).data}},11500:function(e,t,n){n.d(t,{DD:function(){return c},Fy:function(){return u},H$:function(){return d},TQ:function(){return l},Vk:function(){return i},Yr:function(){return p},bh:function(){return s}});var o=n(83992);const a="/api/v2/lessons",r="/api/v2/homeworks",s=async e=>(await o.hi.get("".concat(a,"/").concat(e,"/homework"))).data.payload,i=async(e,t,n,r)=>(await o.hi.post("".concat(a,"/").concat(e,"/homework"),{contentId:t,homeworkType:n,tutorComment:r})).data.payload,c=(e,t,n,r)=>o.hi.patch("".concat(a,"/").concat(e,"/homework"),{contentId:t,tutorComment:n,homeworkType:r}),l=e=>o.hi.post("".concat(a,"/").concat(e,"/send_homework")),u=async e=>(await o.hi.get("".concat(r).concat(e.length?"?subjects=".concat(e):""))).data.payload,d=async e=>(await o.hi.post("".concat(a,"/").concat(e,"/start_homework"))).data.payload,p=(e,t,n)=>o.hi.post("".concat(a,"/").concat(e,"/custom_solution"),{pupilComment:t,pupilFiles:n})},13272:function(e,t,n){n.d(t,{Bg:function(){return h},Bp:function(){return y},Hn:function(){return S},Nx:function(){return m},PX:function(){return u},S1:function(){return s},U5:function(){return _},VG:function(){return T},_P:function(){return f},bc:function(){return p},h9:function(){return I},lD:function(){return g},m1:function(){return d},pK:function(){return l},rv:function(){return c},uG:function(){return i}});var o=n(83992);const a="/api/v2/lessons",r="api/v2/vox",s=async e=>(await o.hi.get("".concat(a,"/").concat(e,"/event"))).data.payload,i=async e=>(await o.hi.get("".concat(a,"/").concat(e,"/resources"))).data.payload,c=async(e,t,n,r)=>(await o.hi.get("".concat(a,"/").concat(e,"/pupil_program"),{params:{pupil_id:t,subject:n,tutor_qualification:r}})).data.payload,l=async(e,t,n)=>(await o.hi.get("".concat(a,"/").concat(e,"/pupil_balance"),{params:{pupil_id:t,subject:n}})).data.payload,u=async(e,t)=>(await o.hi.get("".concat(a,"/chat"),{params:{pupil_id:e,tutor_id:t}})).data.payload,d=async()=>(await o.hi.get("".concat(a,"/training_lesson"))).data.payload,p=async e=>(await o.hi.post("/api/v2/extension_lessons",e)).data,m=async e=>(await o.hi.post("".concat(a,"/").concat(e,"/etherpad"))).data.payload,f=(e,t)=>o.hi.post("".concat(a,"/").concat(e,"/tech_issue"),{event:t}),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await o.hi.get("/api/v2/me/ok/auth_user",{params:{expired:e}})).data.payload},g=async(e,t)=>(await o.hi.get("".concat(a,"/").concat(e,"/ok/join_link"),{params:{deviceId:t}})).data.payload,y=async e=>(await o.hi.get("".concat(a,"/").concat(e,"/ok/start_record"))).data.payload,I=async e=>(await o.hi.get("".concat(r,"/registration"),{params:{user_id:e}})).data.payload,S=async(e,t)=>(await o.hi.get("".concat(r,"/onetime_token"),{params:{user_id:e,key:t}})).data.payload,T=async e=>{try{return(await o.hi.get("".concat(a,"/").concat(e,"/ok/stop_record"))).data.payload}catch(e){console.log("Error while stoping recording video")}},_=async e=>(await o.hi.get("api/v2/current_provider/".concat(e))).data.payload},77029:function(e,t,n){n.d(t,{U2:function(){return s},r$:function(){return c},v_:function(){return i}});var o=n(83992),a=n(67195);const r="/api/content/sections",s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=r;e&&(n+="/".concat(e)),t&&(n+="?".concat((0,a.Z)(t)));return(await o.hi.get(n)).data.payload},i=async e=>{try{return(await o.hi.post(r,e)).data.payload}catch(e){console.error(e.message,"sectionsApi")}},c=async(e,t)=>(await o.hi.patch("".concat(r,"/").concat(e),t)).data.payload},32011:function(e,t,n){var o,a,r;n.d(t,{Dv:function(){return m},GJ:function(){return N},HW:function(){return R},Iw:function(){return M},JD:function(){return g},JL:function(){return A},QK:function(){return I},Qr:function(){return c},T7:function(){return H},Td:function(){return L},UJ:function(){return O},UK:function(){return D},WT:function(){return v},bF:function(){return r},d9:function(){return T},eY:function(){return u},fC:function(){return E},g1:function(){return C},gB:function(){return l},hY:function(){return i},jd:function(){return _},k7:function(){return a},ko:function(){return S},mG:function(){return d},mI:function(){return s},oI:function(){return h},oo:function(){return p},p3:function(){return y},pQ:function(){return P},pU:function(){return o},qK:function(){return w},ry:function(){return U},tj:function(){return b},wt:function(){return k},yw:function(){return f}}),function(e){e.AUDIO="audio",e.CAMERA="camera",e.AUDIO_AND_CAMERA="audio_and_camera"}(o||(o={})),function(e){e[e.CHROME=110]="CHROME",e[e.FIREFOX=120]="FIREFOX",e[e.SAFARI=13]="SAFARI",e[e.SAFARIIOS=16]="SAFARIIOS"}(a||(a={})),function(e){e.LOADING="loading",e.SUCCESS="success",e.ERROR="error"}(r||(r={}));const s=60,i=1e3,c=30,l="volume-meter",u=2e3;var d,p,m,f,h,g,y,I;!function(e){e.SUCCESS="success",e.NO_PERMISSION="no_permission",e.NO_PERMISSION_MOBILE="no_permission_mobile",e.NO_READABLE="no_readable",e.ERROR="error"}(d||(d={})),function(e){e.SUCCESS="success",e.NO_SOUND="no_sound",e.NO_PERMISSION="no_permission",e.NO_PERMISSION_MOBILE="no_permission_mobile",e.NO_READABLE="no_readable",e.ERROR="error"}(p||(p={})),function(e){e.OFF="off",e.ON="on",e.ERROR="error"}(m||(m={})),function(e){e[e.MEDIUM=6]="MEDIUM",e[e.GOOD=10]="GOOD"}(f||(f={})),function(e){e[e.MEDIUM=6]="MEDIUM",e[e.GOOD=10]="GOOD"}(h||(h={})),function(e){e[e.MEDIUM=80]="MEDIUM",e[e.GOOD=60]="GOOD"}(g||(g={})),function(e){e.DOWNLOAD="download",e.UPLOAD="upload",e.PING="ping"}(y||(y={})),function(e){e.BAD="bad",e.MEDIUM="medium",e.OK="ok"}(I||(I={}));const S=4995374,T="a",_=8,O="00000000000000000000000000000000",w=10,b="https://tetrika-school.ru/s3/static/img/big_img_for_speed_test.jpg",E=100,A=1024,k=1024,v=1,C="second",P=1,R=4;var N;!function(e){e.OK="ok",e.ERROR="err"}(N||(N={}));const D=["audio","video","browser"];var L;!function(e){e.CHROME_MIC_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/9cdfccaf-6b43-4456-8d37-4304b47a273c",e.CHROME_CAM_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/36c5c5e5-0a16-452a-a179-c0908bc69044",e.CHROME_MIC_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/0b04f9fd-5288-4789-bd83-fdb90436d191",e.CHROME_CAM_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/6b21dc35-027b-43d9-90ff-abd7f3a3df5c",e.FIREFOX_MIC_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/ddcb3515-4407-4760-808d-01c869fc9092",e.FIREFOX_CAM_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/cfba3f50-c8dd-4675-a2de-50c7331c878e",e.FIREFOX_MIC_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/2ab359ea-3843-4924-b5c4-e718d22906b4",e.FIREFOX_CAM_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/15d0dcaa-0369-54cd-b905-d300c9b3de39",e.OPERA_MIC_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/c5c0f5b3-36e7-588f-b49c-b2c6ac198920",e.OPERA_CAM_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/74f858a3-227f-5c22-953f-01a743ec07b2",e.OPERA_MIC_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/29d1a9a6-b4c8-58eb-85b7-32985955485a",e.OPERA_CAM_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/b4b4295b-dea3-54ad-98a8-728934ca25c5",e.SAFARI_MIC="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/3365fb19-6b01-4949-bb17-f0b3d66ee739",e.SAFARI_CAM="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/219358d0-a6cb-43e0-b50d-a748476d6c75",e.YANDEX_MIC_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/a50d518f-7210-5dce-91f2-840010275847",e.YANDEX_CAM_WINDOWS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/b450fa61-076c-5804-9c38-203537b8f9af",e.YANDEX_MIC_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/4d814724-6bcb-5179-9adb-358943ec4d40",e.YANDEX_CAM_MACOS="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/5989c172-d6e8-5a4e-b4e6-2604e683838a",e.IOS_MOBILE_MIC="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/88f09f9e-64f5-4238-8697-f92bb4ee038c",e.IOS_MOBILE_CAM="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/7e23fa99-e73c-4698-89d5-60d85db3c5b1",e.ANDROID_MOBILE_MIC="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/95f038a4-9292-48fe-ae6e-70b9b28e40b5",e.ANDROID_MOBILE_CAM="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/8d1b4996-767b-4065-a96e-4a69c8c725fc",e.ALL="https://s1-tetrika-techsupport.teamly.ru/space/ea191d7a-934a-4626-9581-8a611123357e/article/a1e2a6b5-e441-4381-a2e9-df46f8479e22"}(L||(L={}));const M=2,U=1,H="/me"},31900:function(e,t,n){n.d(t,{$C:function(){return O},AQ:function(){return y},Bg:function(){return h},DV:function(){return f},Gv:function(){return T},H3:function(){return p},Is:function(){return I},Pn:function(){return k},Ps:function(){return b},QI:function(){return E},Tb:function(){return r},UA:function(){return l},Yw:function(){return _},_T:function(){return S},b:function(){return v},fS:function(){return d},gL:function(){return u},gU:function(){return w},gy:function(){return A},kH:function(){return i},nm:function(){return a},qG:function(){return c},vK:function(){return g},vy:function(){return m},zc:function(){return s}});var o=n(20698);const a=1e6,r=5e7;var s,i,c,l,u,d,p;!function(e){e.TEXT="text",e.TASK="task",e.AUDIO="audio",e.VIDEO="video",e.IMAGE="image",e.PDF="pdf",e.PPTX="pptx",e.HIDDEN="hidden",e.FILE="file",e.IMG="img"}(s||(s={})),function(e){e.LESSON="lesson",e.HOMEWORK="homework",e.TEST="test"}(i||(i={})),function(e){e.TASK_ITEM="taskItem",e.CHOICE_ITEM="choiceItem"}(c||(c={})),function(e){e.INPUT="input",e.SINGLE="single",e.MULTIPLE="multiple",e.GAPS="gaps",e.DRAG_COLOR="dragColor",e.DRAG_SORT="dragSort",e.DRAG_JOIN="dragJoin",e.CONTINUE_ROW="continueRow",e.SELECT_NEEDLESS="selectNeedless",e.FILE="file"}(l||(l={})),function(e){e.TASK_TYPE="taskType",e.TEXT="text",e.TYPE="type"}(u||(u={})),function(e){e.FIELD_TYPE="fieldType",e.FIELD_TEXT_VALUE="fieldTextValue",e.FIELD_IMG_VALUE="fieldImgValue"}(d||(d={})),function(e){e.URL="url",e.SAVE_URL="saveUrl",e.PREVIEW="preview"}(p||(p={}));const m="isForBlog",f="approvedForGeneralUse",h="checkbox",g={text:(0,o.ZP)("text"),task:(0,o.ZP)("task"),audio:(0,o.ZP)("audio"),video:(0,o.ZP)("video"),image:(0,o.ZP)("image"),pdf:(0,o.ZP)("pdf"),pptx:(0,o.ZP)("pptx"),hidden:(0,o.ZP)("hidden")},y=((0,o.ZP)("required"),(0,o.ZP)("allowed"),(0,o.ZP)("disallowed"),{input:(0,o.ZP)("task_input"),single:(0,o.ZP)("task_single"),multiple:(0,o.ZP)("task_multiple"),gaps:(0,o.ZP)("gaps"),dragColor:(0,o.ZP)(["tasks","task_drag_color"]),dragSort:(0,o.ZP)(["tasks","task_sort_drag"]),dragJoin:(0,o.ZP)(["tasks","task_join_drag"]),continueRow:(0,o.ZP)(["tasks","task_continue_row"]),selectNeedless:(0,o.ZP)(["tasks","task_select_needless"]),file:(0,o.ZP)(["tasks","task_select_file"])}),I=[{label:"15",value:15},{label:"30",value:30},{label:"50",value:50},{label:"100",value:100}];var S;!function(e){e.YOUTUBE="youtube",e.VK="vk"}(S||(S={}));const T="currentSubject";var _;!function(e){e.UNSORTED_LESSONS="unsorted_lessons",e.UNSORTED_COURSES="unsorted_courses",e.ADDITIONAL_MATERIALS="additional_materials",e.LESSON_MATERIALS="lesson_materials",e.HOMETASKS="hometasks"}(_||(_={}));const O={"1 класс":"1_class","2 класс":"2_class","3 класс":"3_class","4 класс":"4_class","5 класс":"5_class","6 класс":"6_class","7 класс":"7_class","8 класс":"8_class","9 класс":"9_class","10 класс":"10_class","11 класс":"11_class","Дошкольники":"preschooler"},w={[(0,o.ZP)(["constructor","lesson_materials"])]:"lesson_materials",[(0,o.ZP)(["constructor","hometasks"])]:"hometasks",[(0,o.ZP)(["constructor","additional_materials"])]:"additional_materials"},b="math",E=15,A=1;var k,v;!function(e){e.VK_RU="vk.ru",e.VK_COM="vk.com",e.VK_VIDEO="vkvideo.ru"}(k||(k={})),function(e){e.YOUTU_BE="youtu.be",e.YOUTUBE_COM="youtube.com"}(v||(v={}))},58177:function(e,t,n){n.d(t,{CJ:function(){return S},DI:function(){return v},E3:function(){return f},Fu:function(){return P},GQ:function(){return O},HB:function(){return N},Ip:function(){return A},NE:function(){return k},SN:function(){return m},To:function(){return I},Tu:function(){return y},Uk:function(){return D},Ww:function(){return h},homeworkAsyncActions:function(){return H},kS:function(){return M},qJ:function(){return T},sT:function(){return E},wy:function(){return C},yk:function(){return R},zh:function(){return L}});var o=n(29829),a=n(11500),r=n(27944),s=n(1279),i=n(77029),c=n(20768),l=n(31900),u=n(97406),d=n(18705),p=n(20698);const m="homework",f={participant:null,isHomeworkModalOpen:!1,isHomeworkSendSuccess:!1,selectedSubjects:[],homeworks:null,loadingFiles:{},error:"",isErrorModalOpen:!1,task:{tutorComment:"",pupilComment:"",contentId:"",homeworkType:null,title:"",pupilFiles:null,tutorFiles:null,pupilResult:null,isAvailableForPupil:null,contentSectionId:null,trialId:null,isHomeworkSolved:!1,tutorAvatar:"",tutorName:""}},h=(0,o.oM)({name:m,initialState:f,reducers:{setHomeworkModalOpen:e=>{e.isHomeworkModalOpen=!0},setHomeworkModalClose:e=>{e.isHomeworkModalOpen=!1},setParticipant:(e,t)=>{let{payload:n}=t;e.participant=n},setIsHomeworkSendSuccess:(e,t)=>{let{payload:n}=t;e.isHomeworkSendSuccess=n},setHomework:(e,t)=>{let{payload:n}=t;e.task=n},setIsAvailableForPupil:(e,t)=>{let{payload:n}=t;e.task.isAvailableForPupil=n},setSelectedSubjects:(e,t)=>{let{payload:n}=t;e.selectedSubjects=n},setHomeworkList:(e,t)=>{let{payload:n}=t;e.homeworks=n},setIsloadingFiles:(e,t)=>{let{payload:{fileName:n,isLoading:o}}=t;o?e.loadingFiles[n]=o:delete e.loadingFiles[n]},setError:(e,t)=>{let{payload:n}=t;e.error=n},setIsErrorModalOpen:(e,t)=>{let{payload:n}=t;e.isErrorModalOpen=n}}}),{setHomeworkModalOpen:g,setHomeworkModalClose:y,setParticipant:I,setIsHomeworkSendSuccess:S,setHomework:T,setIsAvailableForPupil:_,setSelectedSubjects:O,setHomeworkList:w,setIsloadingFiles:b,setError:E,setIsErrorModalOpen:A}=h.actions,k=e=>e[m].isHomeworkModalOpen,v=e=>e[m].isHomeworkSendSuccess,C=e=>e[m].task,P=e=>e[m].participant,R=e=>e[m].selectedSubjects,N=e=>e[m].homeworks,D=e=>e[m].loadingFiles,L=e=>e[m].error,M=e=>e[m].isErrorModalOpen,U=e=>async t=>{try{const n=await(0,a.bh)(e);t(T(n))}catch(e){console.error(e),t(A(!0))}},H={setHomeworkAsync:U,updateHomeworkAsync:(e,t,n,o,c,l)=>async(u,d)=>{try{const{homework:{task:p}}=d(),{contentSectionId:m,contentId:f,homeworkType:h,title:g,tutorFiles:I}=p;if(h===r.UA.CUSTOM_TASK){await(0,i.U2)(m);const e={title:g,description:c,subject:l,contents:I.map((e=>({type:(0,s.J)(e.extension),description:"",url:e.url})))};await(0,i.r$)(m,e)}await(0,a.DD)(e,f,t,h),!o&&await(0,a.TQ)(e),u(_(!0)),n||(u(y()),u(S(!0))),localStorage.setItem(r.dd,"true")}catch(e){console.error(e),u(A(!0))}},uploadFile:e=>async(t,n)=>{try{t(b({fileName:e.name,isLoading:!0}));const{payload:{upload_url:o}}=await(0,c.k)([e]),{homework:{task:a},common:{role:r}}=n(),s=r===d.Z.TUTOR?"tutorFiles":"pupilFiles",i=a[s]||[],l=e.name,u=l.split(".").pop(),p=i.some((e=>e.title===l));if(p)return;const m={title:l,extension:u,url:o},f=[...i,m],h={...a,[s]:f};t(T(h))}catch(e){console.error(e),t(E((0,p.ZP)(["homework","error_upload_file"])))}finally{t(b({fileName:e.name,isLoading:!1}))}},deleteFile:e=>(t,n)=>{try{const{homework:{task:o},common:{role:a}}=n(),r=a===d.Z.TUTOR?"tutorFiles":"pupilFiles",s=o[r].filter((t=>t.title!==e)),i={...o,[r]:s};t(T(i))}catch(e){console.error(e),t(E((0,p.ZP)(["homework","error_delete_file"])))}},sendCustomHomeworkAsync:(e,t,n,o,c,d,p)=>async(m,f)=>{const{homework:{task:{tutorFiles:h}}}=f();try{const f={title:c,description:"".concat(t," ").concat(d),subject:n,difficulty:0},g={...f,contents:null==h?void 0:h.map((e=>({type:(0,s.J)(e.url.split(".").pop()),description:"",url:e.url})))},I=[await(0,i.v_)(g)],T={...f,theme:"",type:l.kH.HOMEWORK,sections:I,approved_for_general_use:!0},O=await(0,u.Xs)(T);await(0,a.Vk)(e,O,r.UA.CUSTOM_TASK,o),await(0,a.TQ)(e),p?m(U(e)):(m(y()),m(S(!0))),m(_(!0)),localStorage.setItem(r.dd,"true")}catch(e){console.error(e),m(A(!0))}},setHomeworksList:e=>async t=>{try{const n=await(0,a.Fy)(e);t(w(n))}catch(e){console.error(e),t(A(!0))}},startExecutionHomeworkAsync:e=>async(t,n)=>{try{const{homework:{task:o}}=n(),{homeworkTrialId:r}=await(0,a.H$)(e),s={...o,trialId:r};return t(T(s)),r}catch(e){console.error(e),t(A(!0))}},sendCustomSolutionAsync:(e,t)=>async(n,o)=>{try{const{homework:{task:r}}=o(),{pupilFiles:s}=r,i=s.map((e=>e.url));await(0,a.Yr)(e,t,i);const c={...r,isHomeworkSolved:!0};n(T(c)),n(S(!0))}catch(e){console.error(e),n(A(!0))}}}},27944:function(e,t,n){var o;n.d(t,{G4:function(){return r},G7:function(){return a},Pc:function(){return s},U7:function(){return c},UA:function(){return o},dd:function(){return i},pY:function(){return l}}),function(e){e.INTERACTIVE_TASK="interactive",e.CUSTOM_TASK="custom"}(o||(o={}));const a=[{type:"interactive",name:"Библиотека заданий"},{type:"custom",name:"Собственное задание"}],r={image:["bmp","gif","jpg","jpeg","png","svg","webp"],video:["3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv"],audio:["aif","cda","mid","midi","mp3","mpa","ogg","wav","wma","wpl"],doc:["doc","docx","odt","rtf","tex","txt","wks","wps","wpd","xls","xlsx"],archive:["7z","arj","deb","pkg","rar","rpm","gz","z","zip"],pdf:["pdf"]},s="isHomeworkSelected",i="isHomeworkShangeStatus";var c;!function(e){e.Todo="todo",e.Done="done"}(c||(c={}));const l=["image/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/x-tex","text/plain","application/vnd.ms-works","application/vnd.ms-works","application/wps-writer"]},1279:function(e,t,n){n.d(t,{J:function(){return a},S:function(){return r}});var o=n(27944);const a=e=>{for(const[t,n]of Object.entries(o.G4))if(n.includes(e))return t;return null},r=e=>{const t=document.createElement("a");t.href=e.url,t.download=e.title,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},8283:function(e,t,n){n.d(t,{FA:function(){return d},Gu:function(){return a},PW:function(){return p},Rz:function(){return i},Vy:function(){return c},Y7:function(){return u},fd:function(){return s},gr:function(){return l},sq:function(){return r}});var o=n(20698);const a=36e3,r=0,s=5,i=50,c=100;var l,u;!function(e){e.Support="support",e.Tutor="tutor",e.Pupil="pupil",e.Hints="hints",e.FeedbackHints="feedback_hints"}(l||(l={})),function(e){e.SCROLL_TO_BOTTOM="scroll-to-bottom"}(u||(u={}));const d={SUPPORT:(0,o.ZP)(["lesson","support"]),TUTOR:(0,o.ZP)(["lesson","tutor"]),PUPIL:(0,o.ZP)(["lesson","pupil"]),HINTS:(0,o.ZP)(["lesson","hints"]),FEEDBACK_HINTS:(0,o.ZP)(["lesson","feedback_hints"])},p=[{role:(0,o.ZP)(["lesson","hints"]),roleId:"hints"},{role:(0,o.ZP)(["lesson","feedback_hints"]),roleId:"feedback_hints"}]},69096:function(e,t,n){n.d(t,{Br:function(){return r},Ph:function(){return h},tS:function(){return f},_Y:function(){return c},Ox:function(){return p},PN:function(){return u},Gz:function(){return g},SD:function(){return d},Gr:function(){return i},xb:function(){return s},s2:function(){return y},d8:function(){return l},P2:function(){return m}});n(20698);var o,a=n(8283);!function(e){e.TUTOR="Репетитор",e.PUPIL="Ученик",e.SUPPORT="Поддержка"}(o||(o={}));const r=e=>{const t="chatmini_drafts",n=Boolean(localStorage.getItem(t)),o=localStorage.getItem(t);let a={};n&&(a=JSON.parse(o)),Object.keys(e).forEach((t=>{a[t]=e[t]})),localStorage.setItem(t,JSON.stringify(a))};function s(e){return 0===Object.keys(e).length}const i=e=>{let{mmUrl:t}=e;const n=t.indexOf("//");return{SOCKET_URL:"wss:".concat(t.slice(n),"/websocket"),API_URL:"https:".concat(t.slice(n))}},c=e=>{let t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t.indexOf("www.")>-1&&(t=t.split("www.")[1]),t=t.split(":")[0],t=t.split("?")[0],t},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{expires:o}=n;if("number"==typeof o&&o){const e=new Date;e.setTime(e.getTime()+1e3*o),o=e,n.expires=e}o&&o.toUTCString&&(n.expires=o.toUTCString()),t=encodeURIComponent(t);let a="".concat(e,"=").concat(t);for(const e in n){a+="; ".concat(e);const t=n[e];Boolean(n[e])||(a+="=".concat(t))}document.cookie=a},u=e=>JSON.stringify({seq:1,action:"authentication_challenge",data:{token:e}}),d=e=>e.map((e=>{let t="";return(null==e?void 0:e.role)===o.PUPIL&&(t=a.gr.Pupil),(null==e?void 0:e.role)===o.SUPPORT&&(t=a.gr.Support),(null==e?void 0:e.role)===o.TUTOR&&(t=a.gr.Tutor),{...e,roleId:t}})).filter((e=>e.channel)),p=()=>"_".concat(Math.random().toString(36).substr(2,9)),m=(e,t)=>{let n;return function(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];n||(e(...a),n=setTimeout((()=>n=!1),t))}},f=e=>{const t={image:["bmp","gif","jpg","jpeg","png","svg"],video:["3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv"],audio:["aif","cda","mid","midi","mp3","mpa","ogg","wav","wma","wpl"],text:["doc","docx","odt","pdf","rtf","tex","txt","wks","wps","wpd"]},n=null==e?void 0:e.split(".").pop().toLowerCase();return Object.keys(t).filter((e=>t[e].includes(n)))[0]||"other"},h=e=>{const t="chatmini_drafts";let n=localStorage.getItem(t);n=n?JSON.parse(n):{},n[e]&&(delete n[e],localStorage.setItem(t,JSON.stringify(n)))},g=e=>{let t=localStorage.getItem("chatmini_drafts");return t=t?JSON.parse(t):{},t[e]},y=()=>!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},95905:function(e,t,n){n.d(t,{EC:function(){return r},G7:function(){return p},GZ:function(){return m},J5:function(){return c},Lg:function(){return _},Mb:function(){return S},Sd:function(){return g},Yi:function(){return d},bB:function(){return y},cV:function(){return i},dO:function(){return s},fH:function(){return T},gr:function(){return I},s8:function(){return f},um:function(){return O}});var o=n(59720),a=n(25994);const r=960,s=620,i=0,c=4,{MS_IN_HOUR:l}=a.default,{MS_IN_SECOND:u}=a.default,d={DESKTOP:"desktop",MOBILE:"mobile"},p={PUPIL:"pupil",TUTOR:"tutor",ADMIN:"admin"},m={DEFAULT:"default",SMALL:"small",LARGE:"large"},f={[d.DESKTOP]:[{isVideoTabOpen:!0,isChatTabOpen:!1,size:m.DEFAULT,isHidden:!1},{isVideoTabOpen:!0,isChatTabOpen:!1,size:m.SMALL,isHidden:!1},{isVideoTabOpen:!0,isChatTabOpen:!1,size:m.LARGE,isHidden:!1},{isVideoTabOpen:!1,isChatTabOpen:!1,size:m.DEFAULT,isHidden:!1},{isVideoTabOpen:!1,isChatTabOpen:!1,size:m.DEFAULT,isHidden:!0}],[d.MOBILE]:[{isVideoTabOpen:!0,isChatTabOpen:!0,size:m.DEFAULT,isHidden:!1},{isVideoTabOpen:!0,isChatTabOpen:!0,size:m.LARGE,isHidden:!1},{isVideoTabOpen:!1,isChatTabOpen:!1,size:m.DEFAULT,isHidden:!1}]},h="50",g={cell:{isCell:!0,isLines:!1,isDefault:!1,boardCellWidth:h,boardCellHeight:h},lines:{isCell:!1,isLines:!0,isDefault:!1,boardCellWidth:0,boardCellHeight:h},default:{isCell:!1,isLines:!1,isDefault:!0,boardCellWidth:0,boardCellHeight:0,boardTheme:"light"}},y={bio:"cell",chem:"cell",chin:"cell",deut:"lines",en:"lines",fre:"cell",geo:"cell",hist:"cell",it:"cell",italian:"cell",jap:"cell",lit:"lines",logic:"cell",math:"cell",memory:"cell",phys:"cell",preparation_for_school:"cell",prim_class:"cell",programming:"cell",psy:"cell",reading:"cell",rus:"lines",rus_as_foreign:"lines",soc:"cell",spanish:"cell",speech_therapist:"lines",tetrika:"cell",world_around:"cell"};var I;!function(e){e.Hints="hints",e.FeedbackHints="feedback_hints",e.Pupil="pupil",e.Tutor="tutor",e.Support="support"}(I||(I={}));const S=0;var T;!function(e){e.Stable="4g",e.Unstable="3g",e.Bad="2g",e.VeryBad="slow-2g",e.NoNetwork="no-network"}(T||(T={}));const _={"3g":{title:"unstable",logInfo:"unstable_internet",text:"unstable_text",variant:o.JU.WARNING},"2g":{title:"bad",logInfo:"bad_internet",text:"bad_text",variant:o.JU.ERROR},"slow-2g":{title:"bad",logInfo:"bad_internet",text:"bad_text",variant:o.JU.ERROR},"no-network":{title:"no_connection",logInfo:"no_internet",text:"no_connection_text",variant:o.JU.ERROR}};var O;!function(e){e[e.MsInHour=l]="MsInHour",e[e.MsInSecond=u]="MsInSecond",e[e.ThoHours=2]="ThoHours",e[e.FourHours=4]="FourHours"}(O||(O={}))},19882:function(e,t,n){n.d(t,{Rz:function(){return D},chatSlice:function(){return g},E3:function(){return h}});var o=n(29829),a=n(93162),r=n(1999);const s=e=>{let t,{mmToken:n="",mmurl:o=""}=e;if(o){const e=o.indexOf("//");t="https:".concat(o.slice(e))}return r.xU.defaults.baseURL=t,r.xU.defaults.headers.Authorization="Bearer ".concat(n),r.xU.defaults.headers["Content-Type"]="application/json",r.xU.defaults.headers["X-Requested-With"]="XMLHttpRequest",r.xU},i=50,c=e=>e.data,l=e=>{let{mmToken:t,mmurl:n}=e;return{get:e=>s({mmToken:t,mmurl:n}).get(e).then(c),post:(e,o)=>s({mmToken:t,mmurl:n}).post(e,o).then(c),delete:e=>s({mmToken:t,mmurl:n}).delete(e).then(c)}},u=(e,t,n)=>{const{channel:o,page:a,perPage:r=i,after:s=""}=e;return l({mmToken:t,mmurl:n}).get("/channels/".concat(o,"/posts?page=").concat(a,"&per_page=").concat(r,"&after=").concat(s))},d=(e,t,n,o)=>l({mmToken:t,mmurl:n}).get("/channels/".concat(e,"/members")).then((e=>e.filter((e=>e.user_id===o))[0].mention_count)),p=(e,t,n)=>l({mmToken:t,mmurl:n}).post("/channels/members/me/view",{channel_id:e}).catch((e=>console.log(e)));var m=n(69096),f=n(20698);const h={modalIsOpen:!1,modalText:null,contacts:null,activeIndex:0,isFormSending:!1,mattermost:null,role:null},g=(0,o.oM)({name:"chat",initialState:h,reducers:{openModalAction:(e,t)=>{let{payload:n}=t;e.modalIsOpen=!0,e.modalText=n},closeModalAction:e=>{e.modalIsOpen=!1,e.modalText=null},updateContacts:(e,t)=>{let{payload:n}=t;e.contacts=n},changeActiveIndex:(e,t)=>{let{payload:n}=t;e.activeIndex=n},uploadFileRequest:(e,t)=>{let{payload:n}=t;const{contactIndex:o,fileId:a,file:r}=n,s=JSON.parse(JSON.stringify(e)).contacts.map(((e,t)=>t===o?{...e,draft:{...e.draft,files:{...e.draft.files,[a]:{file:{...r,name:r.name,size:r.size},loading:!0,progress:0}}}}:e));e.contacts=s},getUploadProgress:(e,t)=>{let{payload:n}=t;const{contactIndex:o,fileId:a,progress:r}=n,s=JSON.parse(JSON.stringify(e)).contacts.map(((e,t)=>t===o&&e.draft.files[a]?{...e,draft:{...e.draft,files:{...e.draft.files,[a]:{...e.draft.files[a],progress:r}}}}:e));e.contacts=s},uploadFileSuccess:(e,t)=>{let{payload:n}=t;const{contactIndex:o,fileId:a,mmId:r}=n,s=JSON.parse(JSON.stringify(e)).contacts.map(((e,t)=>t===o&&e.draft.files[a]?{...e,draft:{...e.draft,files:{...e.draft.files,[a]:{...e.draft.files[a],loading:!1,progress:100,mmId:r}}}}:e));e.contacts=s},detachFile:(e,t)=>{let{payload:n}=t;const{contactIndex:o,fileId:a}=n,r=JSON.parse(JSON.stringify(e)).contacts.map(((e,t)=>{if(t===o){const t={...e.draft.files};return delete t[a],{...e,draft:{...e.draft,files:t}}}return e}));e.contacts=r},addLineBreak:(e,t)=>{let{payload:n}=t;const o=JSON.parse(JSON.stringify(e)).contacts.map(((e,t)=>t===n?{...e,draft:{...e.draft,message:"".concat(e.draft.message,"\n")}}:e));e.contacts=o},missedMessage:(e,t)=>{let{payload:n}=t;const o=JSON.parse(JSON.stringify(e)).contacts,{data:a,channel:r,mentionCount:s,immediatelyView:i}=n,{order:c,posts:l}=a,u=o.map((e=>{if(e.channel===r){const t=i?0:s;return{...e,mentionCount:t,log:{...e.log,posts:{...e.log.posts,...l},order:[...c,...e.log.order]}}}return e}));e.contacts=u},missedChannelView:(e,t)=>{let{payload:n}=t;const o=JSON.parse(JSON.stringify(e)).contacts,{channel:a,mentionCount:r,immediatelyView:s}=n,i=o.map((e=>{if(e.channel===a){const t=s?0:r;return{...e,mentionCount:t}}return e}));e.contacts=i},loadHistoryRequest:(e,t)=>{let{payload:n}=t;const o=JSON.parse(JSON.stringify(e)).contacts.map((e=>e.channel===n?{...e,log:{...e.log,loading:!0}}:e));e.contacts=o},loadHistorySuccess:(e,t)=>{let{payload:n}=t;const o=JSON.parse(JSON.stringify(e)).contacts,{data:a,channel:r,page:s}=n,{order:i,posts:c}=a,l=o.map((e=>e.channel===r?{...e,log:{...e.log,page:s,loading:!1,posts:{...c,...e.log.posts},order:[...e.log.order,...i]}}:e));e.contacts=l},createPostSuccess:(e,t)=>{let{payload:n}=t;const o=JSON.parse(JSON.stringify(e)).contacts.map(((e,t)=>t===n?{...e,draft:{message:"",files:{}}}:e));e.contacts=o},sendingForm:(e,t)=>{let{payload:n}=t;e.isFormSending=n},setChatInitData:(e,t)=>{let{payload:{mattermost:n,contacts:o,role:a}}=t;const r="admin"===a;let s={},i=[];if(n&&!(0,m.xb)(o)&&!(0,m.xb)(n)&&n.mmurl){let e,t,a,c;if(s={mmToken:n.mmToken,mmUser:n.mmUser,mmUrl:n.mmurl,teamId:n.teamId,secure:n.secure},r){const n=o.filter((e=>"tutor"===e.role))[0],r=o.filter((e=>"pupil"===e.role))[0];e=n.channel,t=(0,f.ZP)(["lesson",n.role]),a=r.channel,c=(0,f.ZP)(["lesson",r.role])}else o.forEach((n=>{"support"===n.role?(a=n.channel,c=(0,f.ZP)(["lesson",n.role])):(e=n.channel,t=(0,f.ZP)(["lesson",n.role]))}));i=[{channel:e,mentionCount:0,role:t,log:{loading:!1,page:0,posts:{},order:[]},draft:{files:{},message:""}},{channel:a,mentionCount:0,role:c,log:{loading:!1,page:0,posts:{},order:[]},draft:{files:{},message:""}}]}e.mattermost=s,e.contacts=i,e.role=a}}}),{openModalAction:y,updateContacts:I,changeActiveIndex:S,uploadFileRequest:T,getUploadProgress:_,uploadFileSuccess:O,detachFile:w,addLineBreak:b,closeModalAction:E,missedMessage:A,missedChannelView:k,loadHistoryRequest:v,loadHistorySuccess:C,createPostSuccess:P,sendingForm:R,setChatInitData:N}=g.actions,D={createPostRequest:(e,t,n)=>{let{channel:o,draft:a,contactIndex:r}=e;return async(e,s)=>{const i=Object.keys(a.files).map((e=>a.files[e].mmId)),{contacts:c}=s().chat,{mmToken:u}=s().chat.mattermost,d=s().chat.mattermost.mmUrl;try{const s=await((e,t,n,o)=>l({mmToken:null==o?void 0:o.mmToken,mmurl:null==o?void 0:o.mmurl}).post("/posts",{channel_id:e,message:t.message.trim(),file_ids:n,props:o||{}}))(o,a,i,{mmToken:u,mmurl:d});t&&t(s),e(P(r)),n()}catch(t){console.log("error"),e(y((0,f.ZP)(["chat","post_created_failure"])))}}},deletePost:e=>{let{id:t,onError:n}=e;return async(e,o)=>{try{const{mmToken:n}=o().chat.mattermost,a=o().chat.mattermost.mmUrl,{userId:r}=o().common;await((e,t,n,o)=>l({mmToken:t,mmurl:n}).delete("/posts/".concat(e,"?tetrika_user=").concat(o)))(t,n,a,r);const{activeIndex:s,contacts:i}=o().chat,c=i.map(((e,n)=>n===s?{...e,log:{...e.log,order:e.log.order.filter((e=>e!==t))}}:e));e(I(c))}catch(e){console.log("error",e),n&&n()}}},handlePostDeletedEvent:e=>{let{channelId:t,postId:n}=e;return(e,o)=>{const{contacts:a}=o().chat,r=a.map((e=>{if(e.channel===t){const t=e.mentionCount,o=t&&t>0?t-1:0;return{...e,log:{...e.log,order:e.log.order.filter((e=>e!==n))},mentionCount:o}}return e}));e(I(r))}},changeTab:(e,t)=>async(n,o)=>{try{if(t){const{mmToken:e}=o().chat.mattermost,n=o().chat.mattermost.mmUrl;await p(t,e,n)}n(S(t?e:0))}catch(e){console.log(e)}},loadHistory:(e,t)=>async(n,o)=>{try{n(v(e));const{mmToken:a}=o().chat.mattermost,r=o().chat.mattermost.mmUrl,s=await u({channel:e,page:t},a,r);n(C({data:s,channel:e,page:t}))}catch(e){console.log(e)}},handleEventPosted:e=>{let{post:t,immediatelyView:n}=e;return async(e,o)=>{const{contacts:a}=o().chat,{mmToken:r}=o().chat.mattermost,s=o().chat.mattermost.mmUrl;try{const o=a.map((e=>{if(e.channel===t.channel_id){const o=n?0:1;return{...e,mentionCount:e.mentionCount+o,log:{...e.log,posts:{...e.log.posts,[t.id]:t},order:[t.id,...e.log.order]}}}return e}));e(I(o)),n&&await p(t.channel_id,r,s)}catch(e){console.log(e)}}},updateMessage:e=>{let{message:t,contactIndex:n}=e;return(e,o)=>{const{contacts:a}=o().chat,r=a.map(((e,o)=>o===n?{...e,draft:{...e.draft,message:t}}:e));e(I(r))}},updateChannelDraft:e=>{let{channel:t,draft:n}=e;return(e,o)=>{const a=void 0!==n?n:{files:{},message:""},{contacts:r}=o().chat,s=r.map((e=>e.channel===t?{...e,draft:a}:e));e(I(s))}},attachFiles:e=>(t,n)=>{const{chat:o}=n(),{activeIndex:a,contacts:s}=o,{channel:i}=s[a],c=a,l=Object.keys(e),u=n().chat.mattermost.mmUrl,{mmToken:d}=n().chat.mattermost;l.forEach((n=>{const o=e[n];if(o.size>=5e8)t(y((0,f.ZP)(["chat","file_too_large"])));else{const e=(0,m.Ox)();(0,r.cT)({contactIndex:c,fileId:e,file:o,channel:i,onStartUpload:e=>t(T(e)),onProgress:e=>t(_(e)),onSuccess:e=>t(O(e)),onAbort:e=>t(w(e)),onError:()=>t(y((0,f.ZP)(["chat","file_upload_failure"])))},u,d)}}))},setMentionCount:e=>async(t,n)=>{try{const{contacts:o}=n().chat,{mmToken:a}=n().chat.mattermost,r=n().chat.mattermost.mmUrl,{mmUser:s}=n().chat.mattermost,i=await d(e,a,r,s),c=o.map((t=>t.channel===e?{...t,mentionCount:i}:t));t(I(c))}catch(e){console.log(e)}},resetMentionCount:e=>(t,n)=>{const{contacts:o}=n().chat,a=o.map((t=>t.channel===e?{...t,mentionCount:0}:t));t(I(a))},handleEventViewChannel:e=>(t,n)=>{const{contacts:o}=n().chat,a=o.map((t=>t.channel===e?{...t,mentionCount:0}:t));t(I(a))},downloadFileRequest:(e,t)=>async(n,o)=>{try{const{mmToken:n}=o().chat.mattermost,r=o().chat.mattermost.mmUrl;await((e,t,n,o)=>s({mmToken:n,mmurl:o}).get("/files/".concat(e),{responseType:"blob"}).then((e=>e.data)).then((e=>(0,a.saveAs)(e,t))).catch((e=>console.log(e))))(e,t,n,r)}catch(e){console.log(e)}},handleMissedEvents:(e,t,n)=>async(o,a)=>{try{e.forEach((async(e,r)=>{const s=e.log.order[0],i=r===t&&n,c=e.mentionCount,{mmToken:l}=a().chat.mattermost,m=a().chat.mattermost.mmUrl,{mmUser:f}=a().chat.mattermost,[h,g]=await Promise.all([d(e.channel,l,m,f),u({channel:e.channel,page:0,after:s},l,m)]);if(g.order.length){const t={data:g,channel:e.channel,mentionCount:h,immediatelyView:i};o(A(t)),document.dispatchEvent(new Event("scroll-to-bottom"))}else if(!g.order.length&&h<c){const t={mentionCount:h,channel:e.channel,immediatelyView:i};o(k(t))}i&&await p(e.channel,l,m)}))}catch(e){console.log(e)}}}},80009:function(e,t,n){n.d(t,{Wc:function(){return ae},vI:function(){return I},f6:function(){return S},E3:function(){return y},dq:function(){return ne},Ew:function(){return K},Wh:function(){return oe}});var o=n(29829),a=n(13272),r=n(21165),s=n(95905);var i=n(2712),c=n(54243);var l=n(12199),u=n(19882),d=n(3116),p=n(58177);const{setChatInitData:m}=u.chatSlice.actions,{setRestPresets:f,setZiteboard:h}=d.presetsSlice.actions,{setMvuResponsible:g}=d.peresetsAsyncActions,y={userId:null,me:null,isChatBtnPressed:!1,dragPosition:"out",isMobile:!1,deviceType:s.Yi.DESKTOP,isLandscape:!1,width:0,height:0,etherpad:{id:null,session:null,userName:null,url:null,isError:!1,hasLoaded:!1,isReload:!1,isLoading:!1},presetConfig:{isVideoTabOpen:!0,isChatTabOpen:!1,size:s.GZ.DEFAULT,isHidden:!1},padLoaded:!1,activeSwitcherIndex:0,preset:s.cV,reportButtons:{techIssueButton:{isDisabled:!1,title:""},noUserButton:{isDisabled:!1,title:""}},isTestRoomPassed:!1,levelNetwork:s.fH.Stable,role:null,isUserAuthorized:!1,lessonStartDateTime:null,lessonEndDateTime:null,lessonHash:null,workerHash:null,wsLessonAddress:null,isTrainingLesson:!1,isTechIssueAlertOpen:!1,hasAdmin:!1,isIntro:!1,journalFilled:!1,pupilBalance:null,excalidraw:{hash:null}},I=(0,o.oM)({name:"common",initialState:y,reducers:{hideTestRoom:e=>{e.isTestRoomPassed=!0},onResize:e=>{const t=window.innerWidth<s.EC;e.isMobile=t,e.isLandscape=window.innerHeight<window.innerWidth,e.width=window.innerWidth,e.height=window.innerHeight,e.deviceType=t?s.Yi.MOBILE:s.Yi.DESKTOP},loadPad:e=>{e.padLoaded=!0},setLevelNetwork:(e,t)=>{let{payload:n}=t;e.levelNetwork=n},setActiveSwitcherIndex:(e,t)=>{let{payload:n}=t;e.activeSwitcherIndex=n},toggleReportBtnSync:(e,t)=>{let{payload:n}=t;const{btn:o,bool:a}=n,r=JSON.parse(JSON.stringify(e)).reportButtons,s={...r,[o]:{...r[o],isDisabled:a}};e.reportButtons=s},hideEtherpadError:e=>{e.etherpad.isError=!1},changePreset:(e,t)=>{let{payload:{preset:n,deviceType:o}}=t;e.preset=n,e.presetConfig=s.s8[o][n]},changePresetsPackageSync:(e,t)=>{let{payload:{deviceType:n}}=t;e.preset=s.cV,e.presetConfig=s.s8[n][s.cV]},toggleVideoTabSync:e=>{const t=JSON.parse(JSON.stringify(e)).presetConfig;e.presetConfig.isVideoTabOpen=!t.isVideoTabOpen},toggleChatTabSync:e=>{const t=JSON.parse(JSON.stringify(e)).presetConfig;e.presetConfig.isChatTabOpen=!t.isChatTabOpen},setMeSync:(e,t)=>{let{payload:n}=t;e.me=n},changeDragPosition:(e,t)=>{let{payload:n}=t;e.dragPosition=n},setDisabledTitleSync:(e,t)=>{let{payload:{btn:n,title:o}}=t;const a=JSON.parse(JSON.stringify(e)).reportButtons,r={...a,[n]:{...a[n],title:o}};e.reportButtons=r},toggleMobileChat:e=>{const t=JSON.parse(JSON.stringify(e)).isChatBtnPressed;e.isChatBtnPressed=!t},setEtherpadReload:e=>{e.etherpad.isReload=!0,e.etherpad.hasLoaded=!1},setEtherpadLoading:e=>{e.etherpad.isLoading=!0},setEtherpadError:e=>{e.etherpad.isError=!0,e.etherpad.hasLoaded=!1,e.etherpad.isLoading=!1},hideEtherpadReload:e=>{e.etherpad.isReload=!1,e.etherpad.isLoading=!1},setEtherpadOptions:(e,t)=>{let{payload:{etherpadPadId:n,etherpadSession:o}}=t;e.etherpad.session=o,e.etherpad.id=n,e.etherpad.isError=!1,e.etherpad.isLoading=!1,e.etherpad.hasLoaded=!0},setRole:(e,t)=>{let{payload:n}=t;e.role=n,e.isUserAuthorized=Object.values(s.G7).includes(n)},setLessonStartDateTime:(e,t)=>{let{payload:n}=t;e.lessonStartDateTime=n},setLessonEndDateTime:(e,t)=>{let{payload:n}=t;e.lessonEndDateTime=n},setLessonHash:(e,t)=>{let{payload:n}=t;var o;e.lessonHash=n,e.isTestRoomPassed=(o=n,Boolean(sessionStorage.getItem("isLessonFirstVisitPassed-".concat(o))))},setUserId:(e,t)=>{let{payload:n}=t;e.userId=n},setWorkerHash:(e,t)=>{let{payload:n}=t;e.workerHash=n},setWsLessonAddress:(e,t)=>{let{payload:n}=t;e.wsLessonAddress=n},setEtherpad:(e,t)=>{let{payload:n}=t;const o=((e,t)=>{const n=window.location.search.match(new RegExp("".concat(e,"=([^&]*)")));return n?decodeURIComponent(n[1]):t})("ETHERPAD_URL",n.url),a={...n,url:o};e.etherpad={...e.etherpad,...a}},setTrainingLesson:(e,t)=>{let{payload:n}=t;e.isTrainingLesson=n},setTechIssueAlertOpen:e=>{e.isTechIssueAlertOpen=!0},setTechIssueAlertClose:e=>{e.isTechIssueAlertOpen=!1},setHasAdmin:(e,t)=>{let{payload:n}=t;e.hasAdmin=n},setIsIntro:(e,t)=>{let{payload:n}=t;e.isIntro=n},setJournalFilled:(e,t)=>{let{payload:n}=t;e.journalFilled=n},setPupilBalance:(e,t)=>{let{payload:n}=t;e.pupilBalance=n}}}),{hideTestRoom:S,onResize:T,loadPad:_,setLevelNetwork:O,setActiveSwitcherIndex:w,toggleVideoTabSync:b,toggleChatTabSync:E,setMeSync:A,toggleReportBtnSync:k,hideEtherpadError:v,hideEtherpadReload:C,changePreset:P,changeDragPosition:R,setDisabledTitleSync:N,toggleMobileChat:D,changePresetsPackageSync:L,setEtherpadReload:M,setEtherpadLoading:U,setEtherpadError:H,setEtherpadOptions:F,setRole:x,setLessonStartDateTime:B,setLessonEndDateTime:V,setLessonHash:J,setUserId:G,setWorkerHash:W,setWsLessonAddress:Z,setEtherpad:j,setTrainingLesson:z,setTechIssueAlertOpen:K,setTechIssueAlertClose:q,setHasAdmin:Y,setIsIntro:X,setJournalFilled:Q,setPupilBalance:$}=I.actions,ee=e=>(t,n)=>{const{common:{deviceType:o}}=n();t(P({preset:e,deviceType:o}))},te=()=>(e,t)=>{const{common:{deviceType:n,preset:o,presetConfig:a}}=t(),r=s.s8[n],i=Object.keys(a),c=r.findIndex(((e,t)=>i.every((t=>e[t]===a[t]))&&o!==t));c>-1&&e(ee(c))},ne=e=>t=>{const{contacts:n,mattermost:o,role:a,videoProvider:r,videoProviderMode:s,meData:c,lessonStartDatetime:u,lessonEndDatetime:d,lessonHash:y,workerHash:I,wsAddress:S,lessonSubject:T,pupilId:_,lowBalanceRetention:O,pupilClass:w,pupilProgramId:b,pupilProgramAssigned:E,enableRecording:A,introducingModuleId:k,showCreateNewLessonHint:v,showBookLessonHint:C,mvuResponsible:P,pupilProgramPaid:R,quarksType:N,banerShow:D,isIntro:L,isSpa:M,journalFilled:U,pupilBalance:H,participant:F,pupilAdditionalId:z,etherpadUrl:K,username:q,ziteboardId:Y,ziteboardToken:ee,ziteboardUrl:te,urlUsername:ne,moduleTitle:oe,themeTitle:ae,boardType:re,tutorComment:se,pupilComment:ie,contentId:ce,homeworkType:le,title:ue,pupilFiles:de,tutorFiles:pe,pupilResult:me,isAvailableForPupil:fe,contentSectionId:he,trialId:ge,isHomeworkSolved:ye,tutorAvatar:Ie,tutorName:Se}=e,Te={lessonSubject:T,PUPIL_ID:_,lowBalanceRetention:O,pupilClass:w,pupilProgramId:b,pupilProgramAssigned:E,enableRecording:A,introducingModlueId:k,isSpa:M,showBookLessonHint:C,showCreateNewLessonHint:v,pupilProgramPaid:R,tutorQualification:N,isNewYearBannerShow:D,moduleTitle:oe,themeTitle:ae,boardType:re,participant:F,pupilAdditionalId:z},_e={url:K,userName:q},Oe={ziteboardId:Y,ziteboardToken:ee,ziteboardUrl:te,urlUsername:ne},we={tutorComment:se,pupilComment:ie,contentId:ce,homeworkType:le,title:ue,pupilFiles:de,tutorFiles:pe,pupilResult:me,isAvailableForPupil:fe,contentSectionId:he,trialId:ge,isHomeworkSolved:ye,tutorAvatar:Ie,tutorName:Se};t((0,i.hr)({meData:c,wsAddress:S})),t(m({contacts:n,mattermost:o,role:a})),t(x(a)),t((0,p.To)(F)),t((0,p.qJ)(we)),t((0,l.xl)(r)),t((0,l.Oq)(s)),t(X(L)),t(Q(U)),t($(H)),t(B(1e3*u)),t(V(1e3*d)),t(J(y)),t(G(null==c?void 0:c.id)),t(W(I)),t(Z(S)),t(f(Te)),t(g(P)),t(j(_e)),t(h(Oe))},oe=e=>t=>{const{role:n,videoProvider:o,videoProviderMode:a,lessonHash:r,wsAddress:s,etherpadUrl:c,username:u,ziteboardId:d,ziteboardToken:p,ziteboardUrl:m,urlUsername:g,meData:y,lessonStartDatetime:I,lessonEndDatetime:S,boardType:T}=e,_={url:c,userName:u},O={ziteboardId:d,ziteboardToken:p,ziteboardUrl:m,urlUsername:g};t((0,i.hr)({meData:y,wsAddress:s})),t(z(!0)),t(x(n)),t((0,l.xl)(o)),t((0,l.Oq)(a)),t(B(1e3*I)),t(V(1e3*S)),t(J(r)),t(G(y.id)),t(f({boardType:T})),t(Z(s)),t(j(_)),t(h(O))},ae={setPreset:ee,syncPreset:te,toggleVideoTab:()=>e=>{e(b()),e(te())},setDisabledTitle:(e,t)=>n=>{n(N({btn:e,title:t}))},toggleChatTab:()=>e=>{e(E()),e(te())},setMe:()=>async e=>{try{const t=await(0,r.jo)();e(A(t))}catch(t){console.log(t);const n=(0,c.H)();e(A({id:n}))}},togglePreset:()=>(e,t)=>{const{common:{preset:n,deviceType:o}}=t(),a=n===s.s8[o].length-1?s.cV:n+1;e(ee(a))},changePresetsPackage:()=>(e,t)=>{const{common:{deviceType:n}}=t();e(L({deviceType:n}))},getEtherpadOpts:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(n,o)=>{try{const{common:{etherpad:{hasLoaded:r,isLoading:s}}}=o();if(r||s)return;t&&n(M()),n(U());const i=await(0,a.Nx)(e);n(F(i)),n(_())}catch(e){console.log(e),n(H())}finally{t&&n(C())}}},setLessonInitData:ne,setTrainingLessonInitData:oe,toggleReportBtn:(e,t)=>n=>{n(k({btn:e,bool:t}))}}},3116:function(e,t,n){n.d(t,{E3:function(){return a},gL:function(){return i},peresetsAsyncActions:function(){return l},presetsSlice:function(){return r}});var o=n(29829);const a={introducingModlueId:null,isMvuResponsible:!1,ziteBoard:{ziteboardId:null,ziteboardToken:null,ziteboardUrl:null,urlUsername:null},lessonSubject:null,lessonHash:null,PUPIL_ID:null,lowBalanceRetention:!1,pupilClass:null,pupilAdditionalId:null,pupilProgramId:null,pupilProgramAssigned:!1,enableRecording:!1,showCreateNewLessonHint:0,showBookLessonHint:0,pupilProgramPaid:!1,tutorQualification:null,isNewYearBannerShow:!1,moduleTitle:null,themeTitle:null,boardType:null},r=(0,o.oM)({name:"presets",initialState:a,reducers:{setZiteboard:(e,t)=>{let{payload:n}=t;e.ziteBoard=n},setRestPresets:(e,t)=>{let{payload:n}=t;Object.keys(n).forEach((t=>{e[t]=n[t]}))},setMvuResponsibleSync:(e,t)=>{let{payload:{role:n,mvuResponsible:o}}=t;e.isMvuResponsible=Boolean("tutor"===n&&o)}}}),{setZiteboard:s,setRestPresets:i,setMvuResponsibleSync:c}=r.actions,l={setMvuResponsible:e=>(t,n)=>{const{role:o}=n().common;t(c({role:o,mvuResponsible:e}))}}},2712:function(e,t,n){n.d(t,{CX:function(){return H},E3:function(){return s},HM:function(){return h},Hk:function(){return J},JS:function(){return P},Me:function(){return x},Q5:function(){return U},Qs:function(){return B},R6:function(){return b},TW:function(){return G},Ty:function(){return v},VJ:function(){return M},W4:function(){return y},X2:function(){return D},_i:function(){return I},aH:function(){return A},b6:function(){return u},eY:function(){return Z},gD:function(){return w},gR:function(){return c},hr:function(){return p},iu:function(){return V},jG:function(){return R},jH:function(){return g},l8:function(){return T},oz:function(){return E},q5:function(){return _},qI:function(){return W},rt:function(){return S},s1:function(){return C},uH:function(){return d},uk:function(){return N},wJ:function(){return O},wL:function(){return L},xm:function(){return k},yo:function(){return F}});var o=n(29829),a=n(32011);const r="testRoom",s={deviceInfo:{osName:"",cpu:0,ram:0,networkType:""},networkInfo:{download:"",upload:"",ping:0,downloadStatus:"",uploadStatus:"",pingStatus:""},errorMessage:{title:"",description:""},meData:null,wsAddress:null,isLessonAvailable:!0,isEquipmentTestFinished:!1,isTimeCorrect:null,browserName:"",browserVersion:"",isBrowserNameCorrect:!0,isBrowserVersionCorrect:!0,isCameraEnabled:!0,isAudioEnabled:!0,sessionTimestamp:"",role:null,browserItemStatus:a.bF.LOADING,cameraItemStatus:a.bF.LOADING,audioItemStatus:a.bF.LOADING,networkItemStatus:a.bF.LOADING},i=(0,o.oM)({name:r,initialState:s,reducers:{setDeviceInfo:(e,t)=>{let{payload:n}=t;e.deviceInfo=n},setMeData:(e,t)=>{let{payload:n}=t;e.meData=n},setNetworkInfo:(e,t)=>{let{payload:n}=t;e.networkInfo=n},setErrorMessage:(e,t)=>{let{payload:n}=t;e.errorMessage=n},setInitData:(e,t)=>{let{payload:{meData:n,wsAddress:o}}=t;e.meData=n,e.wsAddress=o},finishEquipmentTest:e=>{e.isEquipmentTestFinished=!0},setIsTimeCorrect:(e,t)=>{let{payload:n}=t;e.isTimeCorrect=n},setBrowserName:(e,t)=>{let{payload:n}=t;e.browserName=n},setBrowserVersion:(e,t)=>{let{payload:n}=t;e.browserVersion=n},setBrowserNameIncorrect:e=>{e.isBrowserNameCorrect=!1},setBrowserVersionIncorrect:e=>{e.isBrowserVersionCorrect=!1},toggleCamera:e=>{e.isCameraEnabled=!e.isCameraEnabled},toggleAudio:e=>{e.isAudioEnabled=!e.isAudioEnabled},setLessonAvailability:(e,t)=>{let{payload:n}=t;e.isLessonAvailable=n},generateSessionTimestamp:e=>{e.sessionTimestamp=Date.now()},setRole:(e,t)=>{let{payload:n}=t;e.role=n},setBrowserItemStatus:(e,t)=>{let{payload:n}=t;e.browserItemStatus=n},setCameraItemStatus:(e,t)=>{let{payload:n}=t;e.cameraItemStatus=n},setAudioItemStatus:(e,t)=>{let{payload:n}=t;e.audioItemStatus=n},setNetworkItemStatus:(e,t)=>{let{payload:n}=t;e.networkItemStatus=n}}});t.ZP=i;const{setDeviceInfo:c,setMeData:l,setNetworkInfo:u,setErrorMessage:d,setInitData:p,finishEquipmentTest:m,setIsTimeCorrect:f,setBrowserName:h,setBrowserVersion:g,setBrowserNameIncorrect:y,setBrowserVersionIncorrect:I,toggleCamera:S,toggleAudio:T,setLessonAvailability:_,generateSessionTimestamp:O,setRole:w,setBrowserItemStatus:b,setCameraItemStatus:E,setAudioItemStatus:A,setNetworkItemStatus:k}=i.actions,v=e=>e[r].deviceInfo,C=e=>e[r].networkInfo,P=e=>e[r].errorMessage,R=e=>e[r].meData,N=e=>e[r].wsAddress,D=e=>e[r].isLessonAvailable,L=e=>e[r].isTimeCorrect,M=e=>e[r].browserName,U=e=>e[r].browserVersion,H=e=>e[r].isBrowserNameCorrect,F=e=>e[r].isBrowserVersionCorrect,x=e=>e[r].isCameraEnabled,B=e=>e[r].isAudioEnabled,V=e=>e[r].sessionTimestamp,J=e=>e[r].browserItemStatus,G=e=>e[r].cameraItemStatus,W=e=>e[r].audioItemStatus,Z=e=>e[r].networkItemStatus},25994:function(e,t,n){n.d(t,{s_:function(){return o},uD:function(){return a}});const o=1e3,a=60*o,r={SECONDS_IN_MINUTE:60,MS_IN_SECOND:o,MS_IN_MINUTE:a,SECONDS_IN_HOUR:3600,MS_IN_HOUR:3600*o,MS_IN_DAY:86400*o};t.default=r},12199:function(e,t,n){n.d(t,{ZP:function(){return p},Oq:function(){return d},xl:function(){return u},C1:function(){return l}});var o=n(54243),a=n(20698);const r=a.uG;var s,i=n(59720);!function(e){e.DEFAULT="default",e.HIDDEN="hidden"}(s||(s={}));const c=(e,t)=>t?r(["lesson","warnings",e],{link:e=>'<a href="'.concat(t,'" target="_blank" rel="noopener noreferrer">').concat(e,"</a>")}):(0,a.ZP)(["lesson","warnings",e]),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hidden",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.JU.WARNING;return s=>{const l=c(e,n),u=(0,o.H)(),d=c(a,null);s({type:"SET_WARNING",payload:{message:l,id:u,title:d,variant:r}}),"hidden"===t&&setTimeout((()=>{s({type:"DELETE_WARNING",payload:u})}),i.eb)}},u=e=>({type:"SET_VIDEO_PROVIDER",payload:e}),d=e=>({type:"SET_VIDEO_MODE",payload:e});var p={setWarning:l,deleteWarning:e=>t=>{t({type:"DELETE_WARNING",payload:e})},setLocalVideo:e=>({type:"SET_LOCAL_VIDEO",payload:e}),setLocalAudio:e=>({type:"SET_LOCAL_AUDIO",payload:e}),updateLocalVideo:e=>({type:"UPDATE_LOCAL_VIDEO",payload:e}),updateLocalAudio:e=>({type:"UPDATE_LOCAL_AUDIO",payload:e}),setDummy:e=>({type:"SET_DUMMY",payload:e}),setRoom:e=>({type:"SET_ROOM",payload:e}),setParticipant:e=>({type:"SET_PARTICIPANT",payload:e}),updateParticipant:(e,t)=>({type:"UPDATE_PARTICIPANT",payload:{sid:e,data:t}}),setLocalAudioSid:e=>({type:"SET_LOCAL_AUDIO_SID",payload:e}),removeParticipant:e=>({type:"REMOVE_PARTICIPANT",payload:e}),updateReconnectAttempts:e=>({type:"UPDATE_RECONNECT_ATTEMPTS",payload:e}),blockNetworkQualityAlert:e=>({type:"BLOCK_NETWORK_QUALITY_ALERT",payload:e}),collapseRoom:()=>({type:"COLLAPSE_ROOM"}),setScreenShare:(e,t)=>({type:"SET_SCREEN_SHARE",payload:{stream:e,track:t}}),setLocalParticipant:e=>({type:"SET_LOCAL_PARTICIPANT",payload:e}),setParticipants:e=>({type:"SET_PARTICIPANTS",payload:e}),toggleLocalTrack:e=>({type:"TOGGLE_TRACK",payload:e}),setCameraStatus:e=>({type:"SET_CAMERA_STATUS",payload:e}),setAudioStatus:e=>({type:"SET_AUDIO_STATUS",payload:e}),setParticipantInfoWithUserInfo:e=>({type:"SET_PARTICIPANT_WITH_INFO",payload:e}),setLocalSid:e=>({type:"SET_LOCAL_SID",payload:e}),setProviderIndex:e=>({type:"SET_PROVIDER_INDEX",payload:e}),setVideoProvider:u,setModeProvider:d}},59720:function(e,t,n){n.d(t,{B$:function(){return y},JU:function(){return m},LH:function(){return l},NX:function(){return i},Ok:function(){return h},TP:function(){return r},Tk:function(){return d},Tr:function(){return f},Vc:function(){return u},_q:function(){return p},dq:function(){return s},eb:function(){return o},hC:function(){return g},qr:function(){return a},yk:function(){return c}});const o=1e4,a=15e3,r="TOGGLE_SCREEN_SHARE",s="CHANGE_SCREEN_SHARE",i="DISCONNECT_MEDIA_EVENT",c="media_settings";var l,u,d,p,m;!function(e){e[e.Attempts=3]="Attempts",e[e.Timeout=3e3]="Timeout"}(l||(l={})),function(e){e.Video="video",e.Audio="audio"}(u||(u={})),function(e){e.Videoinput="videoinput",e.Audioinput="audioinput"}(d||(d={})),function(e){e.BackCamera="back camera",e.FrontCamera="front camera"}(p||(p={})),function(e){e.ERROR="error",e.WARNING="warning",e.SUCCESS="success"}(m||(m={}));const f={audio:"audioinput",video:"videoinput"};var h;!function(e){e.ENVIRONMENT="environment",e.USER="user"}(h||(h={}));const g=[{label:"Основная камера",deviceId:"environment",groupId:"",kind:"videoinput",toJSON:()=>{}},{label:"Фронтальная камера",deviceId:"user",groupId:"",kind:"videoinput",toJSON:()=>{}}];var y;!function(e){e.Auto="auto",e.Customized="customized"}(y||(y={}))},67195:function(e,t){t.Z=e=>{const t=[],n=encodeURIComponent,o=Object.keys(e);for(let a=0;a<o.length;a++){const r=o[a],s=!1===e[r]?String(e[r]):e[r];s instanceof Array?t.push(...s.map((e=>"".concat(n(r),"=").concat(n(e))))):s&&t.push("".concat(n(r),"=").concat(n(s)))}return t.join("&")}}}]);
//# sourceMappingURL=9-8a7e0b74ef008be7.js.map