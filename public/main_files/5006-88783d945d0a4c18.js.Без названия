"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5006],{62219:function(e,t,n){n.d(t,{E:function(){return r}});var o=n(83992);const r=async e=>(await o.hi.get("/api/v2/me/banners",{params:{page:e}})).data.payload},2374:function(e,t,n){n.d(t,{WT:function(){return a},kH:function(){return i},yX:function(){return r}});var o=n(83992);const r=()=>o.hi.post("/api/v2/offerta_accepted"),a=async()=>(await o.hi.get("/api/v2/tutors/offert_info")).data.payload,i=async e=>(await o.hi.post("api/v2/tutors/offert_info",e)).data},26256:function(e,t,n){n.d(t,{$G:function(){return i},Wf:function(){return a},a3:function(){return r}});var o=n(83992);const r=async e=>(await o.hi.get("/api/utcnow",{cancelToken:e})).data.payload.dt,a=async e=>(await o.hi.post("/api/v2/me/test_equipment",e)).data.payload,i=async()=>(await o.hi.get("/api/v2/get_tutor_stage")).data.payload},87829:function(e,t,n){n.d(t,{Z:function(){return j}});var o=n(97582),r=n(85893),a=n(67294),i=n(2664),s=n(14890),l=n(99038),c=n(89675),d=n(28791),u=n(46066),p=n(34067),m=n(53626);const h=(0,m.Z)((e=>({root:{position:"relative",["@media (max-width:".concat(e.breakpoints.values.md-1,"px)")]:{marginLeft:"calc(-50vw + 160px)",marginRight:"calc(-50vw + 160px)"}},top:{marginTop:"20px",marginBottom:"10px"},bottom:{marginTop:"20px",marginBottom:"30px"},inbox:{marginTop:"20px",marginBottom:"20px"},dots:{display:"flex !important",justifyContent:"center",alignItems:"center",margin:"20px 0",padding:0,fontSize:0,lineHeight:0,listStyle:"none","& > li":{display:"block",marginLeft:"5px",marginRight:"5px",cursor:"pointer",width:"auto",height:"auto"},"& > li > *:hover":{backgroundColor:e.palette.primary.dark},"& > li.slick-active > *":{backgroundColor:e.palette.primary.main},"& > li > *":{width:"10px",height:"10px",margin:0,padding:0,borderRadius:"50%",border:"none",fontSize:0,lineHeight:0,backgroundColor:e.palette.action.active,cursor:"pointer"}},arrow:{minWidth:"40px",width:"40px",height:"40px",borderRadius:"50%",border:"none",position:"absolute",bottom:"50%","z-index":"10",padding:0,cursor:"pointer",background:"rgb(229, 229, 229, 0.5)","& > svg":{fontSize:"2.5rem","& > path":{stroke:e.palette.background.paper,fontSize:"2.625rem"}},"&:hover":{background:"rgb(249, 249, 249, 0.7)"},"&:active":{background:"rgb(249, 249, 249, 0.9)","& > svg":{"& > path":{stroke:e.palette.action.active,fontSize:"2.625rem"}}},[e.breakpoints.down("md")]:{minWidth:"24px",width:"24px",height:"24px","& > svg":{fontSize:"1.75rem"}}},arrowLeft:{left:"23px","& > svg":{paddingRight:"3px"},[e.breakpoints.down("md")]:{left:"16px"}},arrowRight:{right:"23px",[e.breakpoints.down("md")]:{right:"16px"}}}))),f=(0,m.Z)((e=>({root:{display:"none",position:"relative",[e.breakpoints.up("lg")]:{height:370},["@media (max-width:".concat(e.breakpoints.values.lg,"px)")]:{height:270}},all:{display:"block"},mobile:{["@media (max-width:".concat(e.breakpoints.values.md,"px)")]:{display:"block"}},tablet:{[e.breakpoints.between("md","lg")]:{display:"block"}},desktop:{[e.breakpoints.up("lg")]:{display:"block"}},iframe:{border:"none",width:"100%",height:"100%",overflow:"hidden",borderRadius:"16px"},coloredStub:{position:"absolute",left:0,right:0,top:0,bottom:0},logoStub:{position:"absolute",width:"146px",height:"120px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},top:{marginTop:"20px",marginBottom:"10px"},bottom:{marginTop:"20px",marginBottom:"30px"},inbox:{marginTop:"20px",marginBottom:"20px"},rounded:{[e.breakpoints.up("md")]:{borderRadius:10,overflow:"hidden"}},skeletonWrapper:{backgroundColor:"#F5F5F5",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 80px",[e.breakpoints.down("xl")]:{padding:"0 100px"}},rightBlock:{backgroundColor:e.palette.action.selected,width:"280px",height:"216px",borderRadius:"12px",[e.breakpoints.down("xl")]:{width:"224px",height:"173px"},[e.breakpoints.down("lg")]:{width:"140px",height:"108px"},[e.breakpoints.down("md")]:{display:"none"}},leftBlock:{"& > div":{backgroundColor:e.palette.action.selected,borderRadius:"12px"},[e.breakpoints.down("md")]:{width:"100%"}},leftFirst:{width:"290px",height:"44px",marginBottom:"28px",[e.breakpoints.down("xl")]:{width:"232px",height:"35px"},[e.breakpoints.down("lg")]:{width:"145px",height:"22px"},[e.breakpoints.down("md")]:{width:"65%",height:"35px"}},leftSecond:{width:"424px",height:"24px",marginBottom:"12px",[e.breakpoints.down("xl")]:{width:"339px",height:"19px"},[e.breakpoints.down("lg")]:{width:"212px",height:"22px"},[e.breakpoints.down("md")]:{width:"85%"}},leftThird:{width:"147px",height:"24px",marginBottom:"28px",[e.breakpoints.down("xl")]:{width:"118px",height:"19px"},[e.breakpoints.down("lg")]:{width:"74px",height:"22px",marginBottom:0},[e.breakpoints.down("md")]:{width:"75%"}},leftForth:{width:"289px",height:"56px",[e.breakpoints.down("xl")]:{width:"232px",height:"45px"},[e.breakpoints.down("lg")]:{display:"none"}}})));var g=n(43899),x=n(57957);n(96016),n(85023);var b=e=>{let{banners:t,position:n,pageName:o}=e;const i=(0,a.useRef)(null),s=h(),l=s[o],c=e=>{const{onClick:t}=e;return(0,r.jsx)(p.Z,{type:"button",onClick:e=>{t(e),i.current.slickPrev},className:"".concat(s.arrowLeft," ").concat(s.arrow),children:(0,r.jsx)(g.Y4O,{fontSize:"large"})})},d=e=>{const{onClick:t}=e;return(0,r.jsx)(p.Z,{type:"button",onClick:e=>{t(e),i.current.slickNext},className:"".concat(s.arrowRight," ").concat(s.arrow),children:(0,r.jsx)(g.LZ3,{fontSize:"large"})})},m={nextArrow:(0,r.jsx)(d,{}),prevArrow:(0,r.jsx)(c,{}),dotsClass:s.dots,...x.FG},f=(0,r.jsx)(u.Z,{ref:i,className:s[n],...m,children:t});return(0,r.jsx)("div",{className:"".concat(s.root," ").concat(l),children:t.length>1?f:t})};var v=e=>{let{isCarousel:t,formats:n,index:o,src:i="about:blank",position:s}=e;const l=(0,a.useRef)(null),c=(0,a.useRef)(null),[d,u]=(0,a.useState)(!1),p=f();let m=p.root;t?m+=" ".concat(p.all):(n.forEach((e=>{m+=" ".concat(p[e])})),m+=" ".concat(p[s]));const h=e=>{var t,n;const{target:o,type:r}=e,a=/mouse/.test(r),i=/touch/.test(r),s="a"===(null==o||null===(t=o.tagName)||void 0===t?void 0:t.toLowerCase()),c="button"===(null==o||null===(n=o.tagName)||void 0===n?void 0:n.toLowerCase());let d;switch(!0){case r===x.eC.MOUSEUP&&s:return void(window.parent.location=o.href);case r===x.eC.MOUSEUP&&c:return void o.click();case a&&!s&&!c:d=new MouseEvent(r,e),l.current.dispatchEvent(d),e.preventDefault();break;case i&&!s&&!c:d=new TouchEvent(r,e),l.current.dispatchEvent(d),e.preventDefault()}},g=e=>{var t;const{target:n}=e;"a"===(null==n||null===(t=n.tagName)||void 0===t?void 0:t.toLowerCase())&&(window.parent.location=n.href)};return(0,r.jsxs)("div",{className:"".concat(m," ").concat(t?"":p.rounded),ref:l,children:[!d&&(0,r.jsx)("div",{className:p.coloredStub,children:(0,r.jsxs)("div",{className:p.skeletonWrapper,children:[(0,r.jsxs)("div",{className:p.leftBlock,children:[(0,r.jsx)("div",{className:p.leftFirst}),(0,r.jsx)("div",{className:p.leftSecond}),(0,r.jsx)("div",{className:p.leftThird}),(0,r.jsx)("div",{className:p.leftForth})]}),(0,r.jsx)("div",{className:p.rightBlock})]})}),(0,r.jsx)("iframe",{title:o,className:"banner-frame ".concat(p.iframe),width:"100%",height:"100%",src:i,ref:c,onLoad:()=>{if(u(!0),t){["mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"].forEach((e=>{c.current.contentDocument.addEventListener(e,h)}))}else c.current.contentDocument.addEventListener("click",g)},scrolling:"no",loading:"lazy"})]})},w=n(74476),k=n(73894),y=n(65255);class j extends a.Component{componentDidMount(){window.addEventListener("resize",this.updateCurrFormatDebounce),this.updateCurrentFormat()}componentWillUnmount(){window.removeEventListener("resize",this.updateCurrFormatDebounce)}render(){const{bannersData:e=[]}=this.props;return this.getBanners(e)}constructor(...e){super(...e),this.updateCurrentFormat=()=>{const{setCurrentFormat:e,theme:t}=this.props,{breakpoints:n}=t,o=window.innerWidth,r=n.keys.find(((e,t,r)=>{const a=r[t+1]||!1;return o>=n.values[e]&&a&&o<n.values[a]}))||"xl";e(n.formats[r])},this.updateCurrFormatDebounce=(0,y.D)(this.updateCurrentFormat,x.xE),this.hasExperimentsMatch=e=>{const{userExperiments:t}=this.props;return!!!(null==e?void 0:e.length)||e.some((e=>t.some((t=>e===t))))},this.getFilteredBannersData=e=>{const{currentFormat:t}=this.props;return e.filter(((e,n)=>{const{formats:o,experiments:r}=e,a=o.some((e=>e===k.Z.ALL||e===t)),i=this.hasExperimentsMatch(r),s=n<x.E$;return a&&i&&s}))},this.getBanners=e=>{if(!e)return null;const t=this.getFilteredBannersData(e),{position:n=x.Ly.INBOX,pageName:o}=this.props,a=t.reduce(((e,t,o,a)=>{const{formats:i,landing:s,domElementId:l,experiments:c}=t,{path:d}=s,u=i.join(" "),p=c.join(" "),m=a.length>1;return e.push((0,r.jsx)(v,{position:n,isCarousel:m,formats:i,index:"".concat(l," FORMATS = ").concat(u," EXPERIMENTS = ").concat(p),src:d})),e}),[]);return(0,r.jsx)(b,{pageName:o,position:n,banners:a})}}}j=(0,o.gn)([c.Z,l.Z,(0,i.$j)(((e,t)=>{const{position:n=x.Ly.INBOX}=t;return{bannersData:(0,d.cY)(e,n),currentFormat:(0,d.dO)(e),userExperiments:(0,w.T8)(e),pageName:(0,d.D1)(e)}}),(e=>(0,s.DE)(d.Nw,e)))],j)},28791:function(e,t,n){n.d(t,{D1:function(){return g},Nw:function(){return d},cY:function(){return f},dO:function(){return x},rP:function(){return h}});var o=n(29829),r=n(62219),a=n(57957),i=n(73894);const s="banners",l={items:[],pageName:"",currentFormat:i.Z.ALL},c=(0,o.oM)({name:s,initialState:l,reducers:{setBannersData:(e,t)=>{let{payload:n}=t;return Array.isArray(n)&&n.length?{...e,items:n}:e},setPageName:(e,t)=>{let{payload:n}=t;return{...e,pageName:n}},setCurrentFormat:(e,t)=>{let{payload:n}=t;return{...e,currentFormat:n}}}});t.ZP=c;const{actions:d}=c,{setBannersData:u,setPageName:p,setCurrentFormat:m}=c.actions,h=()=>async e=>{const t=window.location.pathname.split("/study/")[1],n=await(0,r.E)(t);e(u(n)),e(p(t))},f=(e,t)=>{const{banners:{pageName:n,items:o}}=e;if(!o)return null;const r={[a.Ly.TOP]:new RegExp("^(adminka-banner)-(".concat(n,"|all)-top$")),[a.Ly.BOTTOM]:new RegExp("^(adminka-banner)-(".concat(n,"|all)-bottom$")),[a.Ly.INBOX]:new RegExp("^(adminka-banner)-".concat(n,"-inbox"))},i=o.filter((e=>{const n=e.domElementId.split(" "),o=r[t];return n.some((e=>o.test(e)))}));return i.length?i:null},g=e=>e[s].pageName,x=e=>e[s].currentFormat},57957:function(e,t,n){n.d(t,{E$:function(){return o},FG:function(){return s},Ly:function(){return a},eC:function(){return i},xE:function(){return r}});const o=5,r=300;var a;!function(e){e.TOP="top",e.BOTTOM="bottom",e.INBOX="inbox"}(a||(a={}));const i={MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",MOUSELEAVE:"mouseleave"},s={infinite:!0,swipeToSlide:!0,arrows:!0,dots:!0,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,autoplay:!0,autoplaySpeed:15e3}},33060:function(e,t,n){n.d(t,{Z:function(){return h},b:function(){return m}});var o=n(85893),r=n(67294),a=n(2664),i=n(63885),s=n(56760),l=n(11510),c=n(97642),d=n(7390);var u=n(86942);let p=null;const m=function(e){let{onMessage:t,onOpen:n=()=>{}}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=(0,a.v9)(u.HJ),s=e=>t(e.data);(0,r.useEffect)((()=>(i&&o.every((e=>null!=e))&&(n(),null==p||p.addEventListener("message",s)),()=>{null==p||p.removeEventListener("message",s)})),[i,...o])};var h=()=>{const e=(0,s.Z)(),t=(0,a.I0)(),n=(0,a.v9)(u.JP),[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1);(0,i.Z)(e.breakpoints.up("md"));(0,r.useEffect)((()=>{t((0,u.WD)())}),[]),(0,r.useEffect)((()=>{n&&w()}),[n]);const w=()=>{const{API_URL:e,SOCKET_URL:t}=(0,c.Gr)({mmUrl:n.mmurl,secure:n.secure}),o=".".concat((e=>{let t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t.indexOf("www.")>-1&&(t=t.split("www.")[1]),t=t.split(":")[0],t=t.split("?")[0],t})(e).split(".").slice(1).join("."));(0,d.d)("MMUSERID",n.mm_user,{expires:36e3,path:"/",domain:o,secure:!0}),(0,d.d)("MMAUTHTOKEN",n.mm_token,{expires:36e3,path:"/",domain:o,secure:!0}),f(t),m(!0)},k=JSON.stringify({seq:1,action:"authentication_challenge",data:{token:null==n?void 0:n.mm_token}});return p&&(0,o.jsx)(l.Z,{wsName:"chatWS",url:h,authMessage:k,wsOptions:{debug:!1},onOpen:()=>{!1===g&&x(!0),t((0,u.A_)())}})}},86942:function(e,t,n){n.d(t,{A_:function(){return s},HJ:function(){return d},JP:function(){return c},WD:function(){return l}});var o=n(29829),r=n(1999);const a=(0,o.oM)({name:"chat",initialState:{mattermost:null,isOpen:!1},reducers:{setMattermost:(e,t)=>{let{payload:n}=t;e.mattermost=n},setOpen:e=>{e.isOpen=!0}}});t.ZP=a;const{setMattermost:i,setOpen:s}=a.actions,l=()=>async e=>{const t=await(0,r.HJ)();r.xU.defaults.baseURL=t.mmurl,r.xU.defaults.headers.Authorization="Bearer ".concat(t.mm_token),e(i(t))},c=e=>e.chat.mattermost,d=e=>e.chat.isOpen},51153:function(e,t,n){n.d(t,{Z:function(){return o.Z}});var o=n(33060)},96864:function(e,t,n){var o=n(85893),r=n(67294),a=n(94246),i=n(73327),s=n(58377),l=n(43899);const c="#4CBDE3";class d extends r.Component{componentDidCatch(e,t){this.setState({hasError:!0})}render(){const{children:e,classes:t}=this.props;return this.state.hasError?(0,o.jsx)("div",{className:t.root,children:(0,o.jsxs)("div",{className:t.wrap,children:[(0,o.jsx)(l.zMQ,{}),(0,o.jsx)(a.Z,{className:t.text,variant:"subtitle2",children:"Мы уже чиним этот модуль"})]})}):e}constructor(...e){super(...e),this.state={hasError:!1}}}t.Z=(0,s.Z)((e=>(0,i.Z)({root:{width:"100%",height:"auto",minHeight:65,display:"flex",justifyContent:"center",alignItems:"center",padding:16},text:{fontSize:15,color:e.palette.background.default,marginLeft:4},wrap:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"12px 16px",borderRadius:16,boxShadow:"4px 8px 20px 0 rgba(38, 38, 38, 0.08)",animation:"$fade 10s forwards","-webkit-animation":"$fade 10s forwards"},"@keyframes fade":{"0%":{backgroundColor:c},"90%":{backgroundColor:c},"100%":{backgroundColor:e.palette.info.avatar}}})))(d)},78736:function(e,t,n){n.d(t,{$Y:function(){return U},Cq:function(){return F},D4:function(){return v},E4:function(){return W},EE:function(){return w},Gh:function(){return j},Gt:function(){return _},K4:function(){return u},MU:function(){return J},NH:function(){return S},PZ:function(){return I},Q$:function(){return A},Rj:function(){return d},SN:function(){return i},TZ:function(){return O},WQ:function(){return N},ZB:function(){return C},_f:function(){return L},an:function(){return k},cG:function(){return M},cc:function(){return x},dy:function(){return T},e8:function(){return h},kA:function(){return D},kS:function(){return P},me:function(){return b},nR:function(){return c},p1:function(){return Z},pR:function(){return z},qI:function(){return E},qP:function(){return g},r7:function(){return m},s9:function(){return p},ss:function(){return f},uk:function(){return R},yZ:function(){return B}});var o=n(29829),r=n(64593),a=n(28143);const i="lessonsList",s={scheduled:{allLessons:[],showPagination:!0},pasted:{allLessons:[],showPagination:!0},emptyJournals:[],offset:{scheduled:a.Z.INITIAL_OFFSET,pasted:a.Z.INITIAL_OFFSET},loading:!1,activeTab:r.J.SCHEDULED,goalNames:{},isJournalModalOpen:!1,isCancelJournalModalOpen:!1,lessonId:"",journal:null,currentPage:null,isIntro:!1,journalFilled:!1,pupilBalance:null,eventsLesson:null},l=(0,o.oM)({name:i,initialState:s,reducers:{setShowPagination:(e,t)=>{let{payload:{lessonType:n,data:o}}=t;e[n].showPagination=o},setLessons:(e,t)=>{let{payload:{lessonType:n,data:o}}=t;e[n].allLessons=o},loadMore:(e,t)=>{let{payload:n}=t;const o=e.offset[n]+a.Z.INCREASE_AMOUNT_OFFSET;e.offset[n]=o},setOffsetPasted:(e,t)=>{let{payload:n}=t;e.offset.pasted=n},setActiveTab:(e,t)=>{let{payload:n}=t;e.activeTab=n},setLoading:(e,t)=>{let{payload:n}=t;e.loading=n},setGoalNames:(e,t)=>{let{payload:n}=t;e.goalNames=n},setJournalData:(e,t)=>{let{payload:{isJournalModalOpen:n,journalFilled:o,lessonId:r,isIntro:a,pupilBalance:i}}=t;e.isJournalModalOpen=n,e.journalFilled=o,e.lessonId=r,e.isIntro=a,e.pupilBalance=i},setJournalModal:(e,t)=>{let{payload:n}=t;e.isJournalModalOpen=n},setCancelJournalModal:(e,t)=>{let{payload:n}=t;e.isCancelJournalModalOpen=n},setJournal:(e,t)=>{let{payload:n}=t;e.journal=n},setCurrentPage:(e,t)=>{let{payload:n}=t;e.currentPage=n},setEmptyJournals:(e,t)=>{let{payload:n}=t;e.emptyJournals=n},setJournalFilled:(e,t)=>{let{payload:n}=t;e.journalFilled=n},setPupilBalance:(e,t)=>{let{payload:n}=t;e.pupilBalance=n},setEventsLesson:(e,t)=>{let{payload:n}=t;e.eventsLesson=n}}});t.ZP=l;const{loadMore:c,setLessons:d,setLoading:u,setShowPagination:p,setActiveTab:m,setGoalNames:h,setEmptyJournals:f,setJournalModal:g,setCancelJournalModal:x,setJournal:b,setCurrentPage:v,setJournalFilled:w,setOffsetPasted:k,setPupilBalance:y,setJournalData:j,setEventsLesson:N}=l.actions,E=e=>e[i].offset.pasted,_=e=>e[i].offset.scheduled,C=e=>e[i].scheduled.allLessons,Z=e=>e[i].pasted.allLessons,S=e=>e[i].loading,L=e=>e[i].scheduled.showPagination,P=e=>e[i].pasted.showPagination,I=e=>e[i].activeTab,O=e=>e[i].goalNames,T=e=>{const{user:t}=e.userAppBar,{empty_journals_num:n,manager_of_intro_lesson:o,experiment:r,id:a}=t;return{emptyJournalsNum:n,isManagerOfIntroLesson:o,experiment:r,id:a}},M=e=>e[i].emptyJournals,B=e=>e[i].isJournalModalOpen,R=e=>e[i].isCancelJournalModalOpen,F=e=>e[i].lessonId,D=e=>e[i].journal,A=e=>e[i].currentPage,z=e=>e[i].isIntro,W=e=>e[i].journalFilled,J=e=>e[i].pupilBalance,U=e=>e[i].eventsLesson},56520:function(e,t,n){var o=n(85893),r=n(2664),a=n(74476);t.Z=()=>{const e=(0,r.v9)(a.dy);return(0,o.jsx)(o.Fragment,{children:e&&void(window._tmr||(window._tmr=[])).push({id:"3293604",type:"pageView",start:(new Date).getTime(),userid:null==e?void 0:e.id})})}},34079:function(e,t,n){n.d(t,{$r:function(){return v},D6:function(){return _},DA:function(){return B},DF:function(){return h},Fj:function(){return k},JH:function(){return y},Kn:function(){return g},NA:function(){return u},O0:function(){return m},OA:function(){return D},OM:function(){return j},OO:function(){return I},R3:function(){return f},Um:function(){return R},Wd:function(){return L},XB:function(){return x},Ym:function(){return F},c0:function(){return C},c3:function(){return w},cK:function(){return M},dZ:function(){return r},dy:function(){return E},g0:function(){return T},j$:function(){return a},lz:function(){return O},mH:function(){return s},mL:function(){return b},no:function(){return S},o4:function(){return i},q:function(){return d},q7:function(){return N},rs:function(){return Z},vM:function(){return c},wy:function(){return p},yC:function(){return l},zR:function(){return P}});var o=n(62704);const r="isSelfAppointmentFailed",a=30,i=60,s=2,l=54,c=21,d=15,u=7,p=2*u,m=9,h=12,f=(0,o.Z)().format("DD.MM.YY"),g=(0,o.Z)().format("MMMM"),x=(0,o.Z)().format("YYYY"),b=(0,o.Z)().month(),v=b+1,w=(0,o.Z)().date(),k=(0,o.Z)().day(),y=14,j=21,N="Enter",E=5,_=7,C=10,Z=5,S=5,L=1,P=0,I=e=>"preschooler"===e||Number(e)<=4,O=(e,t,n)=>{const o=e.filter((e=>{let{subject:o,tutorQualification:r}=e;return(o===t||!o)&&r===n}));return(null==o?void 0:o.reduce(((e,t)=>e+t.lessonsNum),0))||0},T=Array.from({length:6},((e,t)=>t+1)),M=e=>{const t=(0,o.Z)(e).format("dddd");return t.charAt(0).toUpperCase()+t.substr(1)},B=e=>Object.keys(e).reduce(((t,n)=>(e[n].length&&t.push({value:n,timestamp:e[n].sort()[0]}),t)),[]),R=e=>e&&"math"===e.subject?5:10,F=(e,t)=>{const{subject:n,tutorQualification:o}=t;return e.filter((e=>{let{takes_new_pupils:t,manager_of_intro_lesson:r,interview_passed:a,goals:i={}}=e;var s;return a&&t&&!r&&(null===(s=i[n])||void 0===s?void 0:s.some((e=>{let{quark_smell:t}=e;return t===o})))}))},D=e=>e.filter(((e,t,n)=>n.findIndex((t=>{let{id:n}=t;return n===e.id}))===t))},64593:function(e,t,n){var o;n.d(t,{J:function(){return o}}),function(e){e.SCHEDULED="scheduled",e.PASTED="pasted"}(o||(o={}))},28143:function(e,t){t.Z={INITIAL_OFFSET:5,INCREASE_AMOUNT_OFFSET:5,SCHEDULE:"schedule",PAST:"past"}},73894:function(e,t){var n;!function(e){e.ALL="all",e.MOBILE="mobile",e.TABLET="tablet",e.DESKTOP="desktop"}(n||(n={})),t.Z=n},89675:function(e,t,n){var o=n(85893),r=n(96864);t.Z=e=>t=>(0,o.jsx)(r.Z,{children:(0,o.jsx)(e,{...t})})},91440:function(e,t,n){var o=n(67294);t.Z=()=>{const[e,t]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&t(!0)}),[]),e}},21152:function(e,t,n){n.d(t,{Z:function(){return N}});var o,r,a=n(85893),i=n(11163),s=n(3850),l=n(67294),c=n(2664),d=n(77574),u=n(53626),p=n(73327),m=n(56760),h=n(94184),f=n.n(h),g=n(51171),x=n(91440),b=n(43899),v=n(81608),w=n(74476);!function(e){e.PupilOffer="/about/offert",e.ApplicationOffer="/about/offert_application",e.TutorOffer="/about/tutor_offert",e.PrivacyPolicy="/about/privacy_policy"}(o||(o={})),function(e){e.PupilOffer="/about/uchi_doma_offert",e.ApplicationOffer="/about/uchi_doma_offert_application",e.TutorOffer="/about/uchi_doma_tutor_offert",e.PrivacyPolicy="/about/uchi_doma_privacy_policy"}(r||(r={}));const k=["/chat","/calendar"];var y=o;const j=(0,u.Z)((e=>(0,p.Z)({root:{position:"relative",maxHeight:"280px",padding:"102px 137px 130px",backgroundColor:"#2E0B55",zIndex:1,[e.breakpoints.down("lg")]:{padding:"66px 66px 64px 80px"},[e.breakpoints.down("md")]:{maxHeight:"357px",padding:"76px 40px 67px"}},rootPupil:{maxHeight:"309px",padding:"76px 130px 84px",[e.breakpoints.down("lg")]:{padding:"76px 66px 64px 80px"},[e.breakpoints.down("md")]:{maxHeight:"459px",padding:"76px 40px 67px"}},title:{marginBottom:"30px",fontFamily:"IBM Plex Sans, Arial, sans-serif",color:e.palette.background.paper,[e.breakpoints.down("lg")]:{marginBottom:"20px"},[e.breakpoints.down("md")]:{opacity:"0.4"}},wrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("md")]:{flexDirection:"column",alignItems:"flex-start"}},wrapperPupil:{display:"flex",flexDirection:"column",alignItems:"inherit"},support:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",[e.breakpoints.down("md")]:{flexDirection:"column-reverse",alignItems:"flex-start",marginBottom:"30px"}},link:{width:"44px",height:"44px",marginRight:"11px","&:last-of-type":{marginRight:0},"&:hover":{cursor:"pointer",transform:"scale(1.1)"}},socials:{display:"flex",justifyContent:"space-between",marginRight:"20px",[e.breakpoints.down("md")]:{justifyContent:"flex-start",marginTop:"0"}},social:{width:"44px",height:"44px"},phone:{display:"flex",alignItems:"center",justifyContent:"space-between","&:hover":{cursor:"pointer"},[e.breakpoints.down("md")]:{justifyContent:"flex-start",marginBottom:"29px"}},icon:{width:"25px",height:"25px",marginRight:"13px",color:e.palette.background.paper,opacity:"0.2"},number:{fontFamily:"IBM Plex Sans, Arial, sans-serif",color:e.palette.background.paper,opacity:"0.9"},links:{display:"flex",alignItems:"flex-start",justifyContent:"flex-end",flexWrap:"wrap",maxWidth:"350px",marginTop:"-60px",textAlign:"end",[e.breakpoints.down("lg")]:{marginTop:"-50px"},[e.breakpoints.down("md")]:{flexDirection:"column",alignItems:"flex-start",textAlign:"start",marginTop:"6px"}},linksPupil:{alignItems:"flex-start",justifyContent:"space-between",marginTop:"24px",maxWidth:"100%","& > div":{marginRight:"16px"},[e.breakpoints.down("lg")]:{marginTop:"42px"}},offer:{marginBottom:"20px",[e.breakpoints.down("lg")]:{display:"flex",flexWrap:"wrap"},[e.breakpoints.down("md")]:{flexDirection:"column",marginBottom:"0"}},footnotes:{fontSize:e.typography.body1.fontSize,textDecoration:"underline",color:"#EDEFFF",[e.breakpoints.down("md")]:{fontSize:e.typography.body2.fontSize,fontWeight:e.typography.fontWeightMedium,marginBottom:"17px"}},footnotesPupil:{"&:first-of-type":{marginRight:"16px"}}})));var N=e=>{let{isPupilProp:t,experimentProp:n}=e;const o=(0,m.Z)(),u=j(o),{t:p}=(0,s.$G)("components.footer"),h=t||(0,c.v9)(w.QL),N=(0,c.v9)(w.T8),E=n||(null==N?void 0:N.includes("uchi_doma")),_=f()(u.wrapper,{[u.wrapperPupil]:h}),C=f()(u.links,{[u.linksPupil]:h}),Z=f()(u.root,{[u.rootPupil]:h}),{asPath:S}=(0,i.useRouter)(),L=k.includes(S),P=f()(u.footnotes,{[u.footnotesPupil]:h}),[I,O]=(0,l.useState)(!1),T=(0,x.Z)();return(0,l.useEffect)((()=>{O(T)}),[T]),L?null:(0,a.jsxs)("footer",{className:Z,children:[(0,a.jsx)(v.Z,{variant:"h4",className:u.title,children:p("title")}),(0,a.jsxs)("div",{className:_,children:[(0,a.jsxs)("div",{className:u.support,children:[(0,a.jsxs)("div",{className:u.socials,children:[(0,a.jsx)(d.Z,{className:u.link,href:h?g.Zl:g.U8,underline:"none",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(b.Tx3,{className:u.social,htmlColor:o.palette.background.paper})}),h&&(0,a.jsx)(a.Fragment,{}),h&&I&&(0,a.jsx)(d.Z,{className:u.link,href:g.Eo,underline:"none",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(b.rT4,{className:u.social,htmlColor:o.palette.background.paper})}),(0,a.jsx)(d.Z,{className:u.link,href:h?g.eh:g.Sh,underline:"none",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(b.NXj,{className:u.social,htmlColor:o.palette.background.paper})})]}),h&&(0,a.jsxs)(d.Z,{className:u.phone,href:g.cm,underline:"none",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(b.abr,{className:u.icon,fontSize:"large"}),(0,a.jsx)(v.Z,{variant:"h4",className:u.number,children:g.$})]})]}),(0,a.jsxs)("div",{className:C,children:[(0,a.jsx)("div",{className:u.offer,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:P,href:E?r.PupilOffer:y.PupilOffer,target:"_blank",rel:"noopener noreferrer",children:p("public_offer")}),(0,a.jsx)("a",{className:u.footnotes,href:E?r.ApplicationOffer:y.ApplicationOffer,target:"_blank",rel:"noopener noreferrer",children:p("offer_application")})]}):(0,a.jsx)("a",{className:u.footnotes,href:E?r.TutorOffer:y.TutorOffer,target:"_blank",rel:"noopener noreferrer",children:p("public_offer")})}),(0,a.jsx)("a",{className:u.footnotes,href:E?r.PrivacyPolicy:y.PrivacyPolicy,target:"_blank",rel:"noopener noreferrer",children:p("personal_policy")})]})]})]})}},53135:function(e,t,n){n.d(t,{Z:function(){return W}});var o=n(97582),r=n(85893),a=n(11163),i=n(67294),s=n(2664),l=n(14890),c=(n(87908),n(74476)),d=n(43899),u=n(42027),p=n(98255),m=(n(26358),n(54587)),h=n(41664),f=n.n(h),g=n(3850),x=n(77574),b=n(21659),v=n(34067),w=n(59505),k=n(34370),y=n(37969),j=n(10076),N=n(6621),E=n(4288),_=n(11202),C=n(63885),Z=n(56760),S=n(53626),L=n(44879);const P="#f5f5f5";var I=n(58919),O=n(46375),T=n(81608),M=n(4492);const B=["binded_account","training_lesson","payoffs","test-room","library","go_back","course"];function R(e){let{isOpen:t,isExpanded:n,onClose:o,onExpand:s,onCollapse:l,isPupil:c,balance:u,reserved:p,navList:m=[],rewardAlert:h,experiment:R=[],updateMenu:F,user:D}=e;const A=(0,a.useRouter)(),{t:z}=(0,g.$G)("components.sidebar"),W=(0,Z.Z)(),J=(0,C.Z)(W.breakpoints.up("xl")),U=(0,C.Z)(W.breakpoints.down("md")),H=(0,C.Z)(W.breakpoints.between("md","xl")),Q=J||n||U,G=null==R?void 0:R.includes("uchi_doma"),q=(e=>{let{isExpanded:t,isSmallBalanceIcon:n}=e;return(0,S.Z)((e=>({root:{position:"relative","&::after":{content:'""',position:"fixed",display:()=>t?"none":"block",zIndex:1201,width:28,height:44,top:30,left:55,borderRadius:"0 44px 44px 0",backgroundColor:P,backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='9' height='14' viewBox='0 0 9 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 13L7 7L1 1' stroke='%23222222' stroke-width='2'/%3E%3C/svg%3E%0A\")",backgroundRepeat:"no-repeat",backgroundPosition:"0 center"},"& .MuiPaper-root":{backgroundColor:()=>t?"auto":P}},nav:{minHeight:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",textAlign:"center",[e.breakpoints.down("md")]:{width:L.vg.xl,padding:"43px 20px"},[e.breakpoints.between("md","xl")]:{width:()=>t?L.vg.xl:L.vg.lg,padding:()=>t?"43px 20px":"43px 0",alignItems:()=>t?"stretch":"center"},[e.breakpoints.up("xl")]:{width:L.vg.xl,padding:"26px 20px 40px"}},logo:{alignSelf:"center",[e.breakpoints.down("md")]:{width:200,height:53,marginBottom:24},[e.breakpoints.between("md","xl")]:{width:()=>t?200:18,height:()=>t?53:18},[e.breakpoints.up("xl")]:{width:200,height:53,marginBottom:24}},uchiDomaLogo:{alignSelf:"center",width:212,height:26,marginBottom:24,[e.breakpoints.down("xl")]:{width:t?212:35,height:t?26:60,marginTop:t?0:-22},[e.breakpoints.down("md")]:{width:212,height:26}},balanceInfo:{display:"flex",alignItems:"center",justifyContent:"space-around",height:"100%",padding:"9px 22px","&:active":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:"rgba(126, 40, 223, 0.35)"},"&:focus-visible":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:"rgba(169, 112, 245, 0.08)",outline:"none"}},buttonText:{fontWeight:700,lineHeight:"20px",letterSpacing:"2px",color:e.palette.primary.main,marginRight:"15px",whiteSpace:"nowrap"},balancePopover:{"& .MuiPopover-paper":{overflow:"hidden",borderColor:"transparent"}},balanceValueCollapsed:{flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:n?"26px":"50%",minWidth:n?24:44,minHeight:n?24:44,background:e.palette.success.main,color:"#fff",overflow:"hidden",padding:"0 5px",marginTop:n?0:48},navListItem:{display:"flex",alignItems:"center",padding:10,color:e.palette.action.active,cursor:"pointer","&:hover":{color:e.palette.primary.main,"& *":{fill:e.palette.primary.main}},"& .MuiListItemText-root":{marginLeft:12,display:"flex",alignItems:"center",justifyContent:"space-between"},"&.Mui-selected":{background:"#F6EEFF",[e.breakpoints.between("md","xl")]:{background:()=>t?"#F6EEFF":"transparent"},borderRadius:24,color:e.palette.primary.main,"&:hover":{background:"#F6EEFF"},"& svg":{fill:e.palette.primary.main},"&::before":{content:'""',position:"absolute",left:-20,width:8,height:"100%",background:e.palette.primary.main,borderRadius:10}}},listWrapper:{maxHeight:"60vh",minWidth:"355px",overflowY:"auto",[e.breakpoints.down("md")]:{minWidth:"300px"}},list:{padding:"8px 0","& h6":{padding:"0 16px"},[e.breakpoints.down("md")]:{padding:"16px 0"}},emptyBalance:{padding:"15px 25px",color:e.palette.action.active},text:{fontSize:"12px",lineHeight:"20px",alignItems:"center",color:e.palette.action.active,opacity:"0.5"},subGroupTitle:{display:"block",color:e.palette.text.disabled,fontSize:12,letterSpacing:2,"&:hover":{cursor:"initial"}},navLink:{textDecoration:"none"},infoWrapper:{display:"flex",justifyContent:"space-between",whiteSpace:"nowrap",padding:"8px 16px",fontWeight:500,fontSize:"17px",lineHeight:"16px",color:e.palette.action.active,cursor:"default","&:not(:last-child)":{borderBottom:"1px solid",borderBottomColor:"rgba(184,184,184,0.6)"},[e.breakpoints.down("md")]:{fontSize:"15px"}},infoItem:{width:"50%",marginRight:"20px",minWidth:"170px",[e.breakpoints.down("md")]:{marginRight:"10px"}},infoLabel:{width:"auto"},addBalanceText:{color:e.palette.background.paper,marginRight:"10px"},addButton:{margin:"15px auto",display:"flex","&:focus-visible":{backgroundColor:e.palette.primary.dark,outline:"none"},[e.breakpoints.down("md")]:{margin:"15px auto 0",padding:"10px 31px"}},listItem:{marginBottom:20,borderBottom:"1px solid",borderBottomColor:"rgba(184,184,184,0.6)"},info:{color:e.palette.action.active,"&:first-letter":{textTransform:"uppercase"}},notification:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",color:e.palette.background.paper,background:e.palette.primary.main},badge:{display:"flex","& .MuiBadge-badge":{top:"50%",right:"5%"}}})))})({isExpanded:n,isSmallBalanceIcon:Q})(),[$,Y]=(0,i.useState)(null),V=(null==u?void 0:u.length)>0||(null==p?void 0:p.length)>0,X=(null==u?void 0:u.reduce(((e,t)=>e+t.lessonsNum),0))||0,K=(null==p?void 0:p.reduce(((e,t)=>e+t.lessonsNum),0))||0,ee=(0,i.useRef)(),te=D.class,{manager_of_intro_lesson:ne,empty_journals_num:oe}=("preschooler"===te||Number(te),D);let re=null,ae=null,ie=null;const se=()=>{const{innerWidth:e}=window;e>=W.breakpoints.values.md&&e<W.breakpoints.values.xl&&t&&(o(),s())};switch((0,i.useEffect)((()=>(window.addEventListener("resize",se),()=>window.removeEventListener("resize",se))),[]),(0,i.useEffect)((()=>{const e=u.filter((e=>{let{tutorQualification:t}=e;return t!==O.m.Intro})).filter((e=>{let{tutorQualification:t}=e;return t!==O.m.Expert}));c&&0!==e.length&&F()}),[A.asPath]),!0){case U:re="temporary",ie=()=>o();break;case H:re=n?"temporary":"permanent",ae=n?"default":"small",ie=()=>l();break;case J:re="permanent"}const le=(0,i.useCallback)((e=>{U&&"mouseenter"===e.type||Y($?null:ee.current)}),[$]),ce=()=>{document.querySelector('.MuiPopover-root >[aria-hidden="true"]').removeEventListener("mouseover",ce),Y(null)},de=(0,i.useCallback)((()=>{ce(),A.push("/pricing")}),[]),ue=(e,t,n,o)=>e?o?"".concat(z("regular")," / ").concat(t):"".concat(z("regular")," / ").concat(t," / ").concat(n):"".concat(z("intro")," / ").concat(n),pe=(e,t)=>e.length?(0,r.jsxs)("div",{className:q.listItem,children:[(0,r.jsx)(T.Z,{variant:"".concat(U?"subtitle2":"subtitle1"),style:{color:W.palette.primary.main},children:"".concat(z(t),":")}),(0,r.jsx)(r.Fragment,{children:e.map((e=>{const t=!e.duration&&e.tutorQualification===O.m.Bonus;let n;n=t?"":"".concat((e.duration||60)-5," ").concat(z("min"));const o=z(e.tutorQualification),a=O.u[e.subject]||z("any_subject"),i=o!==z("intro"),s="".concat(e.lessonsNum," ").concat(z((0,M.Z)(e.lessonsNum,"lesson1","lesson2","lesson5"))),l="".concat(e.subject," ").concat(e.tutorQualification);return(0,r.jsxs)("div",{className:q.infoWrapper,children:[(0,r.jsxs)("div",{className:q.infoItem,children:[(0,r.jsx)(T.Z,{variant:"body1",className:q.info,children:a}),(0,r.jsx)(T.Z,{variant:"body2",className:q.text,children:ue(i,o,n,t)})]}),(0,r.jsx)("div",{className:q.infoLabel,children:(0,r.jsx)(T.Z,{variant:"body1",style:{color:W.palette.action.active},children:s})})]},l)}))})]}):null,me=()=>(0,r.jsx)(T.Z,{variant:n?"subtitle2":"body2",className:q.balanceValueCollapsed,children:X+K}),he=H&&!n?()=>s():null,fe=H?()=>s():null;return(0,r.jsx)(k.ZP,{variant:re,open:H||t,onClose:ie,className:H?q.root:"",onClick:he,PaperProps:{onClick:fe},ModalProps:{keepMounted:!0},children:(0,r.jsxs)("nav",{className:q.nav,children:[(0,r.jsx)("a",{style:{textDecoration:"none"},href:"/",children:(0,r.jsx)(I.Z,{className:G?q.uchiDomaLogo:q.logo,size:ae,isShowUchiDomaLogo:G})}),c&&(J||n||t)&&(0,r.jsxs)(v.Z,{variant:"outlined",className:q.balanceInfo,ref:ee,onClick:le,children:[(0,r.jsx)(T.Z,{variant:"subtitle2",className:q.buttonText,children:"".concat(z("lessons_balance"))}),me()]}),c&&H&&!n&&me(),c?(0,r.jsx)(_.ZP,{className:q.balancePopover,anchorEl:$,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean($),onClose:ce,disableScrollLock:!0,children:(0,r.jsx)("div",{className:q.listWrapper,children:(0,r.jsxs)("div",{className:q.list,onMouseEnter:()=>{setTimeout((()=>{var e;null===(e=document.querySelector('.MuiPopover-root >[aria-hidden="true"]'))||void 0===e||e.addEventListener("mouseover",ce)}),100)},children:[V?(0,r.jsxs)(r.Fragment,{children:[pe(p,"reserved"),pe(u,"balance")]}):(0,r.jsx)(T.Z,{variant:U?"subtitle2":"subtitle1",className:q.emptyBalance,children:"".concat(z("empty_balance"))}),(0,r.jsxs)(v.Z,{onClick:de,className:q.addButton,children:[(0,r.jsx)(T.Z,{variant:"subtitle2",className:q.addBalanceText,children:"".concat(z("add_to_balance"))}),(0,r.jsx)(d.mrv,{})]})]})})}):null,m.map(((e,o)=>{let{title:a,elements:s}=e;const l=o!==m.length-1,d=a&&0!==o&&(J||t||n);return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(y.Z,{children:[d&&(0,r.jsx)(j.ZP,{children:(0,r.jsx)(x.Z,{underline:"none",className:q.subGroupTitle,children:a})}),s.map((e=>{let{text:o,name:a,href:i,icon:s,isActive:l,iconSize:d}=e;const u="reward"===a&&h,p=!("me"===a&&!l&&!c&&0!==oe)||ne,m=()=>(0,r.jsx)(b.Z,{variant:"dot",invisible:p,color:"primary",className:q.badge,children:(0,r.jsxs)(j.ZP,{selected:l,"data-name":a,disableGutters:!0,className:q.navListItem,children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(s,{fontSize:d})}),(J||n||t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Z,{disableTypography:!0,children:(0,r.jsx)(T.Z,{variant:"subtitle2",color:"inherit",children:o})}),u&&(0,r.jsx)(T.Z,{variant:"caption",className:q.notification,children:1})]})]})},o);return B.includes(a)?(0,r.jsx)("a",{href:i,className:q.navLink,children:m()},a+o):(0,r.jsx)(f(),{href:i,className:q.navLink,legacyBehavior:!0,children:m()},a+o)}))]}),l&&(0,r.jsx)(w.Z,{})]},a)}))]})})}var F=(0,i.memo)(R);const D={my_education:"Моё обучение",study:"Занимайтесь",tariffs:"Тарифы",other:"Другое"},A={me:"my_education",calendar:"my_education",my_repetitors:"my_education",my_pupil_list:"my_education",self_appointment:"my_education",knowledge_base:"my_education",lessons:"study",homeworks:"study",library:"study",ref:"tariffs",pricing:"tariffs",special_pricing:"tariffs",reward:"tariffs",tutor_rates:"tariffs",auctions:"tariffs",orders_history:"tariffs"},z={me:d.Cn1,lessons:d._Tv,calendar:d._Tv,my_repetitors:d.Nfd,my_pupil_list:d.Nfd,self_appointment:d.ZR8,homeworks:d.c1R,library:d.VqP,pricing:d.OXG,special_pricing:d.RWD,ref:d.rGN,tutor_rates:d.yc2,knowledge_base:d.f2e,reward:d._mz,auctions:d.CZp,training_lesson:d.dTH,binded_account:d.DlQ,go_back:d.QxQ,"test-room":d.sef,orders_history:d.GWm};class W extends i.PureComponent{render(){const{isOpen:e,isExpanded:t,close:n,collapse:o,expand:a,balance:i,reserved:s,isPupil:l,rewardAlert:c,experiment:d,user:u}=this.props,{navList:p}=this.state;return(0,r.jsx)(F,{isOpen:e,isExpanded:t,navList:p,onClose:n,onCollapse:o,onExpand:a,balance:i,reserved:s,isPupil:l,rewardAlert:null==c?void 0:c.needRecipe,experiment:d,updateMenu:this.getScheduledLessons,user:u})}constructor(...e){var t;super(...e),t=this,this.removeItems=[],this.setRemoveItems=e=>{Object.keys(e).forEach((t=>{e[t]?this.removeItems=this.removeItems.filter((e=>e!==t)):this.removeItems.includes(t)||this.removeItems.push(t)}))},this.getItemsList=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{router:n,isPupil:o,navList:r,experiment:a}=t.props,i={};return r.forEach((t=>{const{key:r,href:a,name:s}=t;if("self_appointment"===r&&!o)return;if(e.includes(r))return;if(r.match(/(test_room|chat)/))return;const l=A[r]||"other";if(l){if(!i[l]){const e=D[l];i[l]={title:e}}i[l].elements=i[l].elements||[];const e="special_pricing"===r&&n.asPath.includes("/cart?is_special=true"),t=a===n.pathname||n.pathname.includes("/".concat(r))||e,o={text:s,name:r,icon:z[r]||d.RYZ,iconSize:"medium",href:a,isActive:t};i[l].elements.push(o)}})),Object.keys(i).map((e=>i[e]))},this.getNavList=()=>(this.setRemoveItems({self_appointment:!1}),this.getItemsList(this.removeItems)),this.state={navList:this.getNavList()},this.getScheduledLessons=async()=>{if(this.props.isPupil)try{const e=this.props.user.class,t=(0,p.Z)("isScheduleAvailable");let n="true"===t;t||(n=(0,u.Z)(e,this.props.balance,this.props.reserved,this.props.scheduledSubjectValues),document.cookie="isScheduleAvailable=".concat(String(n),"; max-age=120")),this.setRemoveItems({self_appointment:n}),this.setState({navList:this.getItemsList(this.removeItems)})}catch(e){console.error(e)}}}}W=(0,o.gn)([(0,s.$j)((e=>({isOpen:(0,m.HJ)(e),isExpanded:(0,m.ew)(e),navList:(0,m.aN)(e),balance:(0,m.YU)(e),reserved:(0,m.kl)(e),isPupil:(0,c.QL)(e),experiment:(0,c.T8)(e),rewardAlert:(0,m.pr)(e),user:(0,c.dy)(e),scheduledSubjectValues:(0,m.Rh)(e)})),(e=>(0,l.DE)(m.Nw,e))),a.withRouter],W)},90557:function(e,t,n){n.d(t,{Z:function(){return U}});var o=n(85893),r=n(2664),a=(n(21165),n(26256),n(89675)),i=n(54587),s=n(74476),l=n(41664),c=n.n(l),d=n(3850),u=n(67294),p=n(32653),m=n(946),h=n(33367),f=n(84461),g=n(5307),x=n(79104),b=n(78069),v=n(94246),w=n(63885),k=n(56760),y=n(53626),j=n(73327);var N=n(59466),E=n(86010),_=n(64864),C=n(34067),Z=n(2374);const S=(0,y.Z)((e=>({main:{"& .MuiPaper-root":{maxWidth:500,padding:"28px 22px",display:"flex",flexDirection:"column",alignItems:"center",[e.breakpoints.down("md")]:{maxWidth:280}}},wrap:{marginBottom:26,[e.breakpoints.down("md")]:{marginBottom:22}},title:{display:"inline",...e.typography.h4,[e.breakpoints.down("md")]:{fontSize:18}},link:{...e.typography.h4,color:e.palette.primary.main,cursor:"pointer",textDecoration:"none",[e.breakpoints.down("md")]:{fontSize:18}}})));var L=e=>{let{link:t}=e;const n=S(),{t:r}=(0,d.$G)("components.user-app-bar"),[a,i]=(0,u.useState)(!0),[s,l]=(0,u.useState)(!1);return(0,o.jsx)(_.Z,{className:n.main,open:a,children:s?(0,o.jsx)(v.Z,{variant:"h4",color:"error",children:r("offer_error")}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:n.wrap,children:[(0,o.jsx)(v.Z,{className:n.title,children:r("offer_modal_title")}),(0,o.jsx)("a",{className:n.link,target:"_blank",href:t,rel:"noreferrer",children:" ".concat(r("offer"),".")})]}),(0,o.jsx)(C.Z,{variant:"contained",onClick:()=>{(0,Z.yX)().then((()=>{i(!1)})).catch((e=>{console.error(e),l(!0)}))},children:r("continue")})]})})},P=n(50280),I=n(74123),O=n(70408);const T=(0,y.Z)((e=>({snackbar:{"&.MuiSnackbar-root":{[e.breakpoints.up("md")]:{top:16}}},alert:{width:320,[e.breakpoints.up("md")]:{maxWidth:"none",width:562,marginLeft:60},[e.breakpoints.between("lg","xl")]:{width:600,marginLeft:300},[e.breakpoints.up("xl")]:{marginLeft:650}}}))),M=e=>{let{...t}=e;return(0,o.jsx)(I.Z,{...t,direction:"down"})};var B=e=>{let{isOpen:t,text:n,onButtonCloseClick:r}=e;const a=T();return(0,o.jsx)(O.Z,{className:a.snackbar,open:t,TransitionComponent:M,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,o.jsx)(P.Z,{className:a.alert,severity:"error",onClose:r,children:n})})};var R=()=>{const{t:e}=(0,d.$G)("components.user-app-bar"),t=(0,r.I0)(),{isErrorShown:n}=(0,r.v9)(s.P1);return(0,o.jsx)(B,{isOpen:n,text:e("chatUnavailable"),onButtonCloseClick:()=>{t((0,s.mL)(!1))}})},F=n(18705),D=n(43899);const A=e=>{let{user:t,unreadMessagesCount:n,isEquipmentTestPassed:r,isTutorRole:a,isLoadingDialogsError:i,isParentFullWidth:s,openMobileSidebar:l,countPackagesInCart:_}=e;const C=(e=>(0,y.Z)((t=>(0,j.Z)({root:{paddingTop:e?5:20,backgroundColor:t.palette.background.default},toolbar:{padding:"0",display:"flex",justifyContent:"flex-end",alignItems:"center",[t.breakpoints.down("md")]:{justifyContent:"space-between"}},superToolbar:{padding:"0 18px",[t.breakpoints.up("xl")]:{width:"96%",margin:"auto",padding:0},"@media (min-width: 1600px)":{width:"1220px"}},logo:{width:24,textDecoration:"none",cursor:"pointer"},equipmentTest:{display:"flex",alignItems:"center",textDecoration:"none",boxSizing:"border-box"},list:{display:"flex",position:"relative",alignItems:"center",width:"auto",[t.breakpoints.up("md")]:{width:"fit-content",justifyContent:"space-between"}},item:{margin:"0px 8px",background:t.palette.action.disabledBackground,"& > *":{fontWeight:"initial",textTransform:"none"},"& h6":{fontWeight:500}},menu:{marginTop:52},userName:{marginLeft:12,marginRight:12},unreadMsg:{position:"absolute",top:-1,right:1,display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,background:t.palette.primary.main,color:t.palette.background.paper,fontSize:11,fontWeight:600,borderRadius:"50%",[t.breakpoints.down("md")]:{top:0,left:20}},equipmentTestText:{marginLeft:10,color:t.palette.action.active},chatIcon:{padding:0},cartIcon:{transform:"scale(0.75)"},cartCount:{...t.typography.caption,lineHeight:"12px",letterSpacing:"0.14px",borderRadius:"64px",position:"absolute",top:0,right:0,zIndex:10,color:t.palette.background.paper,backgroundColor:t.palette.primary.main,padding:"4px 6px",border:"1px solid ".concat(t.palette.background.paper)},menuIcon:{width:32,height:32}}))))(s)(),Z=(0,k.Z)(),{t:S}=(0,d.$G)("components.user-app-bar"),P=(0,w.Z)(Z.breakpoints.down("md")),[I,O]=(0,u.useState)(null),T=n>0,M=t.offerta_link,B=t.role===F.Z.PUPIL,A={security:{desktop:(0,o.jsx)(D.J8y,{}),mobile:(0,o.jsx)(D.J8y,{fontSize:"small"})},warning:{desktop:(0,o.jsx)(D.aNP,{htmlColor:Z.palette.error.main}),mobile:(0,o.jsx)(D.aNP,{fontSize:"small",htmlColor:Z.palette.error.main})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(p.Z,{position:"relative",className:C.root,elevation:0,children:[(0,o.jsxs)(b.Z,{className:(0,E.Z)(C.toolbar,s&&C.superToolbar),children:[P&&(0,o.jsx)(D.Oqj,{color:"action",onClick:l}),(0,o.jsxs)("div",{className:C.list,children:[(0,o.jsx)(x.Z,{children:!P&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(m.Z,{className:C.item,href:"/test_room",variant:"extended",size:"large",color:"default",disableRipple:!0,children:[r?A.security.desktop:A.warning.desktop,(0,o.jsx)(v.Z,{variant:"subtitle2",className:C.equipmentTestText,children:S(r?"equip_passed":"equip_failed")})]}),(0,o.jsxs)(h.Z,{className:C.item,href:"/chat",color:"primary",disabled:i,children:[(0,o.jsx)(D.kBi,{color:i?"error":"action"}),T&&(0,o.jsx)("div",{className:C.unreadMsg,children:n})]})]})}),B&&(0,o.jsxs)(h.Z,{className:C.item,href:"/study/cart",children:[(0,o.jsx)(D.w7_,{className:C.cartIcon}),Boolean(_)&&(0,o.jsx)("div",{className:C.cartCount,children:_})]}),(0,o.jsx)(h.Z,{className:C.item,color:"primary",onClick:e=>{O(e.currentTarget)},children:(0,o.jsx)(D.rzm,{color:"action"})})]}),(0,o.jsxs)(f.Z,{anchorEl:I,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,open:Boolean(I),onClose:()=>{O(null)},className:C.menu,disableScrollLock:!0,children:[(0,o.jsx)(c(),{href:"/profile",children:(0,o.jsxs)(g.Z,{disabled:!a,children:[(0,o.jsx)(D.rzm,{}),(0,o.jsx)(v.Z,{variant:"body2",className:C.userName,children:t.name})]})}),P&&[(0,o.jsxs)(g.Z,{href:"/chat",component:"a",disabled:i,children:[(0,o.jsxs)(h.Z,{className:C.chatIcon,children:[(0,o.jsx)(D.kBi,{color:i?"error":"action"}),T&&(0,o.jsx)("div",{className:C.unreadMsg,children:n})]}),(0,o.jsx)(v.Z,{variant:"body2",className:C.userName,children:S("chat")})]},"0"),(0,o.jsxs)(g.Z,{href:"/test_room",component:"a",children:[r?A.security.mobile:A.warning.mobile,(0,o.jsx)(v.Z,{variant:"body2",className:C.userName,children:S("equipment_test")})]},"1")],(0,o.jsx)(g.Z,{onClick:N.k,children:(0,o.jsx)(v.Z,{variant:"body2",children:S("logout")})})]})]}),(0,o.jsx)(R,{})]}),M&&(0,o.jsx)(L,{link:M})]})};var z=(0,u.memo)(A),W=n(33060),J=n(86942);var U=(0,a.Z)((function(e){let{isParentFullWidth:t=!1}=e;const n=(0,r.I0)(),a=(0,r.v9)(s.dy),l=(0,r.v9)(s.wT),c=(0,r.v9)(s.V6),d=(0,r.v9)(s.c6),u=(0,r.v9)(s.is),p=(0,r.v9)(J.JP),{isError:m}=(0,r.v9)(s.P1);return(0,W.b)({onMessage:e=>(e=>{const t=JSON.parse(e);switch(t.event){case"posted":{const e=JSON.parse(t.data.post);e.user_id!==p.mm_user&&n((0,s.Ec)(e));break}case"channel_viewed":{const e=t.data.channel_id;n((0,s.w)(e));break}}})(e),onOpen:()=>n((0,s.eC)())},[]),(0,o.jsx)(z,{user:a,unreadMessagesCount:d,isEquipmentTestPassed:c,isTutorRole:l,isLoadingDialogsError:m,isParentFullWidth:t,openMobileSidebar:()=>n((0,i.GB)()),countPackagesInCart:u})}))},7390:function(e,t,n){n.d(t,{d:function(){return o},k:function(){return r}});const o=(e,t,n)=>{n=n||{};let{expires:o}=n;if("number"==typeof o&&o){const e=new Date;e.setTime(e.getTime()+1e3*o),o=e,n.expires=e}o&&o.toUTCString&&(n.expires=o.toUTCString()),t=encodeURIComponent(t);let r="".concat(e,"=").concat(t);for(const e in n){r+="; ".concat(e);const t=n[e];!0!==t&&(r+="=".concat(t))}document.cookie=r},r=e=>{const{hostname:t}=window.location,n=".".concat(t),r=".".concat(t.split(".").slice(1).join("."));o(e,"",{domain:t,path:"/",expires:-1}),o(e,"",{domain:n,path:"/",expires:-1}),o(e,"",{domain:r,path:"/",expires:-1})}},11510:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(67294);n(85893);var r=n(22003);var a=class{connect(){this.ws=new r.Z(this.url,this.wsProtocols,this.wsOptions),this.addEventListeners(),this.debug&&console.log("ws_open")}disconnect(){var e;null===(e=this.logger)||void 0===e||e.warn("ws_disconnect",{data:this.loggingData||this.url}),this.removeEventListeners()}addEventListeners(){this.ws.addEventListener("open",(e=>this.onOpen(e))),this.ws.addEventListener("close",(e=>this.onClose(e))),this.ws.addEventListener("error",(e=>this.onError(e)))}removeEventListeners(){this.ws.removeEventListener("open",(e=>this.onOpen(e))),this.ws.removeEventListener("close",(e=>this.onClose(e))),this.ws.removeEventListener("error",(e=>this.onError(e))),this.messageReceivers.forEach((e=>this.ws.removeEventListener("message",e)))}onOpen(e){var t;null===(t=this.logger)||void 0===t||t.warn("ws_open",{data:this.loggingData||this.url,event:e}),this.ws.retryCount>0&&this.callbackInRecconnect&&this.callbackInRecconnect()}onError(e){var t;null===(t=this.logger)||void 0===t||t.warn("ws_error",{data:this.loggingData||this.url,event:e})}onClose(e){var t;null===(t=this.logger)||void 0===t||t.warn("ws_closed",{data:this.loggingData||this.url,event:e})}sendMessage(e){this.ws.send(e),this.debug&&console.log("ws_send_message: ".concat(e))}receiveMessage(e){e&&(this.messageReceivers.push(e),this.ws.addEventListener("message",e),this.debug&&console.log("ws_receive_message: ".concat(e)))}setLogger(e,t){this.logger=e,this.loggingData=t}removeEventListener(e){this.ws.removeEventListener("message",e)}constructor(e,t,n,o,r){this.wsName=e,this.url=t,this.wsProtocols=n,this.wsOptions=o,this.debug=r,this.messageReceivers=[],this.addCallbackInRecconnect=e=>{this.callbackInRecconnect=e},this.wsName=e,this.url=t,this.wsProtocols=n,this.wsOptions=o,this.debug=r,this.connect()}};class i extends o.Component{componentDidMount(){const{url:e,wsProtocols:t,wsOptions:n,wsName:o}=this.props;this.ws=new a(o,e,t,n),this.auth(),this.receiveMessage()}componentWillUnmount(){var e;null===(e=this.ws)||void 0===e||e.disconnect()}auth(){const{authMessage:e}=this.props;e&&this.ws.sendMessage(e)}receiveMessage(){const{onMessage:e,onOpen:t}=this.props;this.ws.receiveMessage(e),t&&t()}render(){return!0}}var s=i},42027:function(e,t,n){var o=n(34079),r=n(46375),a=n(30858);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];i=(0,a.BC)(n,i);const{withSubjectOptions:s,filteredScheduledSubjectValue:l}=(0,a.Sx)(t.filter((e=>{let{tutorQualification:t,subject:n}=e;return t===r.m.Profi&&null!==n})).filter((e=>{let{subject:t,tutorQualification:o,duration:r}=e;return!n.find((e=>e.tutorQualification===o&&e.subject===t&&e.duration===r))})).map((e=>e)),i);i=l;const{lessonsWithoutSubject:c}=(0,a.zG)(t.filter((e=>{let{subject:t,tutorQualification:n}=e;return null===t&&n!==r.m.Intro})).map((t=>t.tutorQualification===r.m.Bonus?{...t,duration:(0,o.OO)(e)?o.j$:o.o4,tutorQualification:r.m.Profi}:t)),i);return[...s,...c].length>0}},65255:function(e,t,n){n.d(t,{D:function(){return o}});const o=(e,t)=>{let n;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];clearTimeout(n),n=setTimeout((()=>{n=null,e.apply(undefined,r)}),t||200)}}},30858:function(e,t,n){n.d(t,{BC:function(){return o},Sx:function(){return r},zG:function(){return a}});const o=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{let{subject:n,tutorQualification:o,duration:r}=t;e=e.filter((e=>e!=="".concat(n).concat(o).concat(r-5)))})),e},r=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{withSubjectOptions:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((t=>{let{subject:n,tutorQualification:o,duration:r}=t;const a=e.length>0&&!!e.find((e=>e==="".concat(n).concat(o).concat(r-5)));return a&&(e=e.filter((e=>e!=="".concat(n).concat(o).concat(r-5)))),!a})),filteredScheduledSubjectValue:e}},a=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{lessonsWithoutSubject:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((t=>{let{tutorQualification:n,duration:o,lessonsNum:r}=t,a=e.filter((e=>e.includes("".concat(n).concat(o-5)))),i=a.length>0,s=r;for(let t=0;t<=r;t++){const t=e.findIndex((e=>e.includes("".concat(n).concat(o-5))));i&&t>=0&&0!==s&&(e.splice(t,1),a=e.filter((e=>e.includes("".concat(n).concat(o-5)))),s--)}return i=!s,!i})),filteredScheduledWithoutSubjectValue:e}}},4492:function(e,t){t.Z=(e,t,n,o)=>{let r=Math.abs(e);return r%=100,r>=5&&r<=20?o:(r%=10,1===r?t:r>=2&&r<=4?n:o)}}}]);
//# sourceMappingURL=5006-88783d945d0a4c18.js.map