"use strict";

function sendSimpleEvent(ev) {
  if (!isAllowEvents()) {
    console.log('events are disabled');
    return;
  }

  console.log('send simple event: ' + ev);

  try {
    ym(51386368, 'reachGoal', ev);
  } catch (e) {
    (console.error || console.log).call(console, e + '\n' + (e.stack || ""));
  }

  try {
    gtag('event', ev);
  } catch (e) {
    (console.error || console.log).call(console, e + '\n' + (e.stack || ""));
  }
}

function telClick() {
  sendSimpleEvent('r_tel');
  return true;
}

function emailClick() {
  sendSimpleEvent('email');
  return true;
}

function set_onclick() {
  var tel = document.querySelectorAll('a[href^="tel:"]');

  for (var i = 0; i < tel.length; i++) {
    tel[i].addEventListener('click', telClick);
  }

  var mail = document.querySelectorAll('a[href^="mailto:"]');

  for (var i = 0; i < mail.length; i++) {
    mail[i].addEventListener('click', emailClick);
  }
}

set_onclick();
