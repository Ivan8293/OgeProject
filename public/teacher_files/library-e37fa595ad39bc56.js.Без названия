(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5175,791],{71185:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/library",function(){return s(43869)}])},13837:function(e,t,s){"use strict";s.d(t,{x:function(){return c},m:function(){return o}});var n=s(85893),a=s(67294),r=s(45697),i=s.n(r);s(49110);const l=new(s(46738))("tabs");class o extends a.PureComponent{componentDidMount(){const{activeIndex:e}=this.state;this.setUrlAnchor(e)}render(){const{items:e,children:t,badges:s,className:a="",title:r,isChatError:i}=this.props,o="".concat(l.name()," ").concat(a),{activeIndex:c}=this.state;return(0,n.jsxs)("div",{className:o,children:[!r&&(0,n.jsx)("div",{className:l.elem("list"),onClick:this.onClick,children:e.map(((e,t)=>(0,n.jsxs)("div",{className:l.elem("item",c===t&&"active"),children:[e,s[t]&&(0,n.jsx)("span",{className:l.elem("badge")})]},"tab-item-".concat(e,"-").concat(t))))}),t[i?c+1:c]]})}constructor(...e){super(...e),this.state={activeIndex:this.props.activeIndex},this.setUrlAnchor=(e,t)=>{const{anchors:s}=this.props;s.forEach(((s,n)=>{const a=""===window.location.hash,r=window.location.hash===s,i=e===n;a?window.location.hash=s:r?(window.location.hash=s,this.setState({activeIndex:n})):i&&t&&(window.location.hash=s)}))},this.onClick=e=>{const{onChange:t}=this.props,{currentTarget:s,target:n}=e,a=Array.prototype.indexOf.call(s.children,n.closest(".tabs__item"));t&&a>=0&&t(a,e),-1!==a&&(this.setUrlAnchor(a,!0),this.setState({activeIndex:a}))}}}o.propTypes={items:i().arrayOf(i().string).isRequired,activeIndex:i().number,anchors:i().arrayOf(i().string),onChange:i().func,badges:i().arrayOf(i().bool)},o.defaultProps={anchors:[],onChange:null,badges:[],activeIndex:0};const c=e=>{const{children:t,content:s}=e;return s||t}},43869:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return E},default:function(){return Z}});var n=s(85893),a=s(2664),r=s(32631),i=s(67294),l=s(46738),o=s.n(l),c=s(14890),p=s(34934),h=s(13837),d=s(54243),u=s(20698),m=s(95551),b=s(14142),f=s(45697),g=s.n(f),v=s(70989),x=s(29206);s(20771);const y=new(o())("old-select");class j extends i.PureComponent{componentDidMount(){const{selected:e}=this.props;this.setState({selected:e})}componentDidUpdate(e){const{selected:t}=this.props;t!==e.selected&&this.setState({selected:t})}render(){const{className:e,options:t,hasCategory:s}=this.props,{selected:a,popupVisible:r}=this.state,i="".concat(y.name(r&&"open")," ").concat(e);return(0,n.jsxs)("div",{className:i,onMouseLeave:this.onMouseLeave,children:[(0,n.jsx)("div",{className:y.elem("label"),onClick:this.togglePopup,children:this.getCurrentLabel(a)}),(0,n.jsx)("div",{className:y.elem("list-wrap"),children:(0,n.jsx)("ul",{className:y.elem("list"),children:s?(0,n.jsxs)(n.Fragment,{children:[this.renderItem("all","Все предметы"),Object.keys((0,x.sp)(t)).map((e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("li",{className:y.elem("list-item_category"),children:[v.mF[null==e?void 0:e.toUpperCase()],":"]}),(0,x.sp)(t)[e].map((t=>{let{value:s,label:n}=t;return this.renderItem(s,n,e)}))]})))]}):t.map((e=>{let{value:t,label:s,disabled:n}=e;return this.renderItem(t,s,null,n)}))})})]})}constructor(...e){var t;super(...e),t=this,this.state={},this.getCurrentLabel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{label:s,options:n,resetSelect:a}=t.props,r=n.find((t=>{const{value:s}=t;return s===e}));return null===e?s:(r||a(),r?(0,b.Z)(r.label):"")},this.togglePopup=()=>{const{popupVisible:e=!1}=this.state;this.setState({popupVisible:!e})},this.setValue=(e,t)=>{const{onChange:s}=this.props;this.setState({selected:e,popupVisible:!1}),s(e,t)},this.onMouseLeave=()=>{this.setState({popupVisible:!1})},this.renderItem=function(e,s,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,n.jsx)(n.Fragment,{children:!r&&(0,n.jsx)("li",{onClick:()=>t.setValue(e,a),className:y.elem("list-item"),"data-value":e,children:(0,b.Z)(s)},e)})}}}j.propTypes={options:g().arrayOf(g().shape({value:g().oneOfType([g().string,g().number]),label:g().string.isRequired})).isRequired,selected:g().oneOfType([g().string,g().number]),label:g().string,className:g().string,onChange:g().func,hasCategory:g().boolean,resetSelect:g().func},j.defaultProps={selected:null,label:"",className:"",onChange:()=>{},hasCategory:!1};var C=j,N=s(88769),_=s(92699),k=s(42615);s(31154);const P=new(o())("card-list");class w extends i.PureComponent{componentDidUpdate(e){const{role:t,filter:s,pagination:n,updateCardsAsync:a,setPaginationInit:r,title:i}=this.props,l=e.filter!==s,o=e.role!==t,c=e.pagination.offset!==n.offset,p=l||o||c;o&&r(),c&&i&&a(i),p&&!i&&(a(),(0,x.Lh)({role:t,filter:s,pagination:n}))}render(){const e=v.fc.map((e=>{let{label:t}=e;return t})),{pagination:t,role:s,title:a}=this.props;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:P.name(),children:(0,n.jsxs)("div",{className:P.elem("wrap"),children:[(0,n.jsx)(_.Z,{}),(0,n.jsx)(h.m,{activeIndex:"for_pupils"===s?0:1,items:e,className:P.elem("tabs"),onChange:this.onChangeTabs,title:a,children:v.fc.map(this.renderContentByTab)}),t.visible?this.renderPagination():""]})}),(0,n.jsx)("div",{className:P.elem("promo-wrap")})]})}constructor(e){super(e),this.onPrevBtnClick=()=>{this.btnPrevRef.current.blur(),this.props.setPaginationDecrement()},this.onNextBtnClick=()=>{this.btnNextRef.current.blur(),this.props.setPaginationIncrement()},this.onChangeTabs=e=>{var t;const{setRole:s}=this.props;s(null===(t=v.fc[e])||void 0===t?void 0:t.value)},this.renderSelect=e=>{const{setFilterAsync:t,ages:s,filter:a,role:r,subjectOptions:i,klassesOptions:l,contentOptions:o,setTitle:c}=this.props,p=i[i.current],h=l[l.current],u="vpr"===a.klass,m={subject:a.subject,class:a.klass,content:a.content,age:a.age},b={subject:u?p.filter((e=>e.isVpr)):p,class:h,content:o[r],age:s},f=m[e],g=b[e];return(0,n.jsx)(C,{className:P.elem("select"),selected:f,options:g,onChange:(s,n)=>{t({type:e,value:s,category:n}),c("")},resetSelect:()=>{const{contentOptions:s}=this.props,n=e===v.vA.SUBJECT||e===v.vA.CONTENT||e===v.vA.KLASS,a=s.for_pupils.some((e=>{if("all"!==e.value)return s.for_parents.some((t=>t.value===e.value))}));n||t({type:e,value:"all",category:null}),a&&t({type:e,value:"all",category:null})}},(0,d.H)())},this.renderContentByTab=()=>{var e;const{role:t,blocks:s,loading:a,pagination:r,modules:i,title:l}=this.props,o=s.length?s:i,c=Boolean(i.length);return(0,n.jsxs)("div",{className:P.elem("cards"),children:[!l&&(0,n.jsx)("div",{className:P.elem("filters-block"),children:null===(e=v.gQ[t])||void 0===e?void 0:e.map(this.renderSelect)}),(0,n.jsxs)("div",{className:P.elem("list"),children:[a&&(0,n.jsx)(p.Z,{}),o.length?o.slice(0,r.limit).map((e=>{const{id:s,title:a,subject:r,url:i,tags:l,form:o}=e,p=(0,x.zf)(l),h=(0,x.aY)(l);return(0,n.jsx)(N.Z,{title:a,subject:r,imgUrl:i,id:s,typeContent:p,typeContents:h,listClasses:o,role:t,isModules:c},s)})):!l&&!a&&(0,n.jsx)("p",{className:P.elem("found-message"),children:(0,u.ZP)(["library","no_blocks"])})]})]},(0,d.H)())},this.renderPagination=()=>(0,n.jsxs)("div",{className:P.elem("separator-block"),children:[(0,n.jsxs)("button",{type:"button",className:P.elem("separator-prev"),onClick:this.onPrevBtnClick,disabled:this.props.pagination.prevDisable,ref:this.btnPrevRef,children:[(0,n.jsx)(m.Xd,{}),(0,n.jsx)("span",{className:P.elem("text-desktop"),children:(0,u.ZP)(["library","prev_page_desktop"])}),(0,n.jsx)("span",{className:P.elem("text-mobile"),children:(0,u.ZP)(["library","prev_page_mobile"])})]}),(0,n.jsxs)("button",{type:"button",className:P.elem("separator-next"),onClick:this.onNextBtnClick,disabled:this.props.pagination.nextDisable,ref:this.btnNextRef,children:[(0,n.jsx)("span",{className:P.elem("text-desktop"),children:(0,u.ZP)(["library","next_page_desktop"])}),(0,n.jsx)("span",{className:P.elem("text-mobile"),children:(0,u.ZP)(["library","next_page_mobile"])}),(0,n.jsx)(m.ol,{})]})]}),this.btnPrevRef=i.createRef(),this.btnNextRef=i.createRef()}}var T=(0,a.$j)((e=>e),(e=>(0,c.DE)(k,e)))(w);s(77630);const O=new(o())("library");var S=()=>(0,n.jsx)("div",{className:O.name(),children:(0,n.jsx)(T,{})}),I=s(26161),R=s(24167),E=!0,Z=(0,r.Z)((e=>{let{initialStoreLibrary:t}=e;const s=(0,R.Z)(I.Z,t);return(0,n.jsx)(a.zt,{store:s,children:(0,n.jsx)(S,{})})}))},31154:function(){},20771:function(){},77630:function(){},49110:function(){},92703:function(e,t,s){"use strict";var n=s(50414);function a(){}function r(){}r.resetWarningCache=a,e.exports=function(){function e(e,t,s,a,r,i){if(i!==n){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:a};return s.PropTypes=s,s}},45697:function(e,t,s){e.exports=s(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[3626,7859,1908,4890,4701,3997,1664,8217,1174,4835,2445,4045,158,6647,6656,9039,6192,392,891,3875,3249,698,8986,5006,9,6716,5380,2888,9774,179],(function(){return t=71185,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=library-e37fa595ad39bc56.js.map